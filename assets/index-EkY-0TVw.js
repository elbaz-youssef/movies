function BD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var jD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qD(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var HS={exports:{}},Pf={},GS={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tc=Symbol.for("react.element"),WD=Symbol.for("react.portal"),HD=Symbol.for("react.fragment"),GD=Symbol.for("react.strict_mode"),KD=Symbol.for("react.profiler"),QD=Symbol.for("react.provider"),YD=Symbol.for("react.context"),JD=Symbol.for("react.forward_ref"),XD=Symbol.for("react.suspense"),ZD=Symbol.for("react.memo"),eO=Symbol.for("react.lazy"),lI=Symbol.iterator;function tO(t){return t===null||typeof t!="object"?null:(t=lI&&t[lI]||t["@@iterator"],typeof t=="function"?t:null)}var KS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QS=Object.assign,YS={};function Ya(t,e,n){this.props=t,this.context=e,this.refs=YS,this.updater=n||KS}Ya.prototype.isReactComponent={};Ya.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ya.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JS(){}JS.prototype=Ya.prototype;function my(t,e,n){this.props=t,this.context=e,this.refs=YS,this.updater=n||KS}var gy=my.prototype=new JS;gy.constructor=my;QS(gy,Ya.prototype);gy.isPureReactComponent=!0;var uI=Array.isArray,XS=Object.prototype.hasOwnProperty,_y={current:null},ZS={key:!0,ref:!0,__self:!0,__source:!0};function eA(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)XS.call(e,r)&&!ZS.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Tc,type:t,key:s,ref:o,props:i,_owner:_y.current}}function nO(t,e){return{$$typeof:Tc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tc}function rO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cI=/\/+/g;function fm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?rO(""+t.key):e.toString(36)}function Yh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Tc:case WD:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fm(o,0):r,uI(i)?(n="",t!=null&&(n=t.replace(cI,"$&/")+"/"),Yh(i,e,n,"",function(u){return u})):i!=null&&(yy(i)&&(i=nO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(cI,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",uI(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+fm(s,a);o+=Yh(s,e,n,l,i)}else if(l=tO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+fm(s,a++),o+=Yh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wh(t,e,n){if(t==null)return t;var r=[],i=0;return Yh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function iO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Jh={transition:null},sO={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Jh,ReactCurrentOwner:_y};le.Children={map:wh,forEach:function(t,e,n){wh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wh(t,function(){e++}),e},toArray:function(t){return wh(t,function(e){return e})||[]},only:function(t){if(!yy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ya;le.Fragment=HD;le.Profiler=KD;le.PureComponent=my;le.StrictMode=GD;le.Suspense=XD;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sO;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=QS({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_y.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)XS.call(e,l)&&!ZS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Tc,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:YD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QD,_context:t},t.Consumer=t};le.createElement=eA;le.createFactory=function(t){var e=eA.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:JD,render:t}};le.isValidElement=yy;le.lazy=function(t){return{$$typeof:eO,_payload:{_status:-1,_result:t},_init:iO}};le.memo=function(t,e){return{$$typeof:ZD,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Jh.transition;Jh.transition={};try{t()}finally{Jh.transition=e}};le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};le.useCallback=function(t,e){return Qt.current.useCallback(t,e)};le.useContext=function(t){return Qt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Qt.current.useEffect(t,e)};le.useId=function(){return Qt.current.useId()};le.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Qt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};le.useRef=function(t){return Qt.current.useRef(t)};le.useState=function(t){return Qt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Qt.current.useTransition()};le.version="18.2.0";GS.exports=le;var O=GS.exports;const Lr=zD(O),oO=BD({__proto__:null,default:Lr},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aO=O,lO=Symbol.for("react.element"),uO=Symbol.for("react.fragment"),cO=Object.prototype.hasOwnProperty,hO=aO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,dO={key:!0,ref:!0,__self:!0,__source:!0};function tA(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)cO.call(e,r)&&!dO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:lO,type:t,key:s,ref:o,props:i,_owner:hO.current}}Pf.Fragment=uO;Pf.jsx=tA;Pf.jsxs=tA;HS.exports=Pf;var C=HS.exports,fg={},nA={exports:{}},En={},rA={exports:{}},iA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,Z){var te=U.length;U.push(Z);e:for(;0<te;){var ye=te-1>>>1,ve=U[ye];if(0<i(ve,Z))U[ye]=Z,U[te]=ve,te=ye;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Z=U[0],te=U.pop();if(te!==Z){U[0]=te;e:for(var ye=0,ve=U.length,D=ve>>>1;ye<D;){var Xe=2*(ye+1)-1,yt=U[Xe],ce=Xe+1,_e=U[ce];if(0>i(yt,te))ce<ve&&0>i(_e,yt)?(U[ye]=_e,U[ce]=te,ye=ce):(U[ye]=yt,U[Xe]=te,ye=Xe);else if(ce<ve&&0>i(_e,te))U[ye]=_e,U[ce]=te,ye=ce;else break e}}return Z}function i(U,Z){var te=U.sortIndex-Z.sortIndex;return te!==0?te:U.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,m=!1,w=!1,v=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(U){for(var Z=n(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=U)r(u),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(u)}}function S(U){if(v=!1,y(U),!w)if(n(l)!==null)w=!0,Ve(A);else{var Z=n(u);Z!==null&&Je(S,Z.startTime-U)}}function A(U,Z){w=!1,v&&(v=!1,_($),$=-1),m=!0;var te=f;try{for(y(Z),d=n(l);d!==null&&(!(d.expirationTime>Z)||U&&!ie());){var ye=d.callback;if(typeof ye=="function"){d.callback=null,f=d.priorityLevel;var ve=ye(d.expirationTime<=Z);Z=t.unstable_now(),typeof ve=="function"?d.callback=ve:d===n(l)&&r(l),y(Z)}else r(l);d=n(l)}if(d!==null)var D=!0;else{var Xe=n(u);Xe!==null&&Je(S,Xe.startTime-Z),D=!1}return D}finally{d=null,f=te,m=!1}}var R=!1,k=null,$=-1,Q=5,W=-1;function ie(){return!(t.unstable_now()-W<Q)}function Oe(){if(k!==null){var U=t.unstable_now();W=U;var Z=!0;try{Z=k(!0,U)}finally{Z?ge():(R=!1,k=null)}}else R=!1}var ge;if(typeof g=="function")ge=function(){g(Oe)};else if(typeof MessageChannel<"u"){var Ot=new MessageChannel,Vt=Ot.port2;Ot.port1.onmessage=Oe,ge=function(){Vt.postMessage(null)}}else ge=function(){I(Oe,0)};function Ve(U){k=U,R||(R=!0,ge())}function Je(U,Z){$=I(function(){U(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,Ve(A))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var te=f;f=Z;try{return U()}finally{f=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,Z){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var te=f;f=U;try{return Z()}finally{f=te}},t.unstable_scheduleCallback=function(U,Z,te){var ye=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ye+te:ye):te=ye,U){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=te+ve,U={id:c++,callback:Z,priorityLevel:U,startTime:te,expirationTime:ve,sortIndex:-1},te>ye?(U.sortIndex=te,e(u,U),n(l)===null&&U===n(u)&&(v?(_($),$=-1):v=!0,Je(S,te-ye))):(U.sortIndex=ve,e(l,U),w||m||(w=!0,Ve(A))),U},t.unstable_shouldYield=ie,t.unstable_wrapCallback=function(U){var Z=f;return function(){var te=f;f=Z;try{return U.apply(this,arguments)}finally{f=te}}}})(iA);rA.exports=iA;var fO=rA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA=O,mn=fO;function M(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oA=new Set,Ru={};function co(t,e){va(t,e),va(t+"Capture",e)}function va(t,e){for(Ru[t]=e,t=0;t<e.length;t++)oA.add(e[t])}var Br=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pg=Object.prototype.hasOwnProperty,pO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hI={},dI={};function mO(t){return pg.call(dI,t)?!0:pg.call(hI,t)?!1:pO.test(t)?dI[t]=!0:(hI[t]=!0,!1)}function gO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _O(t,e,n,r){if(e===null||typeof e>"u"||gO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function wy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vy,wy);Rt[e]=new Yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vy,wy);Rt[e]=new Yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vy,wy);Rt[e]=new Yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ey(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_O(e,n,i,r)&&(n=null),r||i===null?mO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yr=sA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eh=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),Iy=Symbol.for("react.strict_mode"),mg=Symbol.for("react.profiler"),aA=Symbol.for("react.provider"),lA=Symbol.for("react.context"),Ty=Symbol.for("react.forward_ref"),gg=Symbol.for("react.suspense"),_g=Symbol.for("react.suspense_list"),Sy=Symbol.for("react.memo"),ci=Symbol.for("react.lazy"),uA=Symbol.for("react.offscreen"),fI=Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=fI&&t[fI]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,pm;function Gl(t){if(pm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pm=e&&e[1]||""}return`
`+pm+t}var mm=!1;function gm(t,e){if(!t||mm)return"";mm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Gl(t):""}function yO(t){switch(t.tag){case 5:return Gl(t.type);case 16:return Gl("Lazy");case 13:return Gl("Suspense");case 19:return Gl("SuspenseList");case 0:case 2:case 15:return t=gm(t.type,!1),t;case 11:return t=gm(t.type.render,!1),t;case 1:return t=gm(t.type,!0),t;default:return""}}function yg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case Wo:return"Portal";case mg:return"Profiler";case Iy:return"StrictMode";case gg:return"Suspense";case _g:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lA:return(t.displayName||"Context")+".Consumer";case aA:return(t._context.displayName||"Context")+".Provider";case Ty:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sy:return e=t.displayName||null,e!==null?e:yg(t.type)||"Memo";case ci:e=t._payload,t=t._init;try{return yg(t(e))}catch{}}return null}function vO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yg(e);case 8:return e===Iy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function wO(t){var e=cA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ih(t){t._valueTracker||(t._valueTracker=wO(t))}function hA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vg(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dA(t,e){e=e.checked,e!=null&&Ey(t,"checked",e,!1)}function wg(t,e){dA(t,e);var n=Di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eg(t,e.type,Di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eg(t,e,n){(e!=="number"||Sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Kl=Array.isArray;function oa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Di(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ig(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(M(92));if(Kl(n)){if(1<n.length)throw Error(M(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Di(n)}}function fA(t,e){var n=Di(e.value),r=Di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _I(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Th,mA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Th.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EO=["Webkit","ms","Moz","O"];Object.keys(su).forEach(function(t){EO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),su[e]=su[t]})});function gA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||su.hasOwnProperty(t)&&su[t]?(""+e).trim():e+"px"}function _A(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var IO=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sg(t,e){if(e){if(IO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Ag(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rg=null;function Ay(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pg=null,aa=null,la=null;function yI(t){if(t=Rc(t)){if(typeof Pg!="function")throw Error(M(280));var e=t.stateNode;e&&(e=Nf(e),Pg(t.stateNode,t.type,e))}}function yA(t){aa?la?la.push(t):la=[t]:aa=t}function vA(){if(aa){var t=aa,e=la;if(la=aa=null,yI(t),e)for(t=0;t<e.length;t++)yI(e[t])}}function wA(t,e){return t(e)}function EA(){}var _m=!1;function IA(t,e,n){if(_m)return t(e,n);_m=!0;try{return wA(t,e,n)}finally{_m=!1,(aa!==null||la!==null)&&(EA(),vA())}}function Cu(t,e){var n=t.stateNode;if(n===null)return null;var r=Nf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(M(231,e,typeof n));return n}var Cg=!1;if(Br)try{var bl={};Object.defineProperty(bl,"passive",{get:function(){Cg=!0}}),window.addEventListener("test",bl,bl),window.removeEventListener("test",bl,bl)}catch{Cg=!1}function TO(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var ou=!1,Ad=null,Rd=!1,bg=null,SO={onError:function(t){ou=!0,Ad=t}};function AO(t,e,n,r,i,s,o,a,l){ou=!1,Ad=null,TO.apply(SO,arguments)}function RO(t,e,n,r,i,s,o,a,l){if(AO.apply(this,arguments),ou){if(ou){var u=Ad;ou=!1,Ad=null}else throw Error(M(198));Rd||(Rd=!0,bg=u)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function vI(t){if(ho(t)!==t)throw Error(M(188))}function PO(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(M(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return vI(i),t;if(s===r)return vI(i),e;s=s.sibling}throw Error(M(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?t:e}function SA(t){return t=PO(t),t!==null?AA(t):null}function AA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=AA(t);if(e!==null)return e;t=t.sibling}return null}var RA=mn.unstable_scheduleCallback,wI=mn.unstable_cancelCallback,CO=mn.unstable_shouldYield,bO=mn.unstable_requestPaint,Ze=mn.unstable_now,kO=mn.unstable_getCurrentPriorityLevel,Ry=mn.unstable_ImmediatePriority,PA=mn.unstable_UserBlockingPriority,Pd=mn.unstable_NormalPriority,xO=mn.unstable_LowPriority,CA=mn.unstable_IdlePriority,Cf=null,fr=null;function NO(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Cf,t,void 0,(t.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:VO,DO=Math.log,OO=Math.LN2;function VO(t){return t>>>=0,t===0?32:31-(DO(t)/OO|0)|0}var Sh=64,Ah=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ql(a):(s&=o,s!==0&&(r=Ql(s)))}else o=n&~i,o!==0?r=Ql(o):s!==0&&(r=Ql(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Hn(e),i=1<<n,r|=t[n],e&=~i;return r}function LO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Hn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=LO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function kg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function bA(){var t=Sh;return Sh<<=1,!(Sh&4194240)&&(Sh=64),t}function ym(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Hn(e),t[e]=n}function FO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Hn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Py(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Hn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ee=0;function kA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xA,Cy,NA,DA,OA,xg=!1,Rh=[],Ei=null,Ii=null,Ti=null,bu=new Map,ku=new Map,di=[],$O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EI(t,e){switch(t){case"focusin":case"focusout":Ei=null;break;case"dragenter":case"dragleave":Ii=null;break;case"mouseover":case"mouseout":Ti=null;break;case"pointerover":case"pointerout":bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(e.pointerId)}}function kl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Rc(e),e!==null&&Cy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function UO(t,e,n,r,i){switch(e){case"focusin":return Ei=kl(Ei,t,e,n,r,i),!0;case"dragenter":return Ii=kl(Ii,t,e,n,r,i),!0;case"mouseover":return Ti=kl(Ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bu.set(s,kl(bu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ku.set(s,kl(ku.get(s)||null,t,e,n,r,i)),!0}return!1}function VA(t){var e=bs(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=TA(n),e!==null){t.blockedOn=e,OA(t.priority,function(){NA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rg=r,n.target.dispatchEvent(r),Rg=null}else return e=Rc(n),e!==null&&Cy(e),t.blockedOn=n,!1;e.shift()}return!0}function II(t,e,n){Xh(t)&&n.delete(e)}function BO(){xg=!1,Ei!==null&&Xh(Ei)&&(Ei=null),Ii!==null&&Xh(Ii)&&(Ii=null),Ti!==null&&Xh(Ti)&&(Ti=null),bu.forEach(II),ku.forEach(II)}function xl(t,e){t.blockedOn===e&&(t.blockedOn=null,xg||(xg=!0,mn.unstable_scheduleCallback(mn.unstable_NormalPriority,BO)))}function xu(t){function e(i){return xl(i,t)}if(0<Rh.length){xl(Rh[0],t);for(var n=1;n<Rh.length;n++){var r=Rh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ei!==null&&xl(Ei,t),Ii!==null&&xl(Ii,t),Ti!==null&&xl(Ti,t),bu.forEach(e),ku.forEach(e),n=0;n<di.length;n++)r=di[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<di.length&&(n=di[0],n.blockedOn===null);)VA(n),n.blockedOn===null&&di.shift()}var ua=Yr.ReactCurrentBatchConfig,bd=!0;function jO(t,e,n,r){var i=Ee,s=ua.transition;ua.transition=null;try{Ee=1,by(t,e,n,r)}finally{Ee=i,ua.transition=s}}function zO(t,e,n,r){var i=Ee,s=ua.transition;ua.transition=null;try{Ee=4,by(t,e,n,r)}finally{Ee=i,ua.transition=s}}function by(t,e,n,r){if(bd){var i=Ng(t,e,n,r);if(i===null)Cm(t,e,r,kd,n),EI(t,r);else if(UO(i,t,e,n,r))r.stopPropagation();else if(EI(t,r),e&4&&-1<$O.indexOf(t)){for(;i!==null;){var s=Rc(i);if(s!==null&&xA(s),s=Ng(t,e,n,r),s===null&&Cm(t,e,r,kd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cm(t,e,r,null,n)}}var kd=null;function Ng(t,e,n,r){if(kd=null,t=Ay(r),t=bs(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kd=t,null}function LA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kO()){case Ry:return 1;case PA:return 4;case Pd:case xO:return 16;case CA:return 536870912;default:return 16}default:return 16}}var gi=null,ky=null,Zh=null;function MA(){if(Zh)return Zh;var t,e=ky,n=e.length,r,i="value"in gi?gi.value:gi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Zh=i.slice(t,1<r?1-r:void 0)}function ed(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ph(){return!0}function TI(){return!1}function In(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ph:TI,this.isPropagationStopped=TI,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ph)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ph)},persist:function(){},isPersistent:Ph}),e}var Ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xy=In(Ja),Ac=Ue({},Ja,{view:0,detail:0}),qO=In(Ac),vm,wm,Nl,bf=Ue({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ny,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nl&&(Nl&&t.type==="mousemove"?(vm=t.screenX-Nl.screenX,wm=t.screenY-Nl.screenY):wm=vm=0,Nl=t),vm)},movementY:function(t){return"movementY"in t?t.movementY:wm}}),SI=In(bf),WO=Ue({},bf,{dataTransfer:0}),HO=In(WO),GO=Ue({},Ac,{relatedTarget:0}),Em=In(GO),KO=Ue({},Ja,{animationName:0,elapsedTime:0,pseudoElement:0}),QO=In(KO),YO=Ue({},Ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JO=In(YO),XO=Ue({},Ja,{data:0}),AI=In(XO),ZO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nV(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tV[t])?!!e[t]:!1}function Ny(){return nV}var rV=Ue({},Ac,{key:function(t){if(t.key){var e=ZO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ed(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eV[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ny,charCode:function(t){return t.type==="keypress"?ed(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ed(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iV=In(rV),sV=Ue({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RI=In(sV),oV=Ue({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ny}),aV=In(oV),lV=Ue({},Ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),uV=In(lV),cV=Ue({},bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),hV=In(cV),dV=[9,13,27,32],Dy=Br&&"CompositionEvent"in window,au=null;Br&&"documentMode"in document&&(au=document.documentMode);var fV=Br&&"TextEvent"in window&&!au,FA=Br&&(!Dy||au&&8<au&&11>=au),PI=" ",CI=!1;function $A(t,e){switch(t){case"keyup":return dV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Go=!1;function pV(t,e){switch(t){case"compositionend":return UA(e);case"keypress":return e.which!==32?null:(CI=!0,PI);case"textInput":return t=e.data,t===PI&&CI?null:t;default:return null}}function mV(t,e){if(Go)return t==="compositionend"||!Dy&&$A(t,e)?(t=MA(),Zh=ky=gi=null,Go=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return FA&&e.locale!=="ko"?null:e.data;default:return null}}var gV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gV[t.type]:e==="textarea"}function BA(t,e,n,r){yA(r),e=xd(e,"onChange"),0<e.length&&(n=new xy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lu=null,Nu=null;function _V(t){XA(t,0)}function kf(t){var e=Yo(t);if(hA(e))return t}function yV(t,e){if(t==="change")return e}var jA=!1;if(Br){var Im;if(Br){var Tm="oninput"in document;if(!Tm){var kI=document.createElement("div");kI.setAttribute("oninput","return;"),Tm=typeof kI.oninput=="function"}Im=Tm}else Im=!1;jA=Im&&(!document.documentMode||9<document.documentMode)}function xI(){lu&&(lu.detachEvent("onpropertychange",zA),Nu=lu=null)}function zA(t){if(t.propertyName==="value"&&kf(Nu)){var e=[];BA(e,Nu,t,Ay(t)),IA(_V,e)}}function vV(t,e,n){t==="focusin"?(xI(),lu=e,Nu=n,lu.attachEvent("onpropertychange",zA)):t==="focusout"&&xI()}function wV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kf(Nu)}function EV(t,e){if(t==="click")return kf(e)}function IV(t,e){if(t==="input"||t==="change")return kf(e)}function TV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:TV;function Du(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!pg.call(e,i)||!Qn(t[i],e[i]))return!1}return!0}function NI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function DI(t,e){var n=NI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NI(n)}}function qA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?qA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function WA(){for(var t=window,e=Sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sd(t.document)}return e}function Oy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function SV(t){var e=WA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&qA(n.ownerDocument.documentElement,n)){if(r!==null&&Oy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=DI(n,s);var o=DI(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AV=Br&&"documentMode"in document&&11>=document.documentMode,Ko=null,Dg=null,uu=null,Og=!1;function OI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Og||Ko==null||Ko!==Sd(r)||(r=Ko,"selectionStart"in r&&Oy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uu&&Du(uu,r)||(uu=r,r=xd(Dg,"onSelect"),0<r.length&&(e=new xy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ko)))}function Ch(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Qo={animationend:Ch("Animation","AnimationEnd"),animationiteration:Ch("Animation","AnimationIteration"),animationstart:Ch("Animation","AnimationStart"),transitionend:Ch("Transition","TransitionEnd")},Sm={},HA={};Br&&(HA=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function xf(t){if(Sm[t])return Sm[t];if(!Qo[t])return t;var e=Qo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in HA)return Sm[t]=e[n];return t}var GA=xf("animationend"),KA=xf("animationiteration"),QA=xf("animationstart"),YA=xf("transitionend"),JA=new Map,VI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ki(t,e){JA.set(t,e),co(e,[t])}for(var Am=0;Am<VI.length;Am++){var Rm=VI[Am],RV=Rm.toLowerCase(),PV=Rm[0].toUpperCase()+Rm.slice(1);Ki(RV,"on"+PV)}Ki(GA,"onAnimationEnd");Ki(KA,"onAnimationIteration");Ki(QA,"onAnimationStart");Ki("dblclick","onDoubleClick");Ki("focusin","onFocus");Ki("focusout","onBlur");Ki(YA,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));co("onBeforeInput",["compositionend","keypress","textInput","paste"]);co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yl));function LI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,RO(r,e,void 0,t),t.currentTarget=null}function XA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;LI(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;LI(i,a,u),s=l}}}if(Rd)throw t=bg,Rd=!1,bg=null,t}function Re(t,e){var n=e[$g];n===void 0&&(n=e[$g]=new Set);var r=t+"__bubble";n.has(r)||(ZA(e,t,2,!1),n.add(r))}function Pm(t,e,n){var r=0;e&&(r|=4),ZA(n,t,r,e)}var bh="_reactListening"+Math.random().toString(36).slice(2);function Ou(t){if(!t[bh]){t[bh]=!0,oA.forEach(function(n){n!=="selectionchange"&&(CV.has(n)||Pm(n,!1,t),Pm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[bh]||(e[bh]=!0,Pm("selectionchange",!1,e))}}function ZA(t,e,n,r){switch(LA(e)){case 1:var i=jO;break;case 4:i=zO;break;default:i=by}n=i.bind(null,e,n,t),i=void 0,!Cg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cm(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=bs(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}IA(function(){var u=s,c=Ay(n),d=[];e:{var f=JA.get(t);if(f!==void 0){var m=xy,w=t;switch(t){case"keypress":if(ed(n)===0)break e;case"keydown":case"keyup":m=iV;break;case"focusin":w="focus",m=Em;break;case"focusout":w="blur",m=Em;break;case"beforeblur":case"afterblur":m=Em;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=SI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=HO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=aV;break;case GA:case KA:case QA:m=QO;break;case YA:m=uV;break;case"scroll":m=qO;break;case"wheel":m=hV;break;case"copy":case"cut":case"paste":m=JO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=RI}var v=(e&4)!==0,I=!v&&t==="scroll",_=v?f!==null?f+"Capture":null:f;v=[];for(var g=u,y;g!==null;){y=g;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,_!==null&&(S=Cu(g,_),S!=null&&v.push(Vu(g,S,y)))),I)break;g=g.return}0<v.length&&(f=new m(f,w,null,n,c),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==Rg&&(w=n.relatedTarget||n.fromElement)&&(bs(w)||w[jr]))break e;if((m||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,m?(w=n.relatedTarget||n.toElement,m=u,w=w?bs(w):null,w!==null&&(I=ho(w),w!==I||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=u),m!==w)){if(v=SI,S="onMouseLeave",_="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=RI,S="onPointerLeave",_="onPointerEnter",g="pointer"),I=m==null?f:Yo(m),y=w==null?f:Yo(w),f=new v(S,g+"leave",m,n,c),f.target=I,f.relatedTarget=y,S=null,bs(c)===u&&(v=new v(_,g+"enter",w,n,c),v.target=y,v.relatedTarget=I,S=v),I=S,m&&w)t:{for(v=m,_=w,g=0,y=v;y;y=No(y))g++;for(y=0,S=_;S;S=No(S))y++;for(;0<g-y;)v=No(v),g--;for(;0<y-g;)_=No(_),y--;for(;g--;){if(v===_||_!==null&&v===_.alternate)break t;v=No(v),_=No(_)}v=null}else v=null;m!==null&&MI(d,f,m,v,!1),w!==null&&I!==null&&MI(d,I,w,v,!0)}}e:{if(f=u?Yo(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var A=yV;else if(bI(f))if(jA)A=IV;else{A=wV;var R=vV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(A=EV);if(A&&(A=A(t,u))){BA(d,A,n,c);break e}R&&R(t,f,u),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&Eg(f,"number",f.value)}switch(R=u?Yo(u):window,t){case"focusin":(bI(R)||R.contentEditable==="true")&&(Ko=R,Dg=u,uu=null);break;case"focusout":uu=Dg=Ko=null;break;case"mousedown":Og=!0;break;case"contextmenu":case"mouseup":case"dragend":Og=!1,OI(d,n,c);break;case"selectionchange":if(AV)break;case"keydown":case"keyup":OI(d,n,c)}var k;if(Dy)e:{switch(t){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else Go?$A(t,n)&&($="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&($="onCompositionStart");$&&(FA&&n.locale!=="ko"&&(Go||$!=="onCompositionStart"?$==="onCompositionEnd"&&Go&&(k=MA()):(gi=c,ky="value"in gi?gi.value:gi.textContent,Go=!0)),R=xd(u,$),0<R.length&&($=new AI($,t,null,n,c),d.push({event:$,listeners:R}),k?$.data=k:(k=UA(n),k!==null&&($.data=k)))),(k=fV?pV(t,n):mV(t,n))&&(u=xd(u,"onBeforeInput"),0<u.length&&(c=new AI("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=k))}XA(d,e)})}function Vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cu(t,n),s!=null&&r.unshift(Vu(t,s,i)),s=Cu(t,e),s!=null&&r.push(Vu(t,s,i))),t=t.return}return r}function No(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function MI(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Cu(n,s),l!=null&&o.unshift(Vu(n,l,a))):i||(l=Cu(n,s),l!=null&&o.push(Vu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bV=/\r\n?/g,kV=/\u0000|\uFFFD/g;function FI(t){return(typeof t=="string"?t:""+t).replace(bV,`
`).replace(kV,"")}function kh(t,e,n){if(e=FI(e),FI(t)!==e&&n)throw Error(M(425))}function Nd(){}var Vg=null,Lg=null;function Mg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fg=typeof setTimeout=="function"?setTimeout:void 0,xV=typeof clearTimeout=="function"?clearTimeout:void 0,$I=typeof Promise=="function"?Promise:void 0,NV=typeof queueMicrotask=="function"?queueMicrotask:typeof $I<"u"?function(t){return $I.resolve(null).then(t).catch(DV)}:Fg;function DV(t){setTimeout(function(){throw t})}function bm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xu(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function UI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),nr="__reactFiber$"+Xa,Lu="__reactProps$"+Xa,jr="__reactContainer$"+Xa,$g="__reactEvents$"+Xa,OV="__reactListeners$"+Xa,VV="__reactHandles$"+Xa;function bs(t){var e=t[nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=UI(t);t!==null;){if(n=t[nr])return n;t=UI(t)}return e}t=n,n=t.parentNode}return null}function Rc(t){return t=t[nr]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(M(33))}function Nf(t){return t[Lu]||null}var Ug=[],Jo=-1;function Qi(t){return{current:t}}function be(t){0>Jo||(t.current=Ug[Jo],Ug[Jo]=null,Jo--)}function Se(t,e){Jo++,Ug[Jo]=t.current,t.current=e}var Oi={},Dt=Qi(Oi),on=Qi(!1),Ws=Oi;function wa(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function an(t){return t=t.childContextTypes,t!=null}function Dd(){be(on),be(Dt)}function BI(t,e,n){if(Dt.current!==Oi)throw Error(M(168));Se(Dt,e),Se(on,n)}function e1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(M(108,vO(t)||"Unknown",i));return Ue({},n,r)}function Od(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,Ws=Dt.current,Se(Dt,t),Se(on,on.current),!0}function jI(t,e,n){var r=t.stateNode;if(!r)throw Error(M(169));n?(t=e1(t,e,Ws),r.__reactInternalMemoizedMergedChildContext=t,be(on),be(Dt),Se(Dt,t)):be(on),Se(on,n)}var br=null,Df=!1,km=!1;function t1(t){br===null?br=[t]:br.push(t)}function LV(t){Df=!0,t1(t)}function Yi(){if(!km&&br!==null){km=!0;var t=0,e=Ee;try{var n=br;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Df=!1}catch(i){throw br!==null&&(br=br.slice(t+1)),RA(Ry,Yi),i}finally{Ee=e,km=!1}}return null}var Xo=[],Zo=0,Vd=null,Ld=0,An=[],Rn=0,Hs=null,kr=1,xr="";function ws(t,e){Xo[Zo++]=Ld,Xo[Zo++]=Vd,Vd=t,Ld=e}function n1(t,e,n){An[Rn++]=kr,An[Rn++]=xr,An[Rn++]=Hs,Hs=t;var r=kr;t=xr;var i=32-Hn(r)-1;r&=~(1<<i),n+=1;var s=32-Hn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,kr=1<<32-Hn(e)+i|n<<i|r,xr=s+t}else kr=1<<s|n<<i|r,xr=t}function Vy(t){t.return!==null&&(ws(t,1),n1(t,1,0))}function Ly(t){for(;t===Vd;)Vd=Xo[--Zo],Xo[Zo]=null,Ld=Xo[--Zo],Xo[Zo]=null;for(;t===Hs;)Hs=An[--Rn],An[Rn]=null,xr=An[--Rn],An[Rn]=null,kr=An[--Rn],An[Rn]=null}var pn=null,dn=null,ke=!1,zn=null;function r1(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,dn=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,dn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Hs!==null?{id:kr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,dn=null,!0):!1;default:return!1}}function Bg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function jg(t){if(ke){var e=dn;if(e){var n=e;if(!zI(t,e)){if(Bg(t))throw Error(M(418));e=Si(n.nextSibling);var r=pn;e&&zI(t,e)?r1(r,n):(t.flags=t.flags&-4097|2,ke=!1,pn=t)}}else{if(Bg(t))throw Error(M(418));t.flags=t.flags&-4097|2,ke=!1,pn=t}}}function qI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function xh(t){if(t!==pn)return!1;if(!ke)return qI(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mg(t.type,t.memoizedProps)),e&&(e=dn)){if(Bg(t))throw i1(),Error(M(418));for(;e;)r1(t,e),e=Si(e.nextSibling)}if(qI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(M(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dn=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dn=null}}else dn=pn?Si(t.stateNode.nextSibling):null;return!0}function i1(){for(var t=dn;t;)t=Si(t.nextSibling)}function Ea(){dn=pn=null,ke=!1}function My(t){zn===null?zn=[t]:zn.push(t)}var MV=Yr.ReactCurrentBatchConfig;function Bn(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Md=Qi(null),Fd=null,ea=null,Fy=null;function $y(){Fy=ea=Fd=null}function Uy(t){var e=Md.current;be(Md),t._currentValue=e}function zg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ca(t,e){Fd=t,Fy=ea=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(Fy!==t)if(t={context:t,memoizedValue:e,next:null},ea===null){if(Fd===null)throw Error(M(308));ea=t,Fd.dependencies={lanes:0,firstContext:t}}else ea=ea.next=t;return e}var ks=null;function By(t){ks===null?ks=[t]:ks.push(t)}function s1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,By(e)):(n.next=i.next,i.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var hi=!1;function jy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function o1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ai(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(t,n)}return i=r.interleaved,i===null?(e.next=e,By(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(t,n)}function td(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Py(t,n)}}function WI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $d(t,e,n,r){var i=t.updateQueue;hi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,v=a;switch(f=e,m=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){d=w.call(m,d,f);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,f=typeof w=="function"?w.call(m,d,f):w,f==null)break e;d=Ue({},d,f);break e;case 2:hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=d):c=c.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ks|=o,t.lanes=o,t.memoizedState=d}}function HI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(M(191,i));i.call(r)}}}var a1=new sA.Component().refs;function qg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Of={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Pi(t),s=Mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),td(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=jt(),i=Pi(t),s=Mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ai(t,s,i),e!==null&&(Gn(e,t,i,r),td(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),r=Pi(t),i=Mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ai(t,i,r),e!==null&&(Gn(e,t,r,n),td(e,t,r))}};function GI(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Du(n,r)||!Du(i,s):!0}function l1(t,e,n){var r=!1,i=Oi,s=e.contextType;return typeof s=="object"&&s!==null?s=Dn(s):(i=an(e)?Ws:Dt.current,r=e.contextTypes,s=(r=r!=null)?wa(t,i):Oi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Of,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function KI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Of.enqueueReplaceState(e,e.state,null)}function Wg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=a1,jy(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Dn(s):(s=an(e)?Ws:Dt.current,i.context=wa(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(qg(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Of.enqueueReplaceState(i,i.state,null),$d(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===a1&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,t))}return t}function Nh(t,e){throw t=Object.prototype.toString.call(e),Error(M(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function QI(t){var e=t._init;return e(t._payload)}function u1(t){function e(_,g){if(t){var y=_.deletions;y===null?(_.deletions=[g],_.flags|=16):y.push(g)}}function n(_,g){if(!t)return null;for(;g!==null;)e(_,g),g=g.sibling;return null}function r(_,g){for(_=new Map;g!==null;)g.key!==null?_.set(g.key,g):_.set(g.index,g),g=g.sibling;return _}function i(_,g){return _=Ci(_,g),_.index=0,_.sibling=null,_}function s(_,g,y){return _.index=y,t?(y=_.alternate,y!==null?(y=y.index,y<g?(_.flags|=2,g):y):(_.flags|=2,g)):(_.flags|=1048576,g)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,g,y,S){return g===null||g.tag!==6?(g=Mm(y,_.mode,S),g.return=_,g):(g=i(g,y),g.return=_,g)}function l(_,g,y,S){var A=y.type;return A===Ho?c(_,g,y.props.children,S,y.key):g!==null&&(g.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ci&&QI(A)===g.type)?(S=i(g,y.props),S.ref=Dl(_,g,y),S.return=_,S):(S=ad(y.type,y.key,y.props,null,_.mode,S),S.ref=Dl(_,g,y),S.return=_,S)}function u(_,g,y,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Fm(y,_.mode,S),g.return=_,g):(g=i(g,y.children||[]),g.return=_,g)}function c(_,g,y,S,A){return g===null||g.tag!==7?(g=$s(y,_.mode,S,A),g.return=_,g):(g=i(g,y),g.return=_,g)}function d(_,g,y){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Mm(""+g,_.mode,y),g.return=_,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Eh:return y=ad(g.type,g.key,g.props,null,_.mode,y),y.ref=Dl(_,null,g),y.return=_,y;case Wo:return g=Fm(g,_.mode,y),g.return=_,g;case ci:var S=g._init;return d(_,S(g._payload),y)}if(Kl(g)||Cl(g))return g=$s(g,_.mode,y,null),g.return=_,g;Nh(_,g)}return null}function f(_,g,y,S){var A=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return A!==null?null:a(_,g,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Eh:return y.key===A?l(_,g,y,S):null;case Wo:return y.key===A?u(_,g,y,S):null;case ci:return A=y._init,f(_,g,A(y._payload),S)}if(Kl(y)||Cl(y))return A!==null?null:c(_,g,y,S,null);Nh(_,y)}return null}function m(_,g,y,S,A){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(y)||null,a(g,_,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Eh:return _=_.get(S.key===null?y:S.key)||null,l(g,_,S,A);case Wo:return _=_.get(S.key===null?y:S.key)||null,u(g,_,S,A);case ci:var R=S._init;return m(_,g,y,R(S._payload),A)}if(Kl(S)||Cl(S))return _=_.get(y)||null,c(g,_,S,A,null);Nh(g,S)}return null}function w(_,g,y,S){for(var A=null,R=null,k=g,$=g=0,Q=null;k!==null&&$<y.length;$++){k.index>$?(Q=k,k=null):Q=k.sibling;var W=f(_,k,y[$],S);if(W===null){k===null&&(k=Q);break}t&&k&&W.alternate===null&&e(_,k),g=s(W,g,$),R===null?A=W:R.sibling=W,R=W,k=Q}if($===y.length)return n(_,k),ke&&ws(_,$),A;if(k===null){for(;$<y.length;$++)k=d(_,y[$],S),k!==null&&(g=s(k,g,$),R===null?A=k:R.sibling=k,R=k);return ke&&ws(_,$),A}for(k=r(_,k);$<y.length;$++)Q=m(k,_,$,y[$],S),Q!==null&&(t&&Q.alternate!==null&&k.delete(Q.key===null?$:Q.key),g=s(Q,g,$),R===null?A=Q:R.sibling=Q,R=Q);return t&&k.forEach(function(ie){return e(_,ie)}),ke&&ws(_,$),A}function v(_,g,y,S){var A=Cl(y);if(typeof A!="function")throw Error(M(150));if(y=A.call(y),y==null)throw Error(M(151));for(var R=A=null,k=g,$=g=0,Q=null,W=y.next();k!==null&&!W.done;$++,W=y.next()){k.index>$?(Q=k,k=null):Q=k.sibling;var ie=f(_,k,W.value,S);if(ie===null){k===null&&(k=Q);break}t&&k&&ie.alternate===null&&e(_,k),g=s(ie,g,$),R===null?A=ie:R.sibling=ie,R=ie,k=Q}if(W.done)return n(_,k),ke&&ws(_,$),A;if(k===null){for(;!W.done;$++,W=y.next())W=d(_,W.value,S),W!==null&&(g=s(W,g,$),R===null?A=W:R.sibling=W,R=W);return ke&&ws(_,$),A}for(k=r(_,k);!W.done;$++,W=y.next())W=m(k,_,$,W.value,S),W!==null&&(t&&W.alternate!==null&&k.delete(W.key===null?$:W.key),g=s(W,g,$),R===null?A=W:R.sibling=W,R=W);return t&&k.forEach(function(Oe){return e(_,Oe)}),ke&&ws(_,$),A}function I(_,g,y,S){if(typeof y=="object"&&y!==null&&y.type===Ho&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Eh:e:{for(var A=y.key,R=g;R!==null;){if(R.key===A){if(A=y.type,A===Ho){if(R.tag===7){n(_,R.sibling),g=i(R,y.props.children),g.return=_,_=g;break e}}else if(R.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===ci&&QI(A)===R.type){n(_,R.sibling),g=i(R,y.props),g.ref=Dl(_,R,y),g.return=_,_=g;break e}n(_,R);break}else e(_,R);R=R.sibling}y.type===Ho?(g=$s(y.props.children,_.mode,S,y.key),g.return=_,_=g):(S=ad(y.type,y.key,y.props,null,_.mode,S),S.ref=Dl(_,g,y),S.return=_,_=S)}return o(_);case Wo:e:{for(R=y.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(_,g.sibling),g=i(g,y.children||[]),g.return=_,_=g;break e}else{n(_,g);break}else e(_,g);g=g.sibling}g=Fm(y,_.mode,S),g.return=_,_=g}return o(_);case ci:return R=y._init,I(_,g,R(y._payload),S)}if(Kl(y))return w(_,g,y,S);if(Cl(y))return v(_,g,y,S);Nh(_,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,g!==null&&g.tag===6?(n(_,g.sibling),g=i(g,y),g.return=_,_=g):(n(_,g),g=Mm(y,_.mode,S),g.return=_,_=g),o(_)):n(_,g)}return I}var Ia=u1(!0),c1=u1(!1),Pc={},pr=Qi(Pc),Mu=Qi(Pc),Fu=Qi(Pc);function xs(t){if(t===Pc)throw Error(M(174));return t}function zy(t,e){switch(Se(Fu,e),Se(Mu,t),Se(pr,Pc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tg(e,t)}be(pr),Se(pr,e)}function Ta(){be(pr),be(Mu),be(Fu)}function h1(t){xs(Fu.current);var e=xs(pr.current),n=Tg(e,t.type);e!==n&&(Se(Mu,t),Se(pr,n))}function qy(t){Mu.current===t&&(be(pr),be(Mu))}var Me=Qi(0);function Ud(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var xm=[];function Wy(){for(var t=0;t<xm.length;t++)xm[t]._workInProgressVersionPrimary=null;xm.length=0}var nd=Yr.ReactCurrentDispatcher,Nm=Yr.ReactCurrentBatchConfig,Gs=0,Fe=null,st=null,ut=null,Bd=!1,cu=!1,$u=0,FV=0;function Pt(){throw Error(M(321))}function Hy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Gy(t,e,n,r,i,s){if(Gs=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nd.current=t===null||t.memoizedState===null?jV:zV,t=n(r,i),cu){s=0;do{if(cu=!1,$u=0,25<=s)throw Error(M(301));s+=1,ut=st=null,e.updateQueue=null,nd.current=qV,t=n(r,i)}while(cu)}if(nd.current=jd,e=st!==null&&st.next!==null,Gs=0,ut=st=Fe=null,Bd=!1,e)throw Error(M(300));return t}function Ky(){var t=$u!==0;return $u=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Fe.memoizedState=ut=t:ut=ut.next=t,ut}function On(){if(st===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ut===null?Fe.memoizedState:ut.next;if(e!==null)ut=e,st=t;else{if(t===null)throw Error(M(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ut===null?Fe.memoizedState=ut=t:ut=ut.next=t}return ut}function Uu(t,e){return typeof e=="function"?e(t):e}function Dm(t){var e=On(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=st,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Gs&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Fe.lanes|=c,Ks|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Qn(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Fe.lanes|=s,Ks|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Om(t){var e=On(),n=e.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Qn(s,e.memoizedState)||(tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function d1(){}function f1(t,e){var n=Fe,r=On(),i=e(),s=!Qn(r.memoizedState,i);if(s&&(r.memoizedState=i,tn=!0),r=r.queue,Qy(g1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,Bu(9,m1.bind(null,n,r,i,e),void 0,null),ht===null)throw Error(M(349));Gs&30||p1(n,e,i)}return i}function p1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function m1(t,e,n,r){e.value=n,e.getSnapshot=r,_1(e)&&y1(t)}function g1(t,e,n){return n(function(){_1(e)&&y1(t)})}function _1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function y1(t){var e=zr(t,1);e!==null&&Gn(e,t,1,-1)}function YI(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:t},e.queue=t,t=t.dispatch=BV.bind(null,Fe,t),[e.memoizedState,t]}function Bu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function v1(){return On().memoizedState}function rd(t,e,n,r){var i=er();Fe.flags|=t,i.memoizedState=Bu(1|e,n,void 0,r===void 0?null:r)}function Vf(t,e,n,r){var i=On();r=r===void 0?null:r;var s=void 0;if(st!==null){var o=st.memoizedState;if(s=o.destroy,r!==null&&Hy(r,o.deps)){i.memoizedState=Bu(e,n,s,r);return}}Fe.flags|=t,i.memoizedState=Bu(1|e,n,s,r)}function JI(t,e){return rd(8390656,8,t,e)}function Qy(t,e){return Vf(2048,8,t,e)}function w1(t,e){return Vf(4,2,t,e)}function E1(t,e){return Vf(4,4,t,e)}function I1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T1(t,e,n){return n=n!=null?n.concat([t]):null,Vf(4,4,I1.bind(null,e,t),n)}function Yy(){}function S1(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function A1(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function R1(t,e,n){return Gs&21?(Qn(n,e)||(n=bA(),Fe.lanes|=n,Ks|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function $V(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=Nm.transition;Nm.transition={};try{t(!1),e()}finally{Ee=n,Nm.transition=r}}function P1(){return On().memoizedState}function UV(t,e,n){var r=Pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},C1(t))b1(e,n);else if(n=s1(t,e,n,r),n!==null){var i=jt();Gn(n,t,r,i),k1(n,e,r)}}function BV(t,e,n){var r=Pi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(C1(t))b1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o)){var l=e.interleaved;l===null?(i.next=i,By(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=s1(t,e,i,r),n!==null&&(i=jt(),Gn(n,t,r,i),k1(n,e,r))}}function C1(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function b1(t,e){cu=Bd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Py(t,n)}}var jd={readContext:Dn,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},jV={readContext:Dn,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:JI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rd(4194308,4,I1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rd(4194308,4,t,e)},useInsertionEffect:function(t,e){return rd(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=UV.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:YI,useDebugValue:Yy,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=YI(!1),e=t[0];return t=$V.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,i=er();if(ke){if(n===void 0)throw Error(M(407));n=n()}else{if(n=e(),ht===null)throw Error(M(349));Gs&30||p1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,JI(g1.bind(null,r,s,t),[t]),r.flags|=2048,Bu(9,m1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=er(),e=ht.identifierPrefix;if(ke){var n=xr,r=kr;n=(r&~(1<<32-Hn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$u++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=FV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zV={readContext:Dn,useCallback:S1,useContext:Dn,useEffect:Qy,useImperativeHandle:T1,useInsertionEffect:w1,useLayoutEffect:E1,useMemo:A1,useReducer:Dm,useRef:v1,useState:function(){return Dm(Uu)},useDebugValue:Yy,useDeferredValue:function(t){var e=On();return R1(e,st.memoizedState,t)},useTransition:function(){var t=Dm(Uu)[0],e=On().memoizedState;return[t,e]},useMutableSource:d1,useSyncExternalStore:f1,useId:P1,unstable_isNewReconciler:!1},qV={readContext:Dn,useCallback:S1,useContext:Dn,useEffect:Qy,useImperativeHandle:T1,useInsertionEffect:w1,useLayoutEffect:E1,useMemo:A1,useReducer:Om,useRef:v1,useState:function(){return Om(Uu)},useDebugValue:Yy,useDeferredValue:function(t){var e=On();return st===null?e.memoizedState=t:R1(e,st.memoizedState,t)},useTransition:function(){var t=Om(Uu)[0],e=On().memoizedState;return[t,e]},useMutableSource:d1,useSyncExternalStore:f1,useId:P1,unstable_isNewReconciler:!1};function Sa(t,e){try{var n="",r=e;do n+=yO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WV=typeof WeakMap=="function"?WeakMap:Map;function x1(t,e,n){n=Mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qd||(qd=!0,n_=r),Hg(t,e)},n}function N1(t,e,n){n=Mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Hg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hg(t,e),typeof r!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function XI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=sL.bind(null,t,e,n),e.then(t,t))}function ZI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function eT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mr(-1,1),e.tag=2,Ai(n,e,1))),n.lanes|=1),t)}var HV=Yr.ReactCurrentOwner,tn=!1;function Ft(t,e,n,r){e.child=t===null?c1(e,null,n,r):Ia(e,t.child,n,r)}function tT(t,e,n,r,i){n=n.render;var s=e.ref;return ca(e,i),r=Gy(t,e,n,r,s,i),n=Ky(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qr(t,e,i)):(ke&&n&&Vy(e),e.flags|=1,Ft(t,e,r,i),e.child)}function nT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!iv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,D1(t,e,s,r,i)):(t=ad(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Du,n(o,r)&&t.ref===e.ref)return qr(t,e,i)}return e.flags|=1,t=Ci(s,r),t.ref=e.ref,t.return=e,e.child=t}function D1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Du(s,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,qr(t,e,i)}return Gg(t,e,n,r,i)}function O1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(na,cn),cn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(na,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Se(na,cn),cn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Se(na,cn),cn|=r;return Ft(t,e,i,n),e.child}function V1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gg(t,e,n,r,i){var s=an(n)?Ws:Dt.current;return s=wa(e,s),ca(e,i),n=Gy(t,e,n,r,s,i),r=Ky(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,qr(t,e,i)):(ke&&r&&Vy(e),e.flags|=1,Ft(t,e,n,i),e.child)}function rT(t,e,n,r,i){if(an(n)){var s=!0;Od(e)}else s=!1;if(ca(e,i),e.stateNode===null)id(t,e),l1(e,n,r),Wg(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dn(u):(u=an(n)?Ws:Dt.current,u=wa(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&KI(e,o,r,u),hi=!1;var f=e.memoizedState;o.state=f,$d(e,r,o,i),l=e.memoizedState,a!==r||f!==l||on.current||hi?(typeof c=="function"&&(qg(e,n,c,r),l=e.memoizedState),(a=hi||GI(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,o1(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Bn(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Dn(l):(l=an(n)?Ws:Dt.current,l=wa(e,l));var m=n.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&KI(e,o,r,l),hi=!1,f=e.memoizedState,o.state=f,$d(e,r,o,i);var w=e.memoizedState;a!==d||f!==w||on.current||hi?(typeof m=="function"&&(qg(e,n,m,r),w=e.memoizedState),(u=hi||GI(e,n,u,r,f,w,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Kg(t,e,n,r,s,i)}function Kg(t,e,n,r,i,s){V1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jI(e,n,!1),qr(t,e,s);r=e.stateNode,HV.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ia(e,t.child,null,s),e.child=Ia(e,null,a,s)):Ft(t,e,a,s),e.memoizedState=r.state,i&&jI(e,n,!0),e.child}function L1(t){var e=t.stateNode;e.pendingContext?BI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&BI(t,e.context,!1),zy(t,e.containerInfo)}function iT(t,e,n,r,i){return Ea(),My(i),e.flags|=256,Ft(t,e,n,r),e.child}var Qg={dehydrated:null,treeContext:null,retryLane:0};function Yg(t){return{baseLanes:t,cachePool:null,transitions:null}}function M1(t,e,n){var r=e.pendingProps,i=Me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(Me,i&1),t===null)return jg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ff(o,r,0,null),t=$s(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Yg(n),e.memoizedState=Qg,t):Jy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return GV(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ci(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ci(a,s):(s=$s(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Yg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Qg,r}return s=t.child,t=s.sibling,r=Ci(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Jy(t,e){return e=Ff({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dh(t,e,n,r){return r!==null&&My(r),Ia(e,t.child,null,n),t=Jy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GV(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vm(Error(M(422))),Dh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ff({mode:"visible",children:r.children},i,0,null),s=$s(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ia(e,t.child,null,o),e.child.memoizedState=Yg(o),e.memoizedState=Qg,s);if(!(e.mode&1))return Dh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(M(419)),r=Vm(s,r,void 0),Dh(t,e,o,r)}if(a=(o&t.childLanes)!==0,tn||a){if(r=ht,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,zr(t,i),Gn(r,t,i,-1))}return rv(),r=Vm(Error(M(421))),Dh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=oL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,dn=Si(i.nextSibling),pn=e,ke=!0,zn=null,t!==null&&(An[Rn++]=kr,An[Rn++]=xr,An[Rn++]=Hs,kr=t.id,xr=t.overflow,Hs=e),e=Jy(e,r.children),e.flags|=4096,e)}function sT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),zg(t.return,e,n)}function Lm(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function F1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ft(t,e,r.children,n),r=Me.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sT(t,n,e);else if(t.tag===19)sT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(Me,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ud(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Lm(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ud(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Lm(e,!0,n,null,s);break;case"together":Lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ks|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(M(153));if(e.child!==null){for(t=e.child,n=Ci(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ci(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KV(t,e,n){switch(e.tag){case 3:L1(e),Ea();break;case 5:h1(e);break;case 1:an(e.type)&&Od(e);break;case 4:zy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Md,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(Me,Me.current&1),e.flags|=128,null):n&e.child.childLanes?M1(t,e,n):(Se(Me,Me.current&1),t=qr(t,e,n),t!==null?t.sibling:null);Se(Me,Me.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return F1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(Me,Me.current),r)break;return null;case 22:case 23:return e.lanes=0,O1(t,e,n)}return qr(t,e,n)}var $1,Jg,U1,B1;$1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jg=function(){};U1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,xs(pr.current);var s=null;switch(n){case"input":i=vg(t,i),r=vg(t,r),s=[];break;case"select":i=Ue({},i,{value:void 0}),r=Ue({},r,{value:void 0}),s=[];break;case"textarea":i=Ig(t,i),r=Ig(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Nd)}Sg(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ru.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ru.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Re("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};B1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ol(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QV(t,e,n){var r=e.pendingProps;switch(Ly(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return an(e.type)&&Dd(),Ct(e),null;case 3:return r=e.stateNode,Ta(),be(on),be(Dt),Wy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(xh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zn!==null&&(s_(zn),zn=null))),Jg(t,e),Ct(e),null;case 5:qy(e);var i=xs(Fu.current);if(n=e.type,t!==null&&e.stateNode!=null)U1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return Ct(e),null}if(t=xs(pr.current),xh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[nr]=e,r[Lu]=s,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<Yl.length;i++)Re(Yl[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":pI(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":gI(r,s),Re("invalid",r)}Sg(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&kh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kh(r.textContent,a,t),i=["children",""+a]):Ru.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Ih(r),mI(r,s,!0);break;case"textarea":Ih(r),_I(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Nd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[nr]=e,t[Lu]=r,$1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ag(n,r),n){case"dialog":Re("cancel",t),Re("close",t),i=r;break;case"iframe":case"object":case"embed":Re("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yl.length;i++)Re(Yl[i],t);i=r;break;case"source":Re("error",t),i=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),i=r;break;case"details":Re("toggle",t),i=r;break;case"input":pI(t,r),i=vg(t,r),Re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ue({},r,{value:void 0}),Re("invalid",t);break;case"textarea":gI(t,r),i=Ig(t,r),Re("invalid",t);break;default:i=r}Sg(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?_A(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mA(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pu(t,l):typeof l=="number"&&Pu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ru.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Re("scroll",t):l!=null&&Ey(t,s,l,o))}switch(n){case"input":Ih(t),mI(t,r,!1);break;case"textarea":Ih(t),_I(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Di(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?oa(t,!!r.multiple,s,!1):r.defaultValue!=null&&oa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Nd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)B1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(n=xs(Fu.current),xs(pr.current),xh(e)){if(r=e.stateNode,n=e.memoizedProps,r[nr]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:kh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[nr]=e,e.stateNode=r}return Ct(e),null;case 13:if(be(Me),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&dn!==null&&e.mode&1&&!(e.flags&128))i1(),Ea(),e.flags|=98560,s=!1;else if(s=xh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(M(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(M(317));s[nr]=e}else Ea(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),s=!1}else zn!==null&&(s_(zn),zn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Me.current&1?ot===0&&(ot=3):rv())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Ta(),Jg(t,e),t===null&&Ou(e.stateNode.containerInfo),Ct(e),null;case 10:return Uy(e.type._context),Ct(e),null;case 17:return an(e.type)&&Dd(),Ct(e),null;case 19:if(be(Me),s=e.memoizedState,s===null)return Ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Ol(s,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ud(t),o!==null){for(e.flags|=128,Ol(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(Me,Me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ze()>Aa&&(e.flags|=128,r=!0,Ol(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ud(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ol(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ke)return Ct(e),null}else 2*Ze()-s.renderingStartTime>Aa&&n!==1073741824&&(e.flags|=128,r=!0,Ol(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ze(),e.sibling=null,n=Me.current,Se(Me,r?n&1|2:n&1),e):(Ct(e),null);case 22:case 23:return nv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cn&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function YV(t,e){switch(Ly(e),e.tag){case 1:return an(e.type)&&Dd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ta(),be(on),be(Dt),Wy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qy(e),null;case 13:if(be(Me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(M(340));Ea()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Me),null;case 4:return Ta(),null;case 10:return Uy(e.type._context),null;case 22:case 23:return nv(),null;case 24:return null;default:return null}}var Oh=!1,kt=!1,JV=typeof WeakSet=="function"?WeakSet:Set,G=null;function ta(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function Xg(t,e,n){try{n()}catch(r){ze(t,e,r)}}var oT=!1;function XV(t,e){if(Vg=bd,t=WA(),Oy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lg={focusedElem:t,selectionRange:n},bd=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,I=w.memoizedState,_=e.stateNode,g=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:Bn(e.type,v),I);_.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(S){ze(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return w=oT,oT=!1,w}function hu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Xg(e,n,s)}i=i.next}while(i!==r)}}function Lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function j1(t){var e=t.alternate;e!==null&&(t.alternate=null,j1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[nr],delete e[Lu],delete e[$g],delete e[OV],delete e[VV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z1(t){return t.tag===5||t.tag===3||t.tag===4}function aT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function e_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nd));else if(r!==4&&(t=t.child,t!==null))for(e_(t,e,n),t=t.sibling;t!==null;)e_(t,e,n),t=t.sibling}function t_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(t_(t,e,n),t=t.sibling;t!==null;)t_(t,e,n),t=t.sibling}var vt=null,jn=!1;function si(t,e,n){for(n=n.child;n!==null;)q1(t,e,n),n=n.sibling}function q1(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Cf,n)}catch{}switch(n.tag){case 5:kt||ta(n,e);case 6:var r=vt,i=jn;vt=null,si(t,e,n),vt=r,jn=i,vt!==null&&(jn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(jn?(t=vt,n=n.stateNode,t.nodeType===8?bm(t.parentNode,n):t.nodeType===1&&bm(t,n),xu(t)):bm(vt,n.stateNode));break;case 4:r=vt,i=jn,vt=n.stateNode.containerInfo,jn=!0,si(t,e,n),vt=r,jn=i;break;case 0:case 11:case 14:case 15:if(!kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xg(n,e,o),i=i.next}while(i!==r)}si(t,e,n);break;case 1:if(!kt&&(ta(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ze(n,e,a)}si(t,e,n);break;case 21:si(t,e,n);break;case 22:n.mode&1?(kt=(r=kt)||n.memoizedState!==null,si(t,e,n),kt=r):si(t,e,n);break;default:si(t,e,n)}}function lT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JV),e.forEach(function(r){var i=aL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:vt=a.stateNode,jn=!1;break e;case 3:vt=a.stateNode.containerInfo,jn=!0;break e;case 4:vt=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(vt===null)throw Error(M(160));q1(s,o,i),vt=null,jn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ze(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)W1(e,t),e=e.sibling}function W1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Un(e,t),Zn(t),r&4){try{hu(3,t,t.return),Lf(3,t)}catch(v){ze(t,t.return,v)}try{hu(5,t,t.return)}catch(v){ze(t,t.return,v)}}break;case 1:Un(e,t),Zn(t),r&512&&n!==null&&ta(n,n.return);break;case 5:if(Un(e,t),Zn(t),r&512&&n!==null&&ta(n,n.return),t.flags&32){var i=t.stateNode;try{Pu(i,"")}catch(v){ze(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&dA(i,s),Ag(a,o);var u=Ag(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?_A(i,d):c==="dangerouslySetInnerHTML"?mA(i,d):c==="children"?Pu(i,d):Ey(i,c,d,u)}switch(a){case"input":wg(i,s);break;case"textarea":fA(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?oa(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?oa(i,!!s.multiple,s.defaultValue,!0):oa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Lu]=s}catch(v){ze(t,t.return,v)}}break;case 6:if(Un(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(M(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){ze(t,t.return,v)}}break;case 3:if(Un(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xu(e.containerInfo)}catch(v){ze(t,t.return,v)}break;case 4:Un(e,t),Zn(t);break;case 13:Un(e,t),Zn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ev=Ze())),r&4&&lT(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(kt=(u=kt)||c,Un(e,t),kt=u):Un(e,t),Zn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(G=t,c=t.child;c!==null;){for(d=G=c;G!==null;){switch(f=G,m=f.child,f.tag){case 0:case 11:case 14:case 15:hu(4,f,f.return);break;case 1:ta(f,f.return);var w=f.stateNode;if(typeof w.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){ze(r,n,v)}}break;case 5:ta(f,f.return);break;case 22:if(f.memoizedState!==null){cT(d);continue}}m!==null?(m.return=f,G=m):cT(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=gA("display",o))}catch(v){ze(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){ze(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Un(e,t),Zn(t),r&4&&lT(t);break;case 21:break;default:Un(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z1(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pu(i,""),r.flags&=-33);var s=aT(t);t_(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=aT(t);e_(t,a,o);break;default:throw Error(M(161))}}catch(l){ze(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZV(t,e,n){G=t,H1(t)}function H1(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Oh;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||kt;a=Oh;var u=kt;if(Oh=o,(kt=l)&&!u)for(G=i;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?hT(i):l!==null?(l.return=o,G=l):hT(i);for(;s!==null;)G=s,H1(s),s=s.sibling;G=i,Oh=a,kt=u}uT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):uT(t)}}function uT(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kt||Lf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Bn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&HI(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}HI(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&xu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}kt||e.flags&512&&Zg(e)}catch(f){ze(e,e.return,f)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function cT(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function hT(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Lf(4,e)}catch(l){ze(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ze(e,i,l)}}var s=e.return;try{Zg(e)}catch(l){ze(e,s,l)}break;case 5:var o=e.return;try{Zg(e)}catch(l){ze(e,o,l)}}}catch(l){ze(e,e.return,l)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var eL=Math.ceil,zd=Yr.ReactCurrentDispatcher,Xy=Yr.ReactCurrentOwner,kn=Yr.ReactCurrentBatchConfig,pe=0,ht=null,it=null,Tt=0,cn=0,na=Qi(0),ot=0,ju=null,Ks=0,Mf=0,Zy=0,du=null,en=null,ev=0,Aa=1/0,Cr=null,qd=!1,n_=null,Ri=null,Vh=!1,_i=null,Wd=0,fu=0,r_=null,sd=-1,od=0;function jt(){return pe&6?Ze():sd!==-1?sd:sd=Ze()}function Pi(t){return t.mode&1?pe&2&&Tt!==0?Tt&-Tt:MV.transition!==null?(od===0&&(od=bA()),od):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:LA(t.type)),t):1}function Gn(t,e,n,r){if(50<fu)throw fu=0,r_=null,Error(M(185));Sc(t,n,r),(!(pe&2)||t!==ht)&&(t===ht&&(!(pe&2)&&(Mf|=n),ot===4&&fi(t,Tt)),ln(t,r),n===1&&pe===0&&!(e.mode&1)&&(Aa=Ze()+500,Df&&Yi()))}function ln(t,e){var n=t.callbackNode;MO(t,e);var r=Cd(t,t===ht?Tt:0);if(r===0)n!==null&&wI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&wI(n),e===1)t.tag===0?LV(dT.bind(null,t)):t1(dT.bind(null,t)),NV(function(){!(pe&6)&&Yi()}),n=null;else{switch(kA(r)){case 1:n=Ry;break;case 4:n=PA;break;case 16:n=Pd;break;case 536870912:n=CA;break;default:n=Pd}n=eR(n,G1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function G1(t,e){if(sd=-1,od=0,pe&6)throw Error(M(327));var n=t.callbackNode;if(ha()&&t.callbackNode!==n)return null;var r=Cd(t,t===ht?Tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hd(t,r);else{e=r;var i=pe;pe|=2;var s=Q1();(ht!==t||Tt!==e)&&(Cr=null,Aa=Ze()+500,Fs(t,e));do try{rL();break}catch(a){K1(t,a)}while(!0);$y(),zd.current=s,pe=i,it!==null?e=0:(ht=null,Tt=0,e=ot)}if(e!==0){if(e===2&&(i=kg(t),i!==0&&(r=i,e=i_(t,i))),e===1)throw n=ju,Fs(t,0),fi(t,r),ln(t,Ze()),n;if(e===6)fi(t,r);else{if(i=t.current.alternate,!(r&30)&&!tL(i)&&(e=Hd(t,r),e===2&&(s=kg(t),s!==0&&(r=s,e=i_(t,s))),e===1))throw n=ju,Fs(t,0),fi(t,r),ln(t,Ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Es(t,en,Cr);break;case 3:if(fi(t,r),(r&130023424)===r&&(e=ev+500-Ze(),10<e)){if(Cd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){jt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fg(Es.bind(null,t,en,Cr),e);break}Es(t,en,Cr);break;case 4:if(fi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Hn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eL(r/1960))-r,10<r){t.timeoutHandle=Fg(Es.bind(null,t,en,Cr),r);break}Es(t,en,Cr);break;case 5:Es(t,en,Cr);break;default:throw Error(M(329))}}}return ln(t,Ze()),t.callbackNode===n?G1.bind(null,t):null}function i_(t,e){var n=du;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=Hd(t,e),t!==2&&(e=en,en=n,e!==null&&s_(e)),t}function s_(t){en===null?en=t:en.push.apply(en,t)}function tL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function fi(t,e){for(e&=~Zy,e&=~Mf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Hn(e),r=1<<n;t[n]=-1,e&=~r}}function dT(t){if(pe&6)throw Error(M(327));ha();var e=Cd(t,0);if(!(e&1))return ln(t,Ze()),null;var n=Hd(t,e);if(t.tag!==0&&n===2){var r=kg(t);r!==0&&(e=r,n=i_(t,r))}if(n===1)throw n=ju,Fs(t,0),fi(t,e),ln(t,Ze()),n;if(n===6)throw Error(M(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,en,Cr),ln(t,Ze()),null}function tv(t,e){var n=pe;pe|=1;try{return t(e)}finally{pe=n,pe===0&&(Aa=Ze()+500,Df&&Yi())}}function Qs(t){_i!==null&&_i.tag===0&&!(pe&6)&&ha();var e=pe;pe|=1;var n=kn.transition,r=Ee;try{if(kn.transition=null,Ee=1,t)return t()}finally{Ee=r,kn.transition=n,pe=e,!(pe&6)&&Yi()}}function nv(){cn=na.current,be(na)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xV(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Ly(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dd();break;case 3:Ta(),be(on),be(Dt),Wy();break;case 5:qy(r);break;case 4:Ta();break;case 13:be(Me);break;case 19:be(Me);break;case 10:Uy(r.type._context);break;case 22:case 23:nv()}n=n.return}if(ht=t,it=t=Ci(t.current,null),Tt=cn=e,ot=0,ju=null,Zy=Mf=Ks=0,en=du=null,ks!==null){for(e=0;e<ks.length;e++)if(n=ks[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return t}function K1(t,e){do{var n=it;try{if($y(),nd.current=jd,Bd){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bd=!1}if(Gs=0,ut=st=Fe=null,cu=!1,$u=0,Xy.current=null,n===null||n.return===null){ot=1,ju=e,it=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=ZI(o);if(m!==null){m.flags&=-257,eT(m,o,a,s,e),m.mode&1&&XI(s,u,e),e=m,l=u;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){XI(s,u,e),rv();break e}l=Error(M(426))}}else if(ke&&a.mode&1){var I=ZI(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),eT(I,o,a,s,e),My(Sa(l,a));break e}}s=l=Sa(l,a),ot!==4&&(ot=2),du===null?du=[s]:du.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=x1(s,l,e);WI(s,_);break e;case 1:a=l;var g=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Ri===null||!Ri.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=N1(s,a,e);WI(s,S);break e}}s=s.return}while(s!==null)}J1(n)}catch(A){e=A,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function Q1(){var t=zd.current;return zd.current=jd,t===null?jd:t}function rv(){(ot===0||ot===3||ot===2)&&(ot=4),ht===null||!(Ks&268435455)&&!(Mf&268435455)||fi(ht,Tt)}function Hd(t,e){var n=pe;pe|=2;var r=Q1();(ht!==t||Tt!==e)&&(Cr=null,Fs(t,e));do try{nL();break}catch(i){K1(t,i)}while(!0);if($y(),pe=n,zd.current=r,it!==null)throw Error(M(261));return ht=null,Tt=0,ot}function nL(){for(;it!==null;)Y1(it)}function rL(){for(;it!==null&&!CO();)Y1(it)}function Y1(t){var e=Z1(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?J1(t):it=e,Xy.current=null}function J1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YV(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,it=null;return}}else if(n=QV(n,e,cn),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ot===0&&(ot=5)}function Es(t,e,n){var r=Ee,i=kn.transition;try{kn.transition=null,Ee=1,iL(t,e,n,r)}finally{kn.transition=i,Ee=r}return null}function iL(t,e,n,r){do ha();while(_i!==null);if(pe&6)throw Error(M(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(M(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(FO(t,s),t===ht&&(it=ht=null,Tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vh||(Vh=!0,eR(Pd,function(){return ha(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=kn.transition,kn.transition=null;var o=Ee;Ee=1;var a=pe;pe|=4,Xy.current=null,XV(t,n),W1(n,t),SV(Lg),bd=!!Vg,Lg=Vg=null,t.current=n,ZV(n),bO(),pe=a,Ee=o,kn.transition=s}else t.current=n;if(Vh&&(Vh=!1,_i=t,Wd=i),s=t.pendingLanes,s===0&&(Ri=null),NO(n.stateNode),ln(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(qd)throw qd=!1,t=n_,n_=null,t;return Wd&1&&t.tag!==0&&ha(),s=t.pendingLanes,s&1?t===r_?fu++:(fu=0,r_=t):fu=0,Yi(),null}function ha(){if(_i!==null){var t=kA(Wd),e=kn.transition,n=Ee;try{if(kn.transition=null,Ee=16>t?16:t,_i===null)var r=!1;else{if(t=_i,_i=null,Wd=0,pe&6)throw Error(M(331));var i=pe;for(pe|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(G=u;G!==null;){var c=G;switch(c.tag){case 0:case 11:case 15:hu(8,c,s)}var d=c.child;if(d!==null)d.return=c,G=d;else for(;G!==null;){c=G;var f=c.sibling,m=c.return;if(j1(c),c===u){G=null;break}if(f!==null){f.return=m,G=f;break}G=m}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var I=v.sibling;v.sibling=null,v=I}while(v!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hu(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,G=_;break e}G=s.return}}var g=t.current;for(G=g;G!==null;){o=G;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,G=y;else e:for(o=g;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Lf(9,a)}}catch(A){ze(a,a.return,A)}if(a===o){G=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,G=S;break e}G=a.return}}if(pe=i,Yi(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Cf,t)}catch{}r=!0}return r}finally{Ee=n,kn.transition=e}}return!1}function fT(t,e,n){e=Sa(n,e),e=x1(t,e,1),t=Ai(t,e,1),e=jt(),t!==null&&(Sc(t,1,e),ln(t,e))}function ze(t,e,n){if(t.tag===3)fT(t,t,n);else for(;e!==null;){if(e.tag===3){fT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ri===null||!Ri.has(r))){t=Sa(n,t),t=N1(e,t,1),e=Ai(e,t,1),t=jt(),e!==null&&(Sc(e,1,t),ln(e,t));break}}e=e.return}}function sL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(Tt&n)===n&&(ot===4||ot===3&&(Tt&130023424)===Tt&&500>Ze()-ev?Fs(t,0):Zy|=n),ln(t,e)}function X1(t,e){e===0&&(t.mode&1?(e=Ah,Ah<<=1,!(Ah&130023424)&&(Ah=4194304)):e=1);var n=jt();t=zr(t,e),t!==null&&(Sc(t,e,n),ln(t,n))}function oL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),X1(t,n)}function aL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),X1(t,n)}var Z1;Z1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||on.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,KV(t,e,n);tn=!!(t.flags&131072)}else tn=!1,ke&&e.flags&1048576&&n1(e,Ld,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;id(t,e),t=e.pendingProps;var i=wa(e,Dt.current);ca(e,n),i=Gy(null,e,r,t,i,n);var s=Ky();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,an(r)?(s=!0,Od(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,jy(e),i.updater=Of,e.stateNode=i,i._reactInternals=e,Wg(e,r,t,n),e=Kg(null,e,r,!0,s,n)):(e.tag=0,ke&&s&&Vy(e),Ft(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(id(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=uL(r),t=Bn(r,t),i){case 0:e=Gg(null,e,r,t,n);break e;case 1:e=rT(null,e,r,t,n);break e;case 11:e=tT(null,e,r,t,n);break e;case 14:e=nT(null,e,r,Bn(r.type,t),n);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),Gg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),rT(t,e,r,i,n);case 3:e:{if(L1(e),t===null)throw Error(M(387));r=e.pendingProps,s=e.memoizedState,i=s.element,o1(t,e),$d(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sa(Error(M(423)),e),e=iT(t,e,r,n,i);break e}else if(r!==i){i=Sa(Error(M(424)),e),e=iT(t,e,r,n,i);break e}else for(dn=Si(e.stateNode.containerInfo.firstChild),pn=e,ke=!0,zn=null,n=c1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ea(),r===i){e=qr(t,e,n);break e}Ft(t,e,r,n)}e=e.child}return e;case 5:return h1(e),t===null&&jg(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Mg(r,i)?o=null:s!==null&&Mg(r,s)&&(e.flags|=32),V1(t,e),Ft(t,e,o,n),e.child;case 6:return t===null&&jg(e),null;case 13:return M1(t,e,n);case 4:return zy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ia(e,null,r,n):Ft(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),tT(t,e,r,i,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Se(Md,r._currentValue),r._currentValue=o,s!==null)if(Qn(s.value,o)){if(s.children===i.children&&!on.current){e=qr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Mr(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zg(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(M(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ft(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ca(e,n),i=Dn(i),r=r(i),e.flags|=1,Ft(t,e,r,n),e.child;case 14:return r=e.type,i=Bn(r,e.pendingProps),i=Bn(r.type,i),nT(t,e,r,i,n);case 15:return D1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Bn(r,i),id(t,e),e.tag=1,an(r)?(t=!0,Od(e)):t=!1,ca(e,n),l1(e,r,i),Wg(e,r,i,n),Kg(null,e,r,!0,t,n);case 19:return F1(t,e,n);case 22:return O1(t,e,n)}throw Error(M(156,e.tag))};function eR(t,e){return RA(t,e)}function lL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,r){return new lL(t,e,n,r)}function iv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uL(t){if(typeof t=="function")return iv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ty)return 11;if(t===Sy)return 14}return 2}function Ci(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ad(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")iv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ho:return $s(n.children,i,s,e);case Iy:o=8,i|=8;break;case mg:return t=Cn(12,n,e,i|2),t.elementType=mg,t.lanes=s,t;case gg:return t=Cn(13,n,e,i),t.elementType=gg,t.lanes=s,t;case _g:return t=Cn(19,n,e,i),t.elementType=_g,t.lanes=s,t;case uA:return Ff(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aA:o=10;break e;case lA:o=9;break e;case Ty:o=11;break e;case Sy:o=14;break e;case ci:o=16,r=null;break e}throw Error(M(130,t==null?t:typeof t,""))}return e=Cn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $s(t,e,n,r){return t=Cn(7,t,r,e),t.lanes=n,t}function Ff(t,e,n,r){return t=Cn(22,t,r,e),t.elementType=uA,t.lanes=n,t.stateNode={isHidden:!1},t}function Mm(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function Fm(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ym(0),this.expirationTimes=ym(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ym(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sv(t,e,n,r,i,s,o,a,l){return t=new cL(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Cn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jy(s),t}function hL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tR(t){if(!t)return Oi;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(M(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(an(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(t.tag===1){var n=t.type;if(an(n))return e1(t,n,e)}return e}function nR(t,e,n,r,i,s,o,a,l){return t=sv(n,r,!0,t,i,s,o,a,l),t.context=tR(null),n=t.current,r=jt(),i=Pi(n),s=Mr(r,i),s.callback=e??null,Ai(n,s,i),t.current.lanes=i,Sc(t,i,r),ln(t,r),t}function $f(t,e,n,r){var i=e.current,s=jt(),o=Pi(i);return n=tR(n),e.context===null?e.context=n:e.pendingContext=n,e=Mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ai(i,e,o),t!==null&&(Gn(t,i,o,s),td(t,i,o)),o}function Gd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ov(t,e){pT(t,e),(t=t.alternate)&&pT(t,e)}function dL(){return null}var rR=typeof reportError=="function"?reportError:function(t){console.error(t)};function av(t){this._internalRoot=t}Uf.prototype.render=av.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(M(409));$f(t,e,null,null)};Uf.prototype.unmount=av.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qs(function(){$f(null,t,null,null)}),e[jr]=null}};function Uf(t){this._internalRoot=t}Uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=DA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<di.length&&e!==0&&e<di[n].priority;n++);di.splice(n,0,t),n===0&&VA(t)}};function lv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mT(){}function fL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Gd(o);s.call(u)}}var o=nR(e,r,t,0,null,!1,!1,"",mT);return t._reactRootContainer=o,t[jr]=o.current,Ou(t.nodeType===8?t.parentNode:t),Qs(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Gd(l);a.call(u)}}var l=sv(t,0,!1,null,null,!1,!1,"",mT);return t._reactRootContainer=l,t[jr]=l.current,Ou(t.nodeType===8?t.parentNode:t),Qs(function(){$f(e,l,n,r)}),l}function jf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Gd(o);a.call(l)}}$f(e,o,t,i)}else o=fL(n,e,t,i,r);return Gd(o)}xA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(Py(e,n|1),ln(e,Ze()),!(pe&6)&&(Aa=Ze()+500,Yi()))}break;case 13:Qs(function(){var r=zr(t,1);if(r!==null){var i=jt();Gn(r,t,1,i)}}),ov(t,1)}};Cy=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=jt();Gn(e,t,134217728,n)}ov(t,134217728)}};NA=function(t){if(t.tag===13){var e=Pi(t),n=zr(t,e);if(n!==null){var r=jt();Gn(n,t,e,r)}ov(t,e)}};DA=function(){return Ee};OA=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Pg=function(t,e,n){switch(e){case"input":if(wg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nf(r);if(!i)throw Error(M(90));hA(r),wg(r,i)}}}break;case"textarea":fA(t,n);break;case"select":e=n.value,e!=null&&oa(t,!!n.multiple,e,!1)}};wA=tv;EA=Qs;var pL={usingClientEntryPoint:!1,Events:[Rc,Yo,Nf,yA,vA,tv]},Vl={findFiberByHostInstance:bs,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},mL={bundleType:Vl.bundleType,version:Vl.version,rendererPackageName:Vl.rendererPackageName,rendererConfig:Vl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=SA(t),t===null?null:t.stateNode},findFiberByHostInstance:Vl.findFiberByHostInstance||dL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lh.isDisabled&&Lh.supportsFiber)try{Cf=Lh.inject(mL),fr=Lh}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pL;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lv(e))throw Error(M(200));return hL(t,e,null,n)};En.createRoot=function(t,e){if(!lv(t))throw Error(M(299));var n=!1,r="",i=rR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=sv(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,Ou(t.nodeType===8?t.parentNode:t),new av(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(M(188)):(t=Object.keys(t).join(","),Error(M(268,t)));return t=SA(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return Qs(t)};En.hydrate=function(t,e,n){if(!Bf(e))throw Error(M(200));return jf(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!lv(t))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nR(e,null,t,1,n??null,i,!1,s,o),t[jr]=e.current,Ou(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Uf(e)};En.render=function(t,e,n){if(!Bf(e))throw Error(M(200));return jf(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!Bf(t))throw Error(M(40));return t._reactRootContainer?(Qs(function(){jf(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};En.unstable_batchedUpdates=tv;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Bf(n))throw Error(M(200));if(t==null||t._reactInternals===void 0)throw Error(M(38));return jf(t,e,n,!1,r)};En.version="18.2.0-next-9e3b772b8-20220608";function iR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iR)}catch(t){console.error(t)}}iR(),nA.exports=En;var gL=nA.exports,gT=gL;fg.createRoot=gT.createRoot,fg.hydrateRoot=gT.hydrateRoot;var _T={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_L=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},oR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),r.push(n[c],n[d],n[f],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_L(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new yL;const f=s<<2|a>>4;if(r.push(f),u!==64){const m=a<<4&240|u>>2;if(r.push(m),d!==64){const w=u<<6&192|d;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vL=function(t){const e=sR(t);return oR.encodeByteArray(e,!0)},Kd=function(t){return vL(t).replace(/\./g,"")},aR=function(t){try{return oR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qd(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!wL(n)||(t[n]=Qd(t[n],e[n]));return t}function wL(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL=()=>EL().__FIREBASE_DEFAULTS__,TL=()=>{if(typeof process>"u"||typeof _T>"u")return;const t=_T.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aR(t[1]);return e&&JSON.parse(e)},zf=()=>{try{return IL()||TL()||SL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lR=t=>{var e,n;return(n=(e=zf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},AL=t=>{const e=lR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},uR=()=>{var t;return(t=zf())===null||t===void 0?void 0:t.config},cR=t=>{var e;return(e=zf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Kd(JSON.stringify(n)),Kd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function uv(){var t;const e=(t=zf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bL(){return typeof self=="object"&&self.self===self}function hR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dR(){const t=Be();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kL(){return!uv()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zu(){try{return typeof indexedDB=="object"}catch{return!1}}function xL(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL="FirebaseError";class zt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NL,Object.setPrototypeOf(this,zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fo.prototype.create)}}class fo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?DL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new zt(i,a,r)}}function DL(t,e){return t.replace(OL,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const OL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function VL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(vT(s)&&vT(o)){if(!Yd(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function vT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Jl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fR(t,e){const n=new LL(t,e);return n.subscribe.bind(n)}class LL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ML(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$m),i.error===void 0&&(i.error=$m),i.complete===void 0&&(i.complete=$m);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ML(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $m(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t){return t&&t._delegate?t._delegate:t}class _r{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new RL;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UL(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$L(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $L(t){return t===Is?void 0:t}function UL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=[];var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const pR={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},jL=oe.INFO,zL={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},qL=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zL[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=jL,this._logHandler=qL,this._userLogHandler=null,hv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}function WL(t){hv.forEach(e=>{e.setLogLevel(t)})}function HL(t,e){for(const n of hv){let r=null;e&&e.level&&(r=pR[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:oe[s].toLowerCase(),message:a,args:o,type:i.name})}}}const GL=(t,e)=>e.some(n=>t instanceof n);let wT,ET;function KL(){return wT||(wT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QL(){return ET||(ET=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mR=new WeakMap,o_=new WeakMap,gR=new WeakMap,Um=new WeakMap,dv=new WeakMap;function YL(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(bi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&mR.set(n,t)}).catch(()=>{}),dv.set(e,t),e}function JL(t){if(o_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});o_.set(t,e)}let a_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return o_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XL(t){a_=t(a_)}function ZL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bm(this),e,...n);return gR.set(r,e.sort?e.sort():[e]),bi(r)}:QL().includes(t)?function(...e){return t.apply(Bm(this),e),bi(mR.get(this))}:function(...e){return bi(t.apply(Bm(this),e))}}function eM(t){return typeof t=="function"?ZL(t):(t instanceof IDBTransaction&&JL(t),GL(t,KL())?new Proxy(t,a_):t)}function bi(t){if(t instanceof IDBRequest)return YL(t);if(Um.has(t))return Um.get(t);const e=eM(t);return e!==t&&(Um.set(t,e),dv.set(e,t)),e}const Bm=t=>dv.get(t);function tM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=bi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(bi(o.result),l.oldVersion,l.newVersion,bi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nM=["get","getKey","getAll","getAllKeys","count"],rM=["put","add","delete","clear"],jm=new Map;function IT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jm.get(e))return jm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=rM.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nM.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return jm.set(e,s),s}XL(t=>({...t,get:(e,n,r)=>IT(e,n)||t.get(e,n,r),has:(e,n)=>!!IT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const l_="@firebase/app",TT="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new qf("@firebase/app"),oM="@firebase/app-compat",aM="@firebase/analytics-compat",lM="@firebase/analytics",uM="@firebase/app-check-compat",cM="@firebase/app-check",hM="@firebase/auth",dM="@firebase/auth-compat",fM="@firebase/database",pM="@firebase/database-compat",mM="@firebase/functions",gM="@firebase/functions-compat",_M="@firebase/installations",yM="@firebase/installations-compat",vM="@firebase/messaging",wM="@firebase/messaging-compat",EM="@firebase/performance",IM="@firebase/performance-compat",TM="@firebase/remote-config",SM="@firebase/remote-config-compat",AM="@firebase/storage",RM="@firebase/storage-compat",PM="@firebase/firestore",CM="@firebase/firestore-compat",bM="firebase",kM="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]",xM={[l_]:"fire-core",[oM]:"fire-core-compat",[lM]:"fire-analytics",[aM]:"fire-analytics-compat",[cM]:"fire-app-check",[uM]:"fire-app-check-compat",[hM]:"fire-auth",[dM]:"fire-auth-compat",[fM]:"fire-rtdb",[pM]:"fire-rtdb-compat",[mM]:"fire-fn",[gM]:"fire-fn-compat",[_M]:"fire-iid",[yM]:"fire-iid-compat",[vM]:"fire-fcm",[wM]:"fire-fcm-compat",[EM]:"fire-perf",[IM]:"fire-perf-compat",[TM]:"fire-rc",[SM]:"fire-rc-compat",[AM]:"fire-gcs",[RM]:"fire-gcs-compat",[PM]:"fire-fst",[CM]:"fire-fst-compat","fire-js":"fire-js",[bM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=new Map,qu=new Map;function Jd(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _R(t,e){t.container.addOrOverwriteComponent(e)}function Mi(t){const e=t.name;if(qu.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;qu.set(e,t);for(const n of Li.values())Jd(n,t);return!0}function Cc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function NM(t,e,n=Vi){Cc(t,e).clearInstance(n)}function DM(){qu.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Fr=new fo("app","Firebase",OM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VM=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=kM;function Wf(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vi,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=uR()),!n)throw Fr.create("no-options");const s=Li.get(i);if(s){if(Yd(n,s.options)&&Yd(r,s.config))return s;throw Fr.create("duplicate-app",{appName:i})}const o=new BL(i);for(const l of qu.values())o.addComponent(l);const a=new VM(n,r,o);return Li.set(i,a),a}function fv(t=Vi){const e=Li.get(t);if(!e&&t===Vi&&uR())return Wf();if(!e)throw Fr.create("no-app",{appName:t});return e}function LM(){return Array.from(Li.values())}async function yR(t){const e=t.name;Li.has(e)&&(Li.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function Kn(t,e,n){var r;let i=(r=xM[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(a.join(" "));return}Mi(new _r(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function vR(t,e){if(t!==null&&typeof t!="function")throw Fr.create("invalid-log-argument");HL(t,e)}function wR(t){WL(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="firebase-heartbeat-database",FM=1,Wu="firebase-heartbeat-store";let zm=null;function ER(){return zm||(zm=tM(MM,FM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wu)}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),zm}async function $M(t){try{return await(await ER()).transaction(Wu).objectStore(Wu).get(IR(t))}catch(e){if(e instanceof zt)Ys.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function ST(t,e){try{const r=(await ER()).transaction(Wu,"readwrite");await r.objectStore(Wu).put(e,IR(t)),await r.done}catch(n){if(n instanceof zt)Ys.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(r.message)}}}function IR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM=1024,BM=30*24*60*60*1e3;class jM{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qM(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=AT();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BM}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=AT(),{heartbeatsToSend:r,unsentEntries:i}=zM(this._heartbeatsCache.heartbeats),s=Kd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function AT(){return new Date().toISOString().substring(0,10)}function zM(t,e=UM){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),RT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zu()?xL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $M(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ST(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ST(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function RT(t){return Kd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t){Mi(new _r("platform-logger",e=>new iM(e),"PRIVATE")),Mi(new _r("heartbeat",e=>new jM(e),"PRIVATE")),Kn(l_,TT,t),Kn(l_,TT,"esm2017"),Kn("fire-js","")}WM("");const HM=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:zt,SDK_VERSION:Ji,_DEFAULT_ENTRY_NAME:Vi,_addComponent:Jd,_addOrOverwriteComponent:_R,_apps:Li,_clearComponents:DM,_components:qu,_getProvider:Cc,_registerComponent:Mi,_removeServiceInstance:NM,deleteApp:yR,getApp:fv,getApps:LM,initializeApp:Wf,onLog:vR,registerVersion:Kn,setLogLevel:wR},Symbol.toStringTag,{value:"Module"}));function pv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const Ll={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Do={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function TR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KM=GM,QM=TR,SR=new fo("auth","Firebase",TR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=new qf("@firebase/auth");function YM(t,...e){Xd.logLevel<=oe.WARN&&Xd.warn(`Auth (${Ji}): ${t}`,...e)}function ld(t,...e){Xd.logLevel<=oe.ERROR&&Xd.error(`Auth (${Ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t,...e){throw mv(t,...e)}function St(t,...e){return mv(t,...e)}function AR(t,e,n){const r=Object.assign(Object.assign({},QM()),{[e]:n});return new fo("auth","Firebase",r).create(e,{appName:t.name})}function el(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ft(t,"argument-error"),AR(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return SR.create(t,...e)}function F(t,e,...n){if(!t)throw mv(e,...n)}function ar(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ld(e),new Error(e)}function Yn(t,e){t||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function gv(){return PT()==="http:"||PT()==="https:"}function PT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gv()||hR()||"connection"in navigator)?navigator.onLine:!0}function XM(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yn(n>e,"Short delay should be less than long delay!"),this.isMobile=CL()||cv()}get(){return JM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t,e){Yn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF=new bc(3e4,6e4);function Qe(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ye(t,e,n,r,i={}){return PR(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Za(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),RR.fetch()(CR(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function PR(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZM),e);try{const i=new nF(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Xl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Xl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Xl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw AR(t,c,u);ft(t,c)}}catch(i){if(i instanceof zt)throw i;ft(t,"network-request-failed",{message:String(i)})}}async function Jr(t,e,n,r,i={}){const s=await Ye(t,e,n,r,i);return"mfaPendingCredential"in s&&ft(t,"multi-factor-auth-required",{_serverResponse:s}),s}function CR(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?_v(t.config,i):`${t.config.apiScheme}://${i}`}function tF(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(St(this.auth,"network-request-failed")),eF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=St(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){return t!==void 0&&t.getResponse!==void 0}function bT(t){return t!==void 0&&t.enterprise!==void 0}class rF{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tF(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t){return(await Ye(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function sF(t,e){return Ye(t,"GET","/v2/recaptchaConfig",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e){return Ye(t,"POST","/v1/accounts:delete",e)}async function aF(t,e){return Ye(t,"POST","/v1/accounts:update",e)}async function lF(t,e){return Ye(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uF(t,e=!1){const n=ee(t),r=await n.getIdToken(e),i=Hf(r);F(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:pu(qm(i.auth_time)),issuedAtTime:pu(qm(i.iat)),expirationTime:pu(qm(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function qm(t){return Number(t)*1e3}function Hf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ld("JWT malformed, contained fewer than 3 sections"),null;try{const i=aR(n);return i?JSON.parse(i):(ld("Failed to decode base64 JWT payload"),null)}catch(i){return ld("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function cF(t){const e=Hf(t);return F(e,"internal-error"),F(typeof e.exp<"u","internal-error"),F(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zt&&hF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gu(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Wr(t,lF(n,{idToken:r}));F(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mF(s.providerUserInfo):[],a=pF(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bR(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function fF(t){const e=ee(t);await Gu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pF(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mF(t){return t.map(e=>{var{providerId:n}=e,r=pv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(t,e){const n=await PR(t,{},async()=>{const r=Za({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=CR(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",RR.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function _F(t,e){return Ye(t,"POST","/v2/accounts:revokeToken",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){F(e.idToken,"internal-error"),F(typeof e.idToken<"u","internal-error"),F(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return F(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gF(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ku;return r&&(F(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(F(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(F(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ku,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,e){F(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Us{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=pv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bR(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Wr(this,this.stsTokenManager.getToken(this.auth,e));return F(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uF(this,e)}reload(){return fF(this)}_assign(e){this!==e&&(F(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Us(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){F(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wr(this,oF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,I=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,g=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:y,emailVerified:S,isAnonymous:A,providerData:R,stsTokenManager:k}=n;F(y&&k,e,"internal-error");const $=Ku.fromJSON(this.name,k);F(typeof y=="string",e,"internal-error"),oi(d,e.name),oi(f,e.name),F(typeof S=="boolean",e,"internal-error"),F(typeof A=="boolean",e,"internal-error"),oi(m,e.name),oi(w,e.name),oi(v,e.name),oi(I,e.name),oi(_,e.name),oi(g,e.name);const Q=new Us({uid:y,auth:e,email:f,emailVerified:S,displayName:d,isAnonymous:A,photoURL:w,phoneNumber:m,tenantId:v,stsTokenManager:$,createdAt:_,lastLoginAt:g});return R&&Array.isArray(R)&&(Q.providerData=R.map(W=>Object.assign({},W))),I&&(Q._redirectEventId=I),Q}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ku;i.updateFromServerResponse(n);const s=new Us({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Gu(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;function fn(t){Yn(t instanceof Function,"Expected a class definition");let e=kT.get(t);return e?(Yn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kT.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kR.type="NONE";const Ra=kR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e,n){return`firebase:${t}:${e}:${n}`}class da{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Bs(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bs("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Us._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new da(fn(Ra),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||fn(Ra);const o=Bs(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=Us._fromJSON(e,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new da(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new da(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OR(e))return"Blackberry";if(VR(e))return"Webos";if(yv(e))return"Safari";if((e.includes("chrome/")||NR(e))&&!e.includes("edge/"))return"Chrome";if(kc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xR(t=Be()){return/firefox\//i.test(t)}function yv(t=Be()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function NR(t=Be()){return/crios\//i.test(t)}function DR(t=Be()){return/iemobile/i.test(t)}function kc(t=Be()){return/android/i.test(t)}function OR(t=Be()){return/blackberry/i.test(t)}function VR(t=Be()){return/webos/i.test(t)}function tl(t=Be()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function yF(t=Be()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function vF(t=Be()){var e;return tl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wF(){return dR()&&document.documentMode===10}function LR(t=Be()){return tl(t)||kc(t)||VR(t)||OR(t)||/windows phone/i.test(t)||DR(t)}function EF(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(t,e=[]){let n;switch(t){case"Browser":n=xT(Be());break;case"Worker":n=`${xT(Be())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TF(t,e={}){return Ye(t,"GET","/v2/passwordPolicy",Qe(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF=6;class AF{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:SF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new NT(this),this.idTokenSubscription=new NT(this),this.beforeStateQueue=new IF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=fn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await da.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return F(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ee(e):null;return n&&F(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&F(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TF(this),n=new AF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await _F(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&fn(e)||this._popupRedirectResolver;F(n,this,"argument-error"),this.redirectPersistenceManager=await da.create(this,[fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(F(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return F(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YM(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function He(t){return ee(t)}class NT{constructor(e){this.auth=e,this.observer=null,this.addObserver=fR(n=>this.observer=n)}get next(){return F(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function vv(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=St("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",PF().appendChild(r)})}function FR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const CF="https://www.google.com/recaptcha/enterprise.js?render=",bF="recaptcha-enterprise",kF="NO_RECAPTCHA";class xF{constructor(e){this.type=bF,this.auth=He(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{sF(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new rF(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;bT(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(kF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&bT(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}vv(CF+a).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}}async function DT(t,e,n,r=!1){const i=new xF(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qu(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await DT(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await DT(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NF(t,e){const n=Cc(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Yd(s,e??{}))return i;ft(i,"already-initialized")}return n.initialize({options:e})}function DF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $R(t,e,n){const r=He(t);F(r._canInitEmulator,r,"emulator-config-failed"),F(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=UR(e),{host:o,port:a}=OF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||VF()}function UR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OF(t){const e=UR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:OT(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:OT(o)}}}function OT(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function VF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,n){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(t,e){return Ye(t,"POST","/v1/accounts:resetPassword",Qe(t,e))}async function LF(t,e){return Ye(t,"POST","/v1/accounts:update",e)}async function MF(t,e){return Ye(t,"POST","/v1/accounts:signUp",e)}async function FF(t,e){return Ye(t,"POST","/v1/accounts:update",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $F(t,e){return Jr(t,"POST","/v1/accounts:signInWithPassword",Qe(t,e))}async function Gf(t,e){return Ye(t,"POST","/v1/accounts:sendOobCode",Qe(t,e))}async function UF(t,e){return Gf(t,e)}async function BF(t,e){return Gf(t,e)}async function jF(t,e){return Gf(t,e)}async function zF(t,e){return Gf(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e){return Jr(t,"POST","/v1/accounts:signInWithEmailLink",Qe(t,e))}async function WF(t,e){return Jr(t,"POST","/v1/accounts:signInWithEmailLink",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends nl{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Yu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Yu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qu(e,n,"signInWithPassword",$F);case"emailLink":return qF(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qu(e,r,"signUpPassword",MF);case"emailLink":return WF(e,{idToken:n,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $r(t,e){return Jr(t,"POST","/v1/accounts:signInWithIdp",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="http://localhost";class yr extends nl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ft("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=pv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new yr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $r(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$r(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$r(e,n)}buildRequest(){const e={requestUri:HF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Za(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GF(t,e){return Ye(t,"POST","/v1/accounts:sendVerificationCode",Qe(t,e))}async function KF(t,e){return Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",Qe(t,e))}async function QF(t,e){const n=await Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",Qe(t,e));if(n.temporaryProof)throw Xl(t,"account-exists-with-different-credential",n);return n}const YF={USER_NOT_FOUND:"user-not-found"};async function JF(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Jr(t,"POST","/v1/accounts:signInWithPhoneNumber",Qe(t,n),YF)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends nl{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new js({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new js({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return KF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return QF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return JF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new js({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZF(t){const e=ra(Jl(t)).link,n=e?ra(Jl(e)).deep_link_id:null,r=ra(Jl(t)).deep_link_id;return(r?ra(Jl(r)).link:null)||r||n||e||t}class Kf{constructor(e){var n,r,i,s,o,a;const l=ra(Jl(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,d=XF((i=l.mode)!==null&&i!==void 0?i:null);F(u&&c&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=c,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=ZF(e);try{return new Kf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.providerId=Xi.PROVIDER_ID}static credential(e,n){return Yu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Kf.parseLink(n);return F(r,"argument-error"),Yu._fromEmailAndCode(e,r.code,r.tenantId)}}Xi.PROVIDER_ID="password";Xi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl extends Xr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fa extends rl{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return F("providerId"in n&&"signInMethod"in n,"argument-error"),yr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return F(e.idToken||e.accessToken,"argument-error"),yr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return fa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new fa(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends rl{constructor(){super("facebook.com")}static credential(e){return yr._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rr.credential(e.oauthAccessToken)}catch{return null}}}rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qn.credential(n,r)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends rl{constructor(){super("github.com")}static credential(e){return yr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="http://localhost";class Pa extends nl{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return $r(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$r(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$r(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Pa(r,s)}static _create(e,n){return new Pa(e,n)}buildRequest(){return{requestUri:e2,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="saml.";class Zd extends Xr{constructor(e){F(e.startsWith(t2),"argument-error"),super(e)}static credentialFromResult(e){return Zd.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Zd.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Pa.fromJSON(e);return F(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Pa._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends rl{constructor(){super("twitter.com")}static credential(e,n){return yr._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return sr.credential(n,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(t,e){return Jr(t,"POST","/v1/accounts:signUp",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Us._fromIdTokenResponse(e,r,i),o=VT(r);return new Vn({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=VT(r);return new Vn({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function VT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t){var e;const n=He(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Vn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await jR(n,{returnSecureToken:!0}),i=await Vn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef extends zt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ef.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ef(e,n,r,i)}}function zR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ef._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e){const n=ee(t);await Qf(!0,n,e);const{providerUserInfo:r}=await aF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=qR(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function wv(t,e,n=!1){const r=await Wr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vn._forOperation(t,"link",r)}async function Qf(t,e,n){await Gu(e);const r=qR(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";F(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await Wr(t,zR(r,i,e,t),n);F(s.idToken,r,"internal-error");const o=Hf(s.idToken);F(o,r,"internal-error");const{sub:a}=o;return F(t.uid===a,r,"user-mismatch"),Vn._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ft(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e,n=!1){const r="signIn",i=await zR(t,r,e),s=await Vn._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Yf(t,e){return HR(He(t),e)}async function GR(t,e){const n=ee(t);return await Qf(!1,n,e.providerId),wv(n,e)}async function KR(t,e){return WR(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e){return Jr(t,"POST","/v1/accounts:signInWithCustomToken",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t,e){const n=He(t),r=await i2(n,{token:e,returnSecureToken:!0}),i=await Vn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?Ev._fromServerResponse(e,n):"totpInfo"in n?Iv._fromServerResponse(e,n):ft(e,"internal-error")}}class Ev extends xc{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new Ev(n)}}class Iv extends xc{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new Iv(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jf(t,e,n){var r;F(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),F(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(F(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(F(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tv(t){const e=He(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function o2(t,e,n){const r=He(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Jf(r,i,n),await Qu(r,i,"getOobCode",BF)}async function a2(t,e,n){await BR(ee(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Tv(t),r})}async function l2(t,e){await FF(ee(t),{oobCode:e})}async function QR(t,e){const n=ee(t),r=await BR(n,{oobCode:e}),i=r.requestType;switch(F(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":F(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":F(r.mfaInfo,n,"internal-error");default:F(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=xc._fromServerResponse(He(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function u2(t,e){const{data:n}=await QR(ee(t),e);return n.email}async function c2(t,e,n){const r=He(t),o=await Qu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Tv(t),l}),a=await Vn._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function h2(t,e,n){return Yf(ee(t),Xi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Tv(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e,n){const r=He(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){F(a.handleCodeInApp,r,"argument-error"),a&&Jf(r,o,a)}s(i,n),await Qu(r,i,"getOobCode",jF)}function f2(t,e){const n=Kf.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function p2(t,e,n){const r=ee(t),i=Xi.credentialWithLink(e,n||Hu());return F(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Yf(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(t,e){return Ye(t,"POST","/v1/accounts:createAuthUri",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g2(t,e){const n=gv()?Hu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await m2(ee(t),r);return i||[]}async function _2(t,e){const n=ee(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Jf(n.auth,i,e);const{email:s}=await UF(n.auth,i);s!==t.email&&await t.reload()}async function y2(t,e,n){const r=ee(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Jf(r.auth,s,n);const{email:o}=await zF(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t,e){return Ye(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ee(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Wr(r,v2(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function E2(t,e){return YR(ee(t),e,null)}function I2(t,e){return YR(ee(t),null,e)}async function YR(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await Wr(t,LF(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Hf(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new pa(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new S2(s,i);case"github.com":return new A2(s,i);case"google.com":return new R2(s,i);case"twitter.com":return new P2(s,i,t.screenName||null);case"custom":case"anonymous":return new pa(s,null);default:return new pa(s,r,i)}}class pa{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class JR extends pa{constructor(e,n,r,i){super(e,n,r),this.username=i}}class S2 extends pa{constructor(e,n){super(e,"facebook.com",n)}}class A2 extends JR{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class R2 extends pa{constructor(e,n){super(e,"google.com",n)}}class P2 extends JR{constructor(e,n,r){super(e,"twitter.com",n,r)}}function C2(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:T2(n)}function b2(t,e,n,r){return ee(t).onIdTokenChanged(e,n,r)}function k2(t,e,n){return ee(t).beforeAuthStateChanged(e,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Ns("enroll",e,n)}static _fromMfaPendingCredential(e){return new Ns("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Ns._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Ns._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=He(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>xc._fromServerResponse(r,a));F(i.mfaPendingCredential,r,"internal-error");const o=Ns._fromMfaPendingCredential(i.mfaPendingCredential);return new Sv(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Vn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return F(n.user,r,"internal-error"),Vn._forOperation(n.user,n.operationType,u);default:ft(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function x2(t,e){var n;const r=ee(t),i=e;return F(e.customData.operationType,r,"argument-error"),F((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),Sv._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:start",Qe(t,e))}function D2(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:finalize",Qe(t,e))}function O2(t,e){return Ye(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Qe(t,e))}class Av{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>xc._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Av(e)}async getSession(){return Ns._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await Wr(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Wr(this.user,O2(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Wm=new WeakMap;function V2(t){const e=ee(t);return Wm.has(e)||Wm.set(e,Av._fromUser(e)),Wm.get(e)}const tf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tf,"1"),this.storage.removeItem(tf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(){const t=Be();return yv(t)||tl(t)}const M2=1e3,F2=10;class ZR extends XR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=L2()&&EF(),this.fallbackToPolling=LR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);wF()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,F2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZR.type="LOCAL";const Xf=ZR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP extends XR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eP.type="SESSION";const Fi=eP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await $2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nc(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Nc("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(){return window}function B2(t){rt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(){return typeof rt().WorkerGlobalScope<"u"&&typeof rt().importScripts=="function"}async function j2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function z2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function q2(){return Rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="firebaseLocalStorageDb",W2=1,nf="firebaseLocalStorage",nP="fbase_key";class Dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ep(t,e){return t.transaction([nf],e?"readwrite":"readonly").objectStore(nf)}function H2(){const t=indexedDB.deleteDatabase(tP);return new Dc(t).toPromise()}function u_(){const t=indexedDB.open(tP,W2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nf,{keyPath:nP})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nf)?e(r):(r.close(),await H2(),e(await u_()))})})}async function LT(t,e,n){const r=ep(t,!0).put({[nP]:e,value:n});return new Dc(r).toPromise()}async function G2(t,e){const n=ep(t,!1).get(e),r=await new Dc(n).toPromise();return r===void 0?null:r.value}function MT(t,e){const n=ep(t,!0).delete(e);return new Dc(n).toPromise()}const K2=800,Q2=3;class rP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Q2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zf._getInstance(q2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await j2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||z2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u_();return await LT(e,tf,"1"),await MT(e,tf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>LT(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>G2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>MT(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ep(i,!1).getAll();return new Dc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),K2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rP.type="LOCAL";const Ca=rP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(t,e){return Ye(t,"POST","/v2/accounts/mfaSignIn:start",Qe(t,e))}function J2(t,e){return Ye(t,"POST","/v2/accounts/mfaSignIn:finalize",Qe(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=500,Z2=6e4,Mh=1e12;class e${constructor(e){this.auth=e,this.counter=Mh,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new t$(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Mh;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Mh;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Mh;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class t${constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;F(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=n$(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},Z2)},X2))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function n$(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=FR("rcb"),r$=new bc(3e4,6e4),i$="https://www.google.com/recaptcha/api.js?";class s${constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=rt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return F(o$(n),e,"argument-error"),this.shouldResolveImmediately(n)&&CT(rt().grecaptcha)?Promise.resolve(rt().grecaptcha):new Promise((r,i)=>{const s=rt().setTimeout(()=>{i(St(e,"network-request-failed"))},r$.get());rt()[Hm]=()=>{rt().clearTimeout(s),delete rt()[Hm];const a=rt().grecaptcha;if(!a||!CT(a)){i(St(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const d=l(u,c);return this.counter++,d},this.hostLanguage=n,r(a)};const o=`${i$}?${Za({onload:Hm,render:"explicit",hl:n})}`;vv(o).catch(()=>{clearTimeout(s),i(St(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=rt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function o$(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class a${async load(e){return new e$(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="recaptcha",l$={theme:"light",type:"image"};let u$=class{constructor(e,n,r=Object.assign({},l$)){this.parameters=r,this.type=iP,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=He(e),this.isInvisible=this.parameters.size==="invisible",F(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;F(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new a$:new s$,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){F(!this.parameters.sitekey,this.auth,"argument-error"),F(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),F(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=rt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){F(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){F(gv()&&!Rv(),this.auth,"internal-error"),await c$(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await iF(this.auth);F(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return F(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function c$(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=js._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function h$(t,e,n){const r=He(t),i=await tp(r,e,ee(n));return new Pv(i,s=>Yf(r,s))}async function d$(t,e,n){const r=ee(t);await Qf(!1,r,"phone");const i=await tp(r.auth,e,ee(n));return new Pv(i,s=>GR(r,s))}async function f$(t,e,n){const r=ee(t),i=await tp(r.auth,e,ee(n));return new Pv(i,s=>KR(r,s))}async function tp(t,e,n){var r;const i=await n.verify();try{F(typeof i=="string",t,"argument-error"),F(n.type===iP,t,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s)return F(o.type==="enroll",t,"internal-error"),(await N2(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{F(o.type==="signin",t,"internal-error");const a=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return F(a,t,"missing-multi-factor-info"),(await Y2(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await GF(t,{phoneNumber:s.phoneNumber,recaptchaToken:i});return o}}finally{n._reset()}}async function p$(t,e){await wv(ee(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Js=class ud{constructor(e){this.providerId=ud.PROVIDER_ID,this.auth=He(e)}verifyPhoneNumber(e,n){return tp(this.auth,e,ee(n))}static credential(e,n){return js._fromVerification(e,n)}static credentialFromResult(e){const n=e;return ud.credentialFromTaggedObject(n)}static credentialFromError(e){return ud.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?js._fromTokenResponse(n,r):null}};Js.PROVIDER_ID="phone";Js.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(t,e){return e?fn(e):(F(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv extends nl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $r(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $r(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $r(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function m$(t){return HR(t.auth,new Cv(t),t.bypassAuthState)}function g$(t){const{auth:e,user:n}=t;return F(n,e,"internal-error"),WR(n,new Cv(t),t.bypassAuthState)}async function _$(t){const{auth:e,user:n}=t;return F(n,e,"internal-error"),wv(n,new Cv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return m$;case"linkViaPopup":case"linkViaRedirect":return _$;case"reauthViaPopup":case"reauthViaRedirect":return g$;default:ft(this.auth,"internal-error")}}resolve(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new bc(2e3,1e4);async function oP(t,e,n){const r=He(t);el(t,e,Xr);const i=po(r,n);return new Nr(r,"signInViaPopup",e,i).executeNotNull()}async function v$(t,e,n){const r=ee(t);el(r.auth,e,Xr);const i=po(r.auth,n);return new Nr(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function w$(t,e,n){const r=ee(t);el(r.auth,e,Xr);const i=po(r.auth,n);return new Nr(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Nr extends sP{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Nr.currentPopupAction&&Nr.currentPopupAction.cancel(),Nr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return F(e,this.auth,"internal-error"),e}async onExecution(){Yn(this.filter.length===1,"Popup operations only handle one event");const e=Nc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(St(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(St(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Nr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(St(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y$.get())};e()}}Nr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$="pendingRedirect",mu=new Map;class I$ extends sP{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mu.get(this.auth._key());if(!e){try{const r=await T$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mu.set(this.auth._key(),e)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T$(t,e){const n=lP(e),r=aP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function bv(t,e){return aP(t)._set(lP(e),"true")}function S$(){mu.clear()}function kv(t,e){mu.set(t._key(),e)}function aP(t){return fn(t._redirectPersistence)}function lP(t){return Bs(E$,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A$(t,e,n){return R$(t,e,n)}async function R$(t,e,n){const r=He(t);el(t,e,Xr),await r._initializationPromise;const i=po(r,n);return await bv(i,r),i._openRedirect(r,e,"signInViaRedirect")}function P$(t,e,n){return C$(t,e,n)}async function C$(t,e,n){const r=ee(t);el(r.auth,e,Xr),await r.auth._initializationPromise;const i=po(r.auth,n);await bv(i,r.auth);const s=await uP(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function b$(t,e,n){return k$(t,e,n)}async function k$(t,e,n){const r=ee(t);el(r.auth,e,Xr),await r.auth._initializationPromise;const i=po(r.auth,n);await Qf(!1,r,e.providerId),await bv(i,r.auth);const s=await uP(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function x$(t,e){return await He(t)._initializationPromise,np(t,e,!1)}async function np(t,e,n=!1){const r=He(t),i=po(r,e),o=await new I$(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function uP(t){const e=Nc(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=10*60*1e3;class cP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!D$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hP(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(St(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=N$&&this.cachedEventUids.clear(),this.cachedEventUids.has(FT(e))}saveEventToCache(e){this.cachedEventUids.add(FT(e)),this.lastProcessedEventTime=Date.now()}}function FT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hP({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function D$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hP(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dP(t,e={}){return Ye(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,V$=/^https?/;async function L$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dP(t);for(const n of e)try{if(M$(n))return}catch{}ft(t,"unauthorized-domain")}function M$(t){const e=Hu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!V$.test(n))return!1;if(O$.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$=new bc(3e4,6e4);function $T(){const t=rt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function $$(t){return new Promise((e,n)=>{var r,i,s;function o(){$T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$T(),n(St(t,"network-request-failed"))},timeout:F$.get()})}if(!((i=(r=rt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=rt().gapi)===null||s===void 0)&&s.load)o();else{const a=FR("iframefcb");return rt()[a]=()=>{gapi.load?o():n(St(t,"network-request-failed"))},vv(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw cd=null,e})}let cd=null;function U$(t){return cd=cd||$$(t),cd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=new bc(5e3,15e3),j$="__/auth/iframe",z$="emulator/auth/iframe",q$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function H$(t){const e=t.config;F(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_v(e,z$):`https://${t.config.authDomain}/${j$}`,r={apiKey:e.apiKey,appName:t.name,v:Ji},i=W$.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Za(r).slice(1)}`}async function G$(t){const e=await U$(t),n=rt().gapi;return F(n,t,"internal-error"),e.open({where:document.body,url:H$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q$,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=St(t,"network-request-failed"),a=rt().setTimeout(()=>{s(o)},B$.get());function l(){rt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q$=500,Y$=600,J$="_blank",X$="http://localhost";class UT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z$(t,e,n,r=Q$,i=Y$){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},K$),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Be().toLowerCase();n&&(a=NR(u)?J$:n),xR(u)&&(e=e||X$,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[m,w])=>`${f}${m}=${w},`,"");if(vF(u)&&a!=="_self")return eU(e||"",a),new UT(null);const d=window.open(e||"",a,c);F(d,t,"popup-blocked");try{d.focus()}catch{}return new UT(d)}function eU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU="__/auth/handler",nU="emulator/auth/handler",rU=encodeURIComponent("fac");async function c_(t,e,n,r,i,s){F(t.config.authDomain,t,"auth-domain-config-required"),F(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ji,eventId:i};if(e instanceof Xr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",VL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(s||{}))o[c]=d}if(e instanceof rl){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await t._getAppCheckToken(),u=l?`#${rU}=${encodeURIComponent(l)}`:"";return`${iU(t)}?${Za(a).slice(1)}${u}`}function iU({config:t}){return t.emulator?_v(t,nU):`https://${t.authDomain}/${tU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="webStorageSupport";class sU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fi,this._completeRedirectFn=np,this._overrideRedirectResult=kv}async _openPopup(e,n,r,i){var s;Yn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await c_(e,n,r,Hu(),i);return Z$(e,o,Nc())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await c_(e,n,r,Hu(),i);return B2(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Yn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await G$(e),r=new cP(e);return n.register("authEvent",i=>(F(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gm,{type:Gm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Gm];o!==void 0&&n(!!o),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=L$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return LR()||yv()||tl()}}const fP=sU;class oU{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ar("unexpected MultiFactorSessionType")}}}class xv extends oU{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new xv(e)}_finalizeEnroll(e,n,r){return D2(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return J2(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class pP{constructor(){}static assertion(e){return xv._fromCredential(e)}}pP.FACTOR_ID="phone";var BT="@firebase/auth",jT="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){F(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function uU(t){Mi(new _r("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;F(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MR(t)},u=new RF(r,i,s,l);return DF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Mi(new _r("auth-internal",e=>{const n=He(e.getProvider("auth").getImmediate());return(r=>new aU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(BT,jT,lU(t)),Kn(BT,jT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=5*60,hU=cR("authIdTokenMaxAge")||cU;let zT=null;const dU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hU)return;const i=n==null?void 0:n.token;zT!==i&&(zT=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mP(t=fv()){const e=Cc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NF(t,{popupRedirectResolver:fP,persistence:[Ca,Xf,Fi]}),r=cR("authTokenSyncURL");if(r){const s=dU(r);k2(n,s,()=>s(n.currentUser)),b2(n,o=>s(o))}const i=lR("auth");return i&&$R(n,`http://${i}`),n}uU("Browser");var fU="firebase",pU="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(fU,pU,"app");var mU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},q,Nv=Nv||{},ne=mU||self;function rp(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Oc(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function gU(t){return Object.prototype.hasOwnProperty.call(t,Km)&&t[Km]||(t[Km]=++_U)}var Km="closure_uid_"+(1e9*Math.random()>>>0),_U=0;function yU(t,e,n){return t.call.apply(t.bind,arguments)}function vU(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function xt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xt=yU:xt=vU,xt.apply(null,arguments)}function Fh(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function mt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function Zi(){this.s=this.s,this.o=this.o}var wU=0;Zi.prototype.s=!1;Zi.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),wU!=0)&&gU(this)};Zi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gP=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Dv(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function qT(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(rp(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Nt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Nt.prototype.h=function(){this.defaultPrevented=!0};var EU=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};ne.addEventListener("test",n,e),ne.removeEventListener("test",n,e)}catch{}return t}();function Ju(t){return/^[\s\xa0]*$/.test(t)}function ip(){var t=ne.navigator;return t&&(t=t.userAgent)?t:""}function or(t){return ip().indexOf(t)!=-1}function Ov(t){return Ov[" "](t),t}Ov[" "]=function(){};function IU(t,e){var n=p4;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var TU=or("Opera"),ba=or("Trident")||or("MSIE"),_P=or("Edge"),h_=_P||ba,yP=or("Gecko")&&!(ip().toLowerCase().indexOf("webkit")!=-1&&!or("Edge"))&&!(or("Trident")||or("MSIE"))&&!or("Edge"),SU=ip().toLowerCase().indexOf("webkit")!=-1&&!or("Edge");function vP(){var t=ne.document;return t?t.documentMode:void 0}var d_;e:{var Qm="",Ym=function(){var t=ip();if(yP)return/rv:([^\);]+)(\)|;)/.exec(t);if(_P)return/Edge\/([\d\.]+)/.exec(t);if(ba)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(SU)return/WebKit\/(\S+)/.exec(t);if(TU)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Ym&&(Qm=Ym?Ym[1]:""),ba){var Jm=vP();if(Jm!=null&&Jm>parseFloat(Qm)){d_=String(Jm);break e}}d_=Qm}var f_;if(ne.document&&ba){var WT=vP();f_=WT||parseInt(d_,10)||void 0}else f_=void 0;var AU=f_;function Xu(t,e){if(Nt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(yP){e:{try{Ov(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:RU[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Xu.$.h.call(this)}}mt(Xu,Nt);var RU={2:"touch",3:"pen",4:"mouse"};Xu.prototype.h=function(){Xu.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Vc="closure_listenable_"+(1e6*Math.random()|0),PU=0;function CU(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++PU,this.fa=this.ia=!1}function sp(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Vv(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function bU(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function wP(t){const e={};for(const n in t)e[n]=t[n];return e}const HT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function EP(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<HT.length;s++)n=HT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function op(t){this.src=t,this.g={},this.h=0}op.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=m_(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new CU(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function p_(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=gP(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(sp(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function m_(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Lv="closure_lm_"+(1e6*Math.random()|0),Xm={};function IP(t,e,n,r,i){if(r&&r.once)return SP(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)IP(t,e[s],n,r,i);return null}return n=$v(n),t&&t[Vc]?t.O(e,n,Oc(r)?!!r.capture:!!r,i):TP(t,e,n,!1,r,i)}function TP(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Oc(i)?!!i.capture:!!i,a=Fv(t);if(a||(t[Lv]=a=new op(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=kU(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)EU||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(RP(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function kU(){function t(n){return e.call(t.src,t.listener,n)}const e=xU;return t}function SP(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)SP(t,e[s],n,r,i);return null}return n=$v(n),t&&t[Vc]?t.P(e,n,Oc(r)?!!r.capture:!!r,i):TP(t,e,n,!0,r,i)}function AP(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)AP(t,e[s],n,r,i);else r=Oc(r)?!!r.capture:!!r,n=$v(n),t&&t[Vc]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=m_(s,n,r,i),-1<n&&(sp(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Fv(t))&&(e=t.g[e.toString()],t=-1,e&&(t=m_(e,n,r,i)),(n=-1<t?e[t]:null)&&Mv(n))}function Mv(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Vc])p_(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(RP(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Fv(e))?(p_(n,t),n.h==0&&(n.src=null,e[Lv]=null)):sp(t)}}}function RP(t){return t in Xm?Xm[t]:Xm[t]="on"+t}function xU(t,e){if(t.fa)t=!0;else{e=new Xu(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Mv(t),t=n.call(r,e)}return t}function Fv(t){return t=t[Lv],t instanceof op?t:null}var Zm="__closure_events_fn_"+(1e9*Math.random()>>>0);function $v(t){return typeof t=="function"?t:(t[Zm]||(t[Zm]=function(e){return t.handleEvent(e)}),t[Zm])}function pt(){Zi.call(this),this.i=new op(this),this.S=this,this.J=null}mt(pt,Zi);pt.prototype[Vc]=!0;pt.prototype.removeEventListener=function(t,e,n,r){AP(this,t,e,n,r)};function At(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Nt(e,t);else if(e instanceof Nt)e.target=e.target||t;else{var i=e;e=new Nt(r,t),EP(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=$h(o,r,!0,e)&&i}if(o=e.g=t,i=$h(o,r,!0,e)&&i,i=$h(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=$h(o,r,!1,e)&&i}pt.prototype.N=function(){if(pt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)sp(n[r]);delete t.g[e],t.h--}}this.J=null};pt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};pt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function $h(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&p_(t.i,o),i=a.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Uv=ne.JSON.stringify;class NU{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function DU(){var t=Bv;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class OU{constructor(){this.h=this.g=null}add(e,n){const r=PP.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var PP=new NU(()=>new VU,t=>t.reset());class VU{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function LU(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function MU(t){ne.setTimeout(()=>{throw t},0)}let Zu,ec=!1,Bv=new OU,CP=()=>{const t=ne.Promise.resolve(void 0);Zu=()=>{t.then(FU)}};var FU=()=>{for(var t;t=DU();){try{t.h.call(t.g)}catch(n){MU(n)}var e=PP;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ec=!1};function ap(t,e){pt.call(this),this.h=t||1,this.g=e||ne,this.j=xt(this.qb,this),this.l=Date.now()}mt(ap,pt);q=ap.prototype;q.ga=!1;q.T=null;q.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),At(this,"tick"),this.ga&&(jv(this),this.start()))}};q.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function jv(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}q.N=function(){ap.$.N.call(this),jv(this),delete this.g};function zv(t,e,n){if(typeof t=="function")n&&(t=xt(t,n));else if(t&&typeof t.handleEvent=="function")t=xt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ne.setTimeout(t,e||0)}function bP(t){t.g=zv(()=>{t.g=null,t.i&&(t.i=!1,bP(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class $U extends Zi{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bP(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tc(t){Zi.call(this),this.h=t,this.g={}}mt(tc,Zi);var GT=[];function kP(t,e,n,r){Array.isArray(n)||(n&&(GT[0]=n.toString()),n=GT);for(var i=0;i<n.length;i++){var s=IP(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function xP(t){Vv(t.g,function(e,n){this.g.hasOwnProperty(n)&&Mv(e)},t),t.g={}}tc.prototype.N=function(){tc.$.N.call(this),xP(this)};tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function lp(){this.g=!0}lp.prototype.Ea=function(){this.g=!1};function UU(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");o=2<=d.length&&d[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function BU(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ia(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+zU(t,n)+(r?" "+r:"")})}function jU(t,e){t.info(function(){return"TIMEOUT: "+e})}lp.prototype.info=function(){};function zU(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Uv(n)}catch{return e}}var mo={},KT=null;function up(){return KT=KT||new pt}mo.Ta="serverreachability";function NP(t){Nt.call(this,mo.Ta,t)}mt(NP,Nt);function nc(t){const e=up();At(e,new NP(e))}mo.STAT_EVENT="statevent";function DP(t,e){Nt.call(this,mo.STAT_EVENT,t),this.stat=e}mt(DP,Nt);function Bt(t){const e=up();At(e,new DP(e,t))}mo.Ua="timingevent";function OP(t,e){Nt.call(this,mo.Ua,t),this.size=e}mt(OP,Nt);function Lc(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){t()},e)}var cp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},VP={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qv(){}qv.prototype.h=null;function QT(t){return t.h||(t.h=t.i())}function LP(){}var Mc={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Wv(){Nt.call(this,"d")}mt(Wv,Nt);function Hv(){Nt.call(this,"c")}mt(Hv,Nt);var g_;function hp(){}mt(hp,qv);hp.prototype.g=function(){return new XMLHttpRequest};hp.prototype.i=function(){return{}};g_=new hp;function Fc(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new tc(this),this.P=qU,t=h_?125:void 0,this.V=new ap(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new MP}function MP(){this.i=null,this.g="",this.h=!1}var qU=45e3,FP={},__={};q=Fc.prototype;q.setTimeout=function(t){this.P=t};function y_(t,e,n){t.L=1,t.A=fp(Hr(e)),t.u=n,t.S=!0,$P(t,null)}function $P(t,e){t.G=Date.now(),$c(t),t.B=Hr(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),GP(n.i,"t",r),t.o=0,n=t.l.J,t.h=new MP,t.g=pC(t.l,n?e:null,!t.u),0<t.O&&(t.M=new $U(xt(t.Pa,t,t.g),t.O)),kP(t.U,t.g,"readystatechange",t.nb),e=t.I?wP(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),nc(),UU(t.j,t.v,t.B,t.m,t.W,t.u)}q.nb=function(t){t=t.target;const e=this.M;e&&lr(t)==3?e.l():this.Pa(t)};q.Pa=function(t){try{if(t==this.g)e:{const c=lr(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||h_||this.g&&(this.h.h||this.g.ja()||ZT(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?nc(3):nc(2)),dp(this);var n=this.g.da();this.ca=n;t:if(UP(this)){var r=ZT(this.g);t="";var i=r.length,s=lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),gu(this);var o="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,BU(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ju(a)){var u=a;break t}}u=null}if(n=u)ia(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,v_(this,n);else{this.i=!1,this.s=3,Bt(12),Ds(this),gu(this);break e}}this.S?(BP(this,c,o),h_&&this.i&&c==3&&(kP(this.U,this.V,"tick",this.mb),this.V.start())):(ia(this.j,this.m,o,null),v_(this,o)),c==4&&Ds(this),this.i&&!this.J&&(c==4?cC(this.l,this):(this.i=!1,$c(this)))}else h4(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),Ds(this),gu(this)}}}catch{}finally{}};function UP(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function BP(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=WU(t,n),i==__){e==4&&(t.s=4,Bt(14),r=!1),ia(t.j,t.m,null,"[Incomplete Response]");break}else if(i==FP){t.s=4,Bt(15),ia(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ia(t.j,t.m,i,null),v_(t,i);UP(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Bt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xv(e),e.M=!0,Bt(11))):(ia(t.j,t.m,n,"[Invalid Chunked Response]"),Ds(t),gu(t))}q.mb=function(){if(this.g){var t=lr(this.g),e=this.g.ja();this.o<e.length&&(dp(this),BP(this,t,e),this.i&&t!=4&&$c(this))}};function WU(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?__:(n=Number(e.substring(n,r)),isNaN(n)?FP:(r+=1,r+n>e.length?__:(e=e.slice(r,r+n),t.o=r+n,e)))}q.cancel=function(){this.J=!0,Ds(this)};function $c(t){t.Y=Date.now()+t.P,jP(t,t.P)}function jP(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Lc(xt(t.lb,t),e)}function dp(t){t.C&&(ne.clearTimeout(t.C),t.C=null)}q.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(jU(this.j,this.B),this.L!=2&&(nc(),Bt(17)),Ds(this),this.s=2,gu(this)):jP(this,this.Y-t)};function gu(t){t.l.H==0||t.J||cC(t.l,t)}function Ds(t){dp(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,jv(t.V),xP(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function v_(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||w_(n.i,t))){if(!t.K&&w_(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)of(n),_p(n);else break e;Jv(n),Bt(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Lc(xt(n.ib,n),6e3));if(1>=YP(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Os(n,11)}else if((t.K||n.g==t)&&of(n),!Ju(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];const c=u[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const m=t.g;if(m){const w=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(w){var s=r.i;s.g||w.indexOf("spdy")==-1&&w.indexOf("quic")==-1&&w.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Gv(s,s.h),s.h=null))}if(r.F){const v=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,Pe(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=fC(r,r.J?r.pa:null,r.Y),o.K){JP(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(dp(a),$c(a)),r.g=o}else lC(r);0<n.j.length&&yp(n)}else u[0]!="stop"&&u[0]!="close"||Os(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Os(n,7):Yv(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}nc(4)}catch{}}function HU(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(rp(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function GU(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(rp(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function zP(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(rp(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=GU(t),r=HU(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var qP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KU(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function zs(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof zs){this.h=t.h,rf(this,t.j),this.s=t.s,this.g=t.g,sf(this,t.m),this.l=t.l;var e=t.i,n=new rc;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),YT(this,n),this.o=t.o}else t&&(e=String(t).match(qP))?(this.h=!1,rf(this,e[1]||"",!0),this.s=Zl(e[2]||""),this.g=Zl(e[3]||"",!0),sf(this,e[4]),this.l=Zl(e[5]||"",!0),YT(this,e[6]||"",!0),this.o=Zl(e[7]||"")):(this.h=!1,this.i=new rc(null,this.h))}zs.prototype.toString=function(){var t=[],e=this.j;e&&t.push(eu(e,JT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(eu(e,JT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(eu(n,n.charAt(0)=="/"?JU:YU,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",eu(n,ZU)),t.join("")};function Hr(t){return new zs(t)}function rf(t,e,n){t.j=n?Zl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function sf(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function YT(t,e,n){e instanceof rc?(t.i=e,e4(t.i,t.h)):(n||(e=eu(e,XU)),t.i=new rc(e,t.h))}function Pe(t,e,n){t.i.set(e,n)}function fp(t){return Pe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Zl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function eu(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,QU),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function QU(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var JT=/[#\/\?@]/g,YU=/[#\?:]/g,JU=/[#\?]/g,XU=/[#\?@]/g,ZU=/#/g;function rc(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function es(t){t.g||(t.g=new Map,t.h=0,t.i&&KU(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}q=rc.prototype;q.add=function(t,e){es(this),this.i=null,t=il(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function WP(t,e){es(t),e=il(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function HP(t,e){return es(t),e=il(t,e),t.g.has(e)}q.forEach=function(t,e){es(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};q.ta=function(){es(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};q.Z=function(t){es(this);let e=[];if(typeof t=="string")HP(this,t)&&(e=e.concat(this.g.get(il(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};q.set=function(t,e){return es(this),this.i=null,t=il(this,t),HP(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};q.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function GP(t,e,n){WP(t,e),0<n.length&&(t.i=null,t.g.set(il(t,e),Dv(n)),t.h+=n.length)}q.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function il(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function e4(t,e){e&&!t.j&&(es(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(WP(this,r),GP(this,i,n))},t)),t.j=e}var t4=class{constructor(t,e){this.g=t,this.map=e}};function KP(t){this.l=t||n4,ne.PerformanceNavigationTiming?(t=ne.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var n4=10;function QP(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function YP(t){return t.h?1:t.g?t.g.size:0}function w_(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Gv(t,e){t.g?t.g.add(e):t.h=e}function JP(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}KP.prototype.cancel=function(){if(this.i=XP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function XP(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return Dv(t.i)}var r4=class{stringify(t){return ne.JSON.stringify(t,void 0)}parse(t){return ne.JSON.parse(t,void 0)}};function i4(){this.g=new r4}function s4(t,e,n){const r=n||"";try{zP(t,function(i,s){let o=i;Oc(i)&&(o=Uv(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function o4(t,e){const n=new lp;if(ne.Image){const r=new Image;r.onload=Fh(Uh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fh(Uh,n,r,"TestLoadImage: error",!1,e),r.onabort=Fh(Uh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fh(Uh,n,r,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Uh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function pp(t){this.l=t.ec||null,this.j=t.ob||!1}mt(pp,qv);pp.prototype.g=function(){return new mp(this.l,this.j)};pp.prototype.i=function(t){return function(){return t}}({});function mp(t,e){pt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mt(mp,pt);var Kv=0;q=mp.prototype;q.open=function(t,e){if(this.readyState!=Kv)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ic(this)};q.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};q.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Uc(this)),this.readyState=Kv};q.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ic(this)),this.g&&(this.readyState=3,ic(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ZP(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ZP(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}q.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Uc(this):ic(this),this.readyState==3&&ZP(this)}};q.Za=function(t){this.g&&(this.response=this.responseText=t,Uc(this))};q.Ya=function(t){this.g&&(this.response=t,Uc(this))};q.ka=function(){this.g&&Uc(this)};function Uc(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ic(t)}q.setRequestHeader=function(t,e){this.v.append(t,e)};q.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};q.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ic(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(mp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var a4=ne.JSON.parse;function Ge(t){pt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eC,this.L=this.M=!1}mt(Ge,pt);var eC="",l4=/^https?$/i,u4=["POST","PUT"];q=Ge.prototype;q.Oa=function(t){this.M=t};q.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():g_.g(),this.C=this.u?QT(this.u):QT(g_),this.g.onreadystatechange=xt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){XT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=ne.FormData&&t instanceof ne.FormData,!(0<=gP(u4,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{rC(this),0<this.B&&((this.L=c4(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xt(this.ua,this)):this.A=zv(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){XT(this,s)}};function c4(t){return ba&&typeof t.timeout=="number"&&t.ontimeout!==void 0}q.ua=function(){typeof Nv<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,At(this,"timeout"),this.abort(8))};function XT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,tC(t),gp(t)}function tC(t){t.F||(t.F=!0,At(t,"complete"),At(t,"error"))}q.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,At(this,"complete"),At(this,"abort"),gp(this))};q.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gp(this,!0)),Ge.$.N.call(this)};q.La=function(){this.s||(this.G||this.v||this.l?nC(this):this.kb())};q.kb=function(){nC(this)};function nC(t){if(t.h&&typeof Nv<"u"&&(!t.C[1]||lr(t)!=4||t.da()!=2)){if(t.v&&lr(t)==4)zv(t.La,0,t);else if(At(t,"readystatechange"),lr(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(qP)[1]||null;!i&&ne.self&&ne.self.location&&(i=ne.self.location.protocol.slice(0,-1)),r=!l4.test(i?i.toLowerCase():"")}n=r}if(n)At(t,"complete"),At(t,"success");else{t.m=6;try{var s=2<lr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",tC(t)}}finally{gp(t)}}}}function gp(t,e){if(t.g){rC(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||At(t,"ready");try{n.onreadystatechange=r}catch{}}}function rC(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ne.clearTimeout(t.A),t.A=null)}q.isActive=function(){return!!this.g};function lr(t){return t.g?t.g.readyState:0}q.da=function(){try{return 2<lr(this)?this.g.status:-1}catch{return-1}};q.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};q.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),a4(e)}};function ZT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case eC:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function h4(t){const e={};t=(t.g&&2<=lr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ju(t[r]))continue;var n=LU(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}bU(e,function(r){return r.join(", ")})}q.Ia=function(){return this.m};q.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iC(t){let e="";return Vv(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Qv(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=iC(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Pe(t,e,n))}function Ml(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function sC(t){this.Ga=0,this.j=[],this.l=new lp,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ml("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ml("baseRetryDelayMs",5e3,t),this.hb=Ml("retryDelaySeedMs",1e4,t),this.eb=Ml("forwardChannelMaxRetries",2,t),this.xa=Ml("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new KP(t&&t.concurrentRequestLimit),this.Ja=new i4,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}q=sC.prototype;q.ra=8;q.H=1;function Yv(t){if(oC(t),t.H==3){var e=t.W++,n=Hr(t.I);if(Pe(n,"SID",t.K),Pe(n,"RID",e),Pe(n,"TYPE","terminate"),Bc(t,n),e=new Fc(t,t.l,e),e.L=2,e.A=fp(Hr(n)),n=!1,ne.navigator&&ne.navigator.sendBeacon)try{n=ne.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ne.Image&&(new Image().src=e.A,n=!0),n||(e.g=pC(e.l,null),e.g.ha(e.A)),e.G=Date.now(),$c(e)}dC(t)}function _p(t){t.g&&(Xv(t),t.g.cancel(),t.g=null)}function oC(t){_p(t),t.u&&(ne.clearTimeout(t.u),t.u=null),of(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ne.clearTimeout(t.m),t.m=null)}function yp(t){if(!QP(t.i)&&!t.m){t.m=!0;var e=t.Na;Zu||CP(),ec||(Zu(),ec=!0),Bv.add(e,t),t.C=0}}function d4(t,e){return YP(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Lc(xt(t.Na,t,e),hC(t,t.C)),t.C++,!0)}q.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Fc(this,this.l,t);let s=this.s;if(this.U&&(s?(s=wP(s),EP(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=aC(this,i,e),n=Hr(this.I),Pe(n,"RID",t),Pe(n,"CVER",22),this.F&&Pe(n,"X-HTTP-Session-Id",this.F),Bc(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(iC(s)))+"&"+e:this.o&&Qv(n,this.o,s)),Gv(this.i,i),this.bb&&Pe(n,"TYPE","init"),this.P?(Pe(n,"$req",e),Pe(n,"SID","null"),i.aa=!0,y_(i,n,null)):y_(i,n,e),this.H=2}}else this.H==3&&(t?e0(this,t):this.j.length==0||QP(this.i)||e0(this))};function e0(t,e){var n;e?n=e.m:n=t.W++;const r=Hr(t.I);Pe(r,"SID",t.K),Pe(r,"RID",n),Pe(r,"AID",t.V),Bc(t,r),t.o&&t.s&&Qv(r,t.o,t.s),n=new Fc(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=aC(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Gv(t.i,n),y_(n,r,e)}function Bc(t,e){t.na&&Vv(t.na,function(n,r){Pe(e,r,n)}),t.h&&zP({},function(n,r){Pe(e,r,n)})}function aC(t,e,n){n=Math.min(t.j.length,n);var r=t.h?xt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let u=i[l].g;const c=i[l].map;if(u-=s,0>u)s=Math.max(0,i[l].g-100),a=!1;else try{s4(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function lC(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Zu||CP(),ec||(Zu(),ec=!0),Bv.add(e,t),t.A=0}}function Jv(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Lc(xt(t.Ma,t),hC(t,t.A)),t.A++,!0)}q.Ma=function(){if(this.u=null,uC(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Lc(xt(this.jb,this),t)}};q.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bt(10),_p(this),uC(this))};function Xv(t){t.B!=null&&(ne.clearTimeout(t.B),t.B=null)}function uC(t){t.g=new Fc(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Hr(t.wa);Pe(e,"RID","rpc"),Pe(e,"SID",t.K),Pe(e,"AID",t.V),Pe(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Pe(e,"TO",t.qa),Pe(e,"TYPE","xmlhttp"),Bc(t,e),t.o&&t.s&&Qv(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=fp(Hr(e)),n.u=null,n.S=!0,$P(n,t)}q.ib=function(){this.v!=null&&(this.v=null,_p(this),Jv(this),Bt(19))};function of(t){t.v!=null&&(ne.clearTimeout(t.v),t.v=null)}function cC(t,e){var n=null;if(t.g==e){of(t),Xv(t),t.g=null;var r=2}else if(w_(t.i,e))n=e.F,JP(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=up(),At(r,new OP(r,n)),yp(t)}else lC(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&d4(t,e)||r==2&&Jv(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Os(t,5);break;case 4:Os(t,10);break;case 3:Os(t,6);break;default:Os(t,2)}}}function hC(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Os(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=xt(t.pb,t);n||(n=new zs("//www.google.com/images/cleardot.gif"),ne.location&&ne.location.protocol=="http"||rf(n,"https"),fp(n)),o4(n.toString(),r)}else Bt(2);t.H=0,t.h&&t.h.za(e),dC(t),oC(t)}q.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Bt(2)):(this.l.info("Failed to ping google.com"),Bt(1))};function dC(t){if(t.H=0,t.ma=[],t.h){const e=XP(t.i);(e.length!=0||t.j.length!=0)&&(qT(t.ma,e),qT(t.ma,t.j),t.i.i.length=0,Dv(t.j),t.j.length=0),t.h.ya()}}function fC(t,e,n){var r=n instanceof zs?Hr(n):new zs(n);if(r.g!="")e&&(r.g=e+"."+r.g),sf(r,r.m);else{var i=ne.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new zs(null);r&&rf(s,r),e&&(s.g=e),i&&sf(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Pe(r,n,e),Pe(r,"VER",t.ra),Bc(t,r),r}function pC(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Ge(new pp({ob:n})):new Ge(t.va),e.Oa(t.J),e}q.isActive=function(){return!!this.h&&this.h.isActive(this)};function mC(){}q=mC.prototype;q.Ba=function(){};q.Aa=function(){};q.za=function(){};q.ya=function(){};q.isActive=function(){return!0};q.Va=function(){};function af(){if(ba&&!(10<=Number(AU)))throw Error("Environmental error: no available transport.")}af.prototype.g=function(t,e){return new gn(t,e)};function gn(t,e){pt.call(this),this.g=new sC(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ju(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ju(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new sl(this)}mt(gn,pt);gn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Bt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=fC(t,null,t.Y),yp(t)};gn.prototype.close=function(){Yv(this.g)};gn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Uv(t),t=n);e.j.push(new t4(e.fb++,t)),e.H==3&&yp(e)};gn.prototype.N=function(){this.g.h=null,delete this.j,Yv(this.g),delete this.g,gn.$.N.call(this)};function gC(t){Wv.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}mt(gC,Wv);function _C(){Hv.call(this),this.status=1}mt(_C,Hv);function sl(t){this.g=t}mt(sl,mC);sl.prototype.Ba=function(){At(this.g,"a")};sl.prototype.Aa=function(t){At(this.g,new gC(t))};sl.prototype.za=function(t){At(this.g,new _C)};sl.prototype.ya=function(){At(this.g,"b")};function f4(){this.blockSize=-1}function Jn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}mt(Jn,f4);Jn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function eg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Jn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)eg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){eg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){eg(this,r),i=0;break}}this.h=i,this.i+=e};Jn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ie(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var p4={};function Zv(t){return-128<=t&&128>t?IU(t,function(e){return new Ie([e|0],0>e?-1:0)}):new Ie([t|0],0>t?-1:0)}function ur(t){if(isNaN(t)||!isFinite(t))return ma;if(0>t)return Et(ur(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=E_;return new Ie(e,0)}function yC(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Et(yC(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ur(Math.pow(e,8)),r=ma,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=ur(Math.pow(e,s)),r=r.R(s).add(ur(o))):(r=r.R(n),r=r.add(ur(o)))}return r}var E_=4294967296,ma=Zv(0),I_=Zv(1),t0=Zv(16777216);q=Ie.prototype;q.ea=function(){if(Pn(this))return-Et(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:E_+r)*e,e*=E_}return t};q.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Dr(this))return"0";if(Pn(this))return"-"+Et(this).toString(t);for(var e=ur(Math.pow(t,6)),n=this,r="";;){var i=uf(n,e).g;n=lf(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Dr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};q.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Dr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Pn(t){return t.h==-1}q.X=function(t){return t=lf(this,t),Pn(t)?-1:Dr(t)?0:1};function Et(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ie(n,~t.h).add(I_)}q.abs=function(){return Pn(this)?Et(this):this};q.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ie(n,n[n.length-1]&-2147483648?-1:0)};function lf(t,e){return t.add(Et(e))}q.R=function(t){if(Dr(this)||Dr(t))return ma;if(Pn(this))return Pn(t)?Et(this).R(Et(t)):Et(Et(this).R(t));if(Pn(t))return Et(this.R(Et(t)));if(0>this.X(t0)&&0>t.X(t0))return ur(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,l=t.D(i)&65535;n[2*r+2*i]+=o*l,Bh(n,2*r+2*i),n[2*r+2*i+1]+=s*l,Bh(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Bh(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Bh(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ie(n,0)};function Bh(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Fl(t,e){this.g=t,this.h=e}function uf(t,e){if(Dr(e))throw Error("division by zero");if(Dr(t))return new Fl(ma,ma);if(Pn(t))return e=uf(Et(t),e),new Fl(Et(e.g),Et(e.h));if(Pn(e))return e=uf(t,Et(e)),new Fl(Et(e.g),e.h);if(30<t.g.length){if(Pn(t)||Pn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=I_,r=e;0>=r.X(t);)n=n0(n),r=n0(r);var i=Oo(n,1),s=Oo(r,1);for(r=Oo(r,2),n=Oo(n,2);!Dr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Oo(r,1),n=Oo(n,1)}return e=lf(t,i.R(e)),new Fl(i,e)}for(i=ma;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=ur(n),o=s.R(e);Pn(o)||0<o.X(t);)n-=r,s=ur(n),o=s.R(e);Dr(s)&&(s=I_),i=i.add(s),t=lf(t,o)}return new Fl(i,t)}q.gb=function(t){return uf(this,t).h};q.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ie(n,this.h&t.h)};q.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ie(n,this.h|t.h)};q.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ie(n,this.h^t.h)};function n0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ie(n,t.h)}function Oo(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ie(i,t.h)}af.prototype.createWebChannel=af.prototype.g;gn.prototype.send=gn.prototype.u;gn.prototype.open=gn.prototype.m;gn.prototype.close=gn.prototype.close;cp.NO_ERROR=0;cp.TIMEOUT=8;cp.HTTP_ERROR=6;VP.COMPLETE="complete";LP.EventType=Mc;Mc.OPEN="a";Mc.CLOSE="b";Mc.ERROR="c";Mc.MESSAGE="d";pt.prototype.listen=pt.prototype.O;Ge.prototype.listenOnce=Ge.prototype.P;Ge.prototype.getLastError=Ge.prototype.Sa;Ge.prototype.getLastErrorCode=Ge.prototype.Ia;Ge.prototype.getStatus=Ge.prototype.da;Ge.prototype.getResponseJson=Ge.prototype.Wa;Ge.prototype.getResponseText=Ge.prototype.ja;Ge.prototype.send=Ge.prototype.ha;Ge.prototype.setWithCredentials=Ge.prototype.Oa;Jn.prototype.digest=Jn.prototype.l;Jn.prototype.reset=Jn.prototype.reset;Jn.prototype.update=Jn.prototype.j;Ie.prototype.add=Ie.prototype.add;Ie.prototype.multiply=Ie.prototype.R;Ie.prototype.modulo=Ie.prototype.gb;Ie.prototype.compare=Ie.prototype.X;Ie.prototype.toNumber=Ie.prototype.ea;Ie.prototype.toString=Ie.prototype.toString;Ie.prototype.getBits=Ie.prototype.D;Ie.fromNumber=ur;Ie.fromString=yC;var m4=function(){return new af},g4=function(){return up()},tg=cp,_4=VP,y4=mo,r0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},jh=LP,v4=Ge,w4=Jn,ga=Ie,E4={};const i0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="10.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new qf("@firebase/firestore");function $o(){return $i.logLevel}function I4(t){$i.setLogLevel(t)}function L(t,...e){if($i.logLevel<=oe.DEBUG){const n=e.map(ew);$i.debug(`Firestore (${ol}): ${t}`,...n)}}function et(t,...e){if($i.logLevel<=oe.ERROR){const n=e.map(ew);$i.error(`Firestore (${ol}): ${t}`,...n)}}function Xn(t,...e){if($i.logLevel<=oe.WARN){const n=e.map(ew);$i.warn(`Firestore (${ol}): ${t}`,...n)}}function ew(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(t="Unexpected state"){const e=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: `+t;throw et(e),new Error(e)}function Y(t,e){t||H()}function T4(t,e){t||H()}function z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class V extends zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class S4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class A4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class R4{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new dt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dt,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new vC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new ct(e)}}class P4{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C4{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new P4(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k4{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Y(typeof n.token=="string"),this.R=n.token,new b4(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=x4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function ka(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function EC(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new V(b.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(b.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new De(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new De(0,0))}static max(){return new J(new De(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n,r){n===void 0?n=0:n>e.length&&H(),r===void 0?r=e.length-n:r>e.length-n&&H(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends sc{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const N4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xe extends sc{construct(e,n,r){return new xe(e,n,r)}static isValidIdentifier(e){return N4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(b.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new V(b.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(b.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xe(n)}static emptyPath(){return new xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.path=e}static fromPath(e){return new j(fe.fromString(e))}static fromName(e){return new j(fe.fromString(e).popFirst(5))}static empty(){return new j(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new j(new fe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function T_(t){return t.fields.find(e=>e.kind===2)}function Ts(t){return t.fields.filter(e=>e.kind!==2)}cf.UNKNOWN_ID=-1;class hd{constructor(e,n){this.fieldPath=e,this.kind=n}}class oc{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new oc(0,_n.min())}}function IC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new De(n+1,0):new De(n,r));return new _n(i,j.empty(),e)}function TC(t){return new _n(t.readTime,t.key,-1)}class _n{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _n(J.min(),j.empty(),-1)}static max(){return new _n(J.max(),j.empty(),-1)}}function tw(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=j.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t){if(t.code!==b.FAILED_PRECONDITION||t.message!==SC)throw t;L("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new P((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof P?n:P.resolve(n)}catch(n){return P.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):P.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):P.reject(n)}static resolve(e){return new P((n,r)=>{n(e)})}static reject(e){return new P((n,r)=>{r(e)})}static waitFor(e){return new P((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=P.resolve(!1);for(const r of e)n=n.next(i=>i?P.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new P((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new P((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new dt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new _u(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=nw(r.target.error);this.V.reject(new _u(e,i))}}static open(e,n,r,i){try{return new vp(n,e.transaction(i,r))}catch(s){throw new _u(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(L("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new O4(n)}}class Wn{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Wn.S(Be())===12.2&&et("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return L("SimpleDb","Removing database:",e),Ss(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!zu())return!1;if(Wn.C())return!0;const e=Be(),n=Wn.S(e),r=0<n&&n<10,i=Wn.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=E4)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(L("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new _u(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new V(b.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new V(b.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new _u(e,o))},i.onupgradeneeded=s=>{L("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{L("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.O(e);const a=vp.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),P.reject(u))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(L("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class D4{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ss(this.k.delete())}}class _u extends V{constructor(e,n){super(b.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ns(t){return t.name==="IndexedDbTransactionError"}class O4{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(L("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(L("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ss(r)}add(e){return L("SimpleDb","ADD",this.store.name,e,e),Ss(this.store.add(e))}get(e){return Ss(this.store.get(e)).next(n=>(n===void 0&&(n=null),L("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return L("SimpleDb","DELETE",this.store.name,e),Ss(this.store.delete(e))}count(){return L("SimpleDb","COUNT",this.store.name),Ss(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const i=this.cursor(r),s=[];return this.G(i,(o,a)=>{s.push(a)}).next(()=>s)}{const i=this.store.getAll(r.range);return new P((s,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new P((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){L("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new P((r,i)=>{n.onerror=s=>{const o=nw(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){const r=[];return new P((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new D4(a),u=n(a.primaryKey,a.value,l);if(u instanceof P){const c=u.catch(d=>(l.done(),P.reject(d)));r.push(c)}l.isDone?i():l.$===null?a.continue():a.continue(l.$)}}).next(()=>P.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ss(t){return new P((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=nw(r.target.error);n(i)}})}let s0=!1;function nw(t){const e=Wn.S(Be());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return s0||(s0=!0,setTimeout(()=>{throw r},0)),r}}return t}class V4{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){L("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{L("IndexBackiller",`Documents written: ${await this.X.te()}`)}catch(n){ns(n)?L("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await ts(n)}await this.ee(6e4)})}}class L4{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,s=!0;return P.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return L("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(L("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=TC(s);tw(o,r)>0&&(r=o)}),new _n(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}nn._e=-1;function jc(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function RC(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o0(e)),e=M4(t.get(n),e);return o0(e)}function M4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function o0(t){return t+""}function cr(t){const e=t.length;if(Y(e>=2),e===2)return Y(t.charAt(0)===""&&t.charAt(1)===""),fe.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&H(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:H()}s=o+2}return new fe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t,e){return[t,qt(e)]}function PC(t,e,n){return[t,qt(e),n]}const F4={},$4=["prefixPath","collectionGroup","readTime","documentId"],U4=["prefixPath","collectionGroup","documentId"],B4=["collectionGroup","readTime","prefixPath","documentId"],j4=["canonicalId","targetId"],z4=["targetId","path"],q4=["path","targetId"],W4=["collectionId","parent"],H4=["indexId","uid"],G4=["uid","sequenceNumber"],K4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Q4=["indexId","uid","orderedDocumentKey"],Y4=["userId","collectionPath","documentId"],J4=["userId","collectionPath","largestBatchId"],X4=["userId","collectionGroup","largestBatchId"],CC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Z4=[...CC,"documentOverlays"],bC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kC=bC,eB=[...kC,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends AC{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function gt(t,e){const n=z(t);return Wn.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function go(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zh(this.root,e,this.comparator,!1)}getReverseIterator(){return new zh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zh(this.root,e,this.comparator,!0)}}class zh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??wt.RED,this.left=i??wt.EMPTY,this.right=s??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,n,r,i,s){return this}insert(e,n,r){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Te)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Te(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Vo(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.fields=e,e.sort(xe.comparator)}static empty(){return new rn([])}unionWith(e){let n=new Te(xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tB(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new NC("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const nB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(t){if(Y(!!t),typeof t=="string"){let e=0;const n=nB.exec(t);if(Y(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Bi(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rw(t){const e=t.mapValue.fields.__previous_value__;return wp(e)?rw(e):e}function lc(t){const e=Ui(t.mapValue.fields.__local_write_time__.timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class ji{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ji("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ji&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},fd={nullValue:"NULL_VALUE"};function Xs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wp(t)?4:DC(t)?9007199254740991:10:H()}function vr(t,e){if(t===e)return!0;const n=Xs(t);if(n!==Xs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ui(i.timestampValue),a=Ui(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Bi(i.bytesValue).isEqual(Bi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=qe(i.doubleValue),a=qe(s.doubleValue);return o===a?ac(o)===ac(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ka(t.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(l0(o)!==l0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vr(o[l],a[l])))return!1;return!0}(t,e);default:return H()}}function uc(t,e){return(t.values||[]).find(n=>vr(n,e))!==void 0}function zi(t,e){if(t===e)return 0;const n=Xs(t),r=Xs(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=qe(s.integerValue||s.doubleValue),l=qe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return c0(t.timestampValue,e.timestampValue);case 4:return c0(lc(t),lc(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Bi(s),l=Bi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=re(a[u],l[u]);if(c!==0)return c}return re(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=re(qe(s.latitude),qe(o.latitude));return a!==0?a:re(qe(s.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=zi(a[u],l[u]);if(c)return c}return re(a.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===yi.mapValue&&o===yi.mapValue)return 0;if(s===yi.mapValue)return 1;if(o===yi.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=re(l[d],c[d]);if(f!==0)return f;const m=zi(a[l[d]],u[c[d]]);if(m!==0)return m}return re(l.length,c.length)}(t.mapValue,e.mapValue);default:throw H()}}function c0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Ui(t),r=Ui(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function xa(t){return A_(t)}function A_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ui(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Bi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return j.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=A_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${A_(n.fields[o])}`;return i+"}"}(t.mapValue):H()}function Zs(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function R_(t){return!!t&&"integerValue"in t}function cc(t){return!!t&&"arrayValue"in t}function h0(t){return!!t&&"nullValue"in t}function d0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pd(t){return!!t&&"mapValue"in t}function yu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return go(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function iB(t){return"nullValue"in t?fd:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zs(ji.empty(),j.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:H()}function sB(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zs(ji.empty(),j.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?yi:H()}function f0(t,e){const n=zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function p0(t,e){const n=zi(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(n)}setAll(e){let n=xe.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=yu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){go(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(yu(this.value))}}function OC(t){const e=[];return go(t.fields,(n,r)=>{const i=new xe([n]);if(pd(r)){const s=OC(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ce(e,0,J.min(),J.min(),J.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new Ce(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new Ce(e,2,n,J.min(),J.min(),It.empty(),0)}static newUnknownDocument(e,n){return new Ce(e,3,n,J.min(),J.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ce&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ce(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.position=e,this.inclusive=n}}function m0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=j.comparator(j.fromName(o.referenceValue),n.key):r=zi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function g0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,n="asc"){this.field=e,this.dir=n}}function oB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class ae extends VC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aB(e,n,r):n==="array-contains"?new cB(e,r):n==="in"?new BC(e,r):n==="not-in"?new hB(e,r):n==="array-contains-any"?new dB(e,r):new ae(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lB(e,r):new uB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zi(n,this.value)):n!==null&&Xs(this.value)===Xs(n)&&this.matchesComparison(zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class we extends VC{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new we(e,n)}matches(e){return Na(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Na(t){return t.op==="and"}function P_(t){return t.op==="or"}function iw(t){return LC(t)&&Na(t)}function LC(t){for(const e of t.filters)if(e instanceof we)return!1;return!0}function C_(t){if(t instanceof ae)return t.field.canonicalString()+t.op.toString()+xa(t.value);if(iw(t))return t.filters.map(e=>C_(e)).join(",");{const e=t.filters.map(n=>C_(n)).join(",");return`${t.op}(${e})`}}function MC(t,e){return t instanceof ae?function(r,i){return i instanceof ae&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(t,e):t instanceof we?function(r,i){return i instanceof we&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&MC(o,i.filters[a]),!0):!1}(t,e):void H()}function FC(t,e){const n=t.filters.concat(e);return we.create(n,t.op)}function $C(t){return t instanceof ae?function(n){return`${n.field.canonicalString()} ${n.op} ${xa(n.value)}`}(t):t instanceof we?function(n){return n.op.toString()+" {"+n.getFilters().map($C).join(" ,")+"}"}(t):"Filter"}class aB extends ae{constructor(e,n,r){super(e,n,r),this.key=j.fromName(r.referenceValue)}matches(e){const n=j.comparator(e.key,this.key);return this.matchesComparison(n)}}class lB extends ae{constructor(e,n){super(e,"in",n),this.keys=UC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uB extends ae{constructor(e,n){super(e,"not-in",n),this.keys=UC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function UC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>j.fromName(r.referenceValue))}class cB extends ae{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cc(n)&&uc(n.arrayValue,this.value)}}class BC extends ae{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uc(this.value.arrayValue,n)}}class hB extends ae{constructor(e,n){super(e,"not-in",n)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!uc(this.value.arrayValue,n)}}class dB extends ae{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>uc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fB{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function b_(t,e=null,n=[],r=[],i=null,s=null,o=null){return new fB(t,e,n,r,i,s,o)}function eo(t){const e=z(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>C_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xa(r)).join(",")),e.ce=n}return e.ce}function zc(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g0(t.startAt,e.startAt)&&g0(t.endAt,e.endAt)}function hf(t){return j.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function df(t,e){return t.filters.filter(n=>n instanceof ae&&n.field.isEqual(e))}function _0(t,e,n){let r=fd,i=!0;for(const s of df(t,e)){let o=fd,a=!0;switch(s.op){case"<":case"<=":o=iB(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=fd}f0({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];f0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function y0(t,e,n){let r=yi,i=!0;for(const s of df(t,e)){let o=yi,a=!0;switch(s.op){case">=":case">":o=sB(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=yi}p0({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];p0({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function jC(t,e,n,r,i,s,o,a){return new Zr(t,e,n,r,i,s,o,a)}function al(t){return new Zr(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sw(t){return t.collectionGroup!==null}function _a(t){const e=z(t);if(e.le===null){e.le=[];const n=new Set;for(const s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Te(xe.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new hc(s,r))}),n.has(xe.keyField().canonicalString())||e.le.push(new hc(xe.keyField(),r))}return e.le}function Wt(t){const e=z(t);return e.he||(e.he=pB(e,_a(t))),e.he}function pB(t,e){if(t.limitType==="F")return b_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hc(i.field,s)});const n=t.endAt?new qi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qi(t.startAt.position,t.startAt.inclusive):null;return b_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function k_(t,e){const n=t.filters.concat([e]);return new Zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ff(t,e,n){return new Zr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qc(t,e){return zc(Wt(t),Wt(e))&&t.limitType===e.limitType}function zC(t){return`${eo(Wt(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$C(i)).join(", ")}]`),jc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xa(i)).join(",")),`Target(${r})`}(Wt(t))}; limitType=${t.limitType})`}function Wc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):j.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of _a(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=m0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,_a(r),i)||r.endAt&&!function(o,a,l){const u=m0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,_a(r),i))}(t,e)}function qC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function WC(t){return(e,n)=>{let r=!1;for(const i of _a(t)){const s=mB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mB(t,e,n){const r=t.field.isKeyField()?j.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?zi(l,u):H()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){go(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB=new Ae(j.comparator);function sn(){return gB}const HC=new Ae(j.comparator);function tu(...t){let e=HC;for(const n of t)e=e.insert(n.key,n);return e}function GC(t){let e=HC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hr(){return vu()}function KC(){return vu()}function vu(){return new rs(t=>t.toString(),(t,e)=>t.isEqual(e))}const _B=new Ae(j.comparator),yB=new Te(j.comparator);function se(...t){let e=yB;for(const n of t)e=e.add(n);return e}const vB=new Te(re);function ow(){return vB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function YC(t){return{integerValue:""+t}}function JC(t,e){return RC(e)?YC(e):QC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(){this._=void 0}}function wB(t,e,n){return t instanceof Da?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wp(s)&&(s=rw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof to?ZC(t,e):t instanceof no?eb(t,e):function(i,s){const o=XC(i,s),a=w0(o)+w0(i.Ie);return R_(o)&&R_(i.Ie)?YC(a):QC(i.serializer,a)}(t,e)}function EB(t,e,n){return t instanceof to?ZC(t,e):t instanceof no?eb(t,e):n}function XC(t,e){return t instanceof Oa?function(r){return R_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Da extends Ep{}class to extends Ep{constructor(e){super(),this.elements=e}}function ZC(t,e){const n=tb(e);for(const r of t.elements)n.some(i=>vr(i,r))||n.push(r);return{arrayValue:{values:n}}}class no extends Ep{constructor(e){super(),this.elements=e}}function eb(t,e){let n=tb(e);for(const r of t.elements)n=n.filter(i=>!vr(i,r));return{arrayValue:{values:n}}}class Oa extends Ep{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function w0(t){return qe(t.integerValue||t.doubleValue)}function tb(t){return cc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.field=e,this.transform=n}}function IB(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof to&&i instanceof to||r instanceof no&&i instanceof no?ka(r.elements,i.elements,vr):r instanceof Oa&&i instanceof Oa?vr(r.Ie,i.Ie):r instanceof Da&&i instanceof Da}(t.transform,e.transform)}class TB{constructor(e,n){this.version=e,this.transformResults=n}}class Ne{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ne}static exists(e){return new Ne(void 0,e)}static updateTime(e){return new Ne(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ip{}function nb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ul(t.key,Ne.none()):new ll(t.key,t.data,Ne.none());{const n=t.data,r=It.empty();let i=new Te(xe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ei(t.key,r,new rn(i.toArray()),Ne.none())}}function SB(t,e,n){t instanceof ll?function(i,s,o){const a=i.value.clone(),l=I0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ei?function(i,s,o){if(!md(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=I0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(rb(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wu(t,e,n,r){return t instanceof ll?function(s,o,a,l){if(!md(s.precondition,o))return a;const u=s.value.clone(),c=T0(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ei?function(s,o,a,l){if(!md(s.precondition,o))return a;const u=T0(s.fieldTransforms,l,o),c=o.data;return c.setAll(rb(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return md(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function AB(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=XC(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function E0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ka(r,i,(s,o)=>IB(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ll extends Ip{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ei extends Ip{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rb(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I0(t,e,n){const r=new Map;Y(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,EB(o,a,n[i]))}return r}function T0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,wB(s,o,e))}return r}class ul extends Ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aw extends Ip{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&SB(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KC();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=nb(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,(n,r)=>E0(n,r))&&ka(this.baseMutations,e.baseMutations,(n,r)=>E0(n,r))}}class uw{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Y(e.mutations.length===r.length);let i=function(){return _B}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new uw(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,he;function ib(t){switch(t){default:return H();case b.CANCELLED:case b.UNKNOWN:case b.DEADLINE_EXCEEDED:case b.RESOURCE_EXHAUSTED:case b.INTERNAL:case b.UNAVAILABLE:case b.UNAUTHENTICATED:return!1;case b.INVALID_ARGUMENT:case b.NOT_FOUND:case b.ALREADY_EXISTS:case b.PERMISSION_DENIED:case b.FAILED_PRECONDITION:case b.ABORTED:case b.OUT_OF_RANGE:case b.UNIMPLEMENTED:case b.DATA_LOSS:return!0}}function sb(t){if(t===void 0)return et("GRPC error has no .code"),b.UNKNOWN;switch(t){case nt.OK:return b.OK;case nt.CANCELLED:return b.CANCELLED;case nt.UNKNOWN:return b.UNKNOWN;case nt.DEADLINE_EXCEEDED:return b.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return b.RESOURCE_EXHAUSTED;case nt.INTERNAL:return b.INTERNAL;case nt.UNAVAILABLE:return b.UNAVAILABLE;case nt.UNAUTHENTICATED:return b.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return b.INVALID_ARGUMENT;case nt.NOT_FOUND:return b.NOT_FOUND;case nt.ALREADY_EXISTS:return b.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return b.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return b.FAILED_PRECONDITION;case nt.ABORTED:return b.ABORTED;case nt.OUT_OF_RANGE:return b.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return b.UNIMPLEMENTED;case nt.DATA_LOSS:return b.DATA_LOSS;default:return H()}}(he=nt||(nt={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new ga([4294967295,4294967295],0);function S0(t){const e=ob().encode(t),n=new w4;return n.update(e),new Uint8Array(n.digest())}function A0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ga([n,r],0),new ga([i,s],0)]}class hw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new nu(`Invalid padding: ${n}`);if(r<0)throw new nu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new nu(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=ga.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(ga.fromNumber(r)));return i.compare(PB)===1&&(i=new ga([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=S0(e),[r,i]=A0(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hw(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=S0(e),[r,i]=A0(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gc(J.min(),i,new Ae(re),sn(),se())}}class Kc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kc(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class ab{constructor(e,n){this.targetId=e,this.fe=n}}class lb{constructor(e,n,r=at.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class R0{constructor(){this.ge=0,this.pe=C0(),this.ye=at.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=se(),n=se(),r=se();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:H()}}),new Kc(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=C0()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Y(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class CB{constructor(e){this.Le=e,this.ke=new Map,this.qe=sn(),this.Qe=P0(),this.Ke=new Ae(re)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:H()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const s=i.target;if(hf(s))if(r===0){const o=new j(s.path);this.We(n,o,Ce.newNoDocument(o,J.min()))}else Y(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Bi(r).toUint8Array()}catch(l){if(l instanceof NC)return Xn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hw(o,i,s)}catch(l){return Xn(l instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&hf(a.target)){const l=new j(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,Ce.newNoDocument(l,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=se();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Ye(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new Gc(e,n,this.Ke,this.qe,r);return this.qe=sn(),this.Qe=P0(),this.Ke=new Ae(re),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new R0,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Te(re),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||L("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new R0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function P0(){return new Ae(j.comparator)}function C0(){return new Ae(j.comparator)}const bB={asc:"ASCENDING",desc:"DESCENDING"},kB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xB={and:"AND",or:"OR"};class NB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function x_(t,e){return t.useProto3Json||jc(e)?e:{value:e}}function Va(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ub(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DB(t,e){return Va(t,e.toTimestamp())}function tt(t){return Y(!!t),J.fromTimestamp(function(n){const r=Ui(n);return new De(r.seconds,r.nanos)}(t))}function dw(t,e){return function(r){return new fe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function cb(t){const e=fe.fromString(t);return Y(vb(e)),e}function dc(t,e){return dw(t.databaseId,e.path)}function mr(t,e){const n=cb(e);if(n.get(1)!==t.databaseId.projectId)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new V(b.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new j(db(n))}function N_(t,e){return dw(t.databaseId,e)}function hb(t){const e=cb(t);return e.length===4?fe.emptyPath():db(e)}function fc(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function db(t){return Y(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function b0(t,e,n){return{name:dc(t,e),fields:n.value.mapValue.fields}}function fb(t,e,n){const r=mr(t,e.name),i=tt(e.updateTime),s=e.createTime?tt(e.createTime):J.min(),o=new It({mapValue:{fields:e.fields}}),a=Ce.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function OB(t,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;const s=mr(r,i.found.name),o=tt(i.found.updateTime),a=i.found.createTime?tt(i.found.createTime):J.min(),l=new It({mapValue:{fields:i.found.fields}});return Ce.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);const s=mr(r,i.missing),o=tt(i.readTime);return Ce.newNoDocument(s,o)}(t,e):H()}function VB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(Y(c===void 0||typeof c=="string"),at.fromBase64String(c||"")):(Y(c===void 0||c instanceof Uint8Array),at.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?b.UNKNOWN:sb(u.code);return new V(c,u.message||"")}(o);n=new lb(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=mr(t,r.document.name),s=tt(r.document.updateTime),o=r.document.createTime?tt(r.document.createTime):J.min(),a=new It({mapValue:{fields:r.document.fields}}),l=Ce.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new gd(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=mr(t,r.document),s=r.readTime?tt(r.readTime):J.min(),o=Ce.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=mr(t,r.document),s=r.removedTargetIds||[];n=new gd([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RB(i,s),a=r.targetId;n=new ab(a,o)}}return n}function pc(t,e){let n;if(e instanceof ll)n={update:b0(t,e.key,e.value)};else if(e instanceof ul)n={delete:dc(t,e.key)};else if(e instanceof ei)n={update:b0(t,e.key,e.data),updateMask:BB(e.fieldMask)};else{if(!(e instanceof aw))return H();n={verify:dc(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof to)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof no)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Oa)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw H()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:DB(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(t,e.precondition)),n}function D_(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ne.updateTime(tt(s.updateTime)):s.exists!==void 0?Ne.exists(s.exists):Ne.none()}(e.currentDocument):Ne.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),l=new Da;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];l=new to(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];l=new no(c)}else"increment"in a?l=new Oa(o,a.increment):H();const u=xe.fromServerFormat(a.fieldPath);return new Hc(u,l)}(t,i)):[];if(e.update){e.update.name;const i=mr(t,e.update.name),s=new It({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const u=l.fieldPaths||[];return new rn(u.map(c=>xe.fromServerFormat(c)))}(e.updateMask);return new ei(i,s,o,n,r)}return new ll(i,s,n,r)}if(e.delete){const i=mr(t,e.delete);return new ul(i,n)}if(e.verify){const i=mr(t,e.verify);return new aw(i,n)}return H()}function LB(t,e){return t&&t.length>0?(Y(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?tt(i.updateTime):tt(s);return o.isEqual(J.min())&&(o=tt(s)),new TB(o,i.transformResults||[])}(n,e))):[]}function pb(t,e){return{documents:[N_(t,e.path)]}}function mb(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=N_(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=N_(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length!==0)return yb(we.create(l,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(l){if(l.length!==0)return l.map(u=>function(d){return{field:Bo(d.field),direction:FB(d.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=x_(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function gb(t){let e=hb(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Y(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=_b(d);return f instanceof we&&iw(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(w){return new hc(jo(w.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,jc(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new qi(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new qi(m,f)}(n.endAt)),jC(e,i,o,s,a,"F",l,u)}function MB(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _b(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=jo(n.unaryFilter.field);return ae.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=jo(n.unaryFilter.field);return ae.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jo(n.unaryFilter.field);return ae.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=jo(n.unaryFilter.field);return ae.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(t):t.fieldFilter!==void 0?function(n){return ae.create(jo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return we.create(n.compositeFilter.filters.map(r=>_b(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(n.compositeFilter.op))}(t):H()}function FB(t){return bB[t]}function $B(t){return kB[t]}function UB(t){return xB[t]}function Bo(t){return{fieldPath:t.canonicalString()}}function jo(t){return xe.fromServerFormat(t.fieldPath)}function yb(t){return t instanceof ae?function(n){if(n.op==="=="){if(d0(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NAN"}};if(h0(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(d0(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NAN"}};if(h0(n.value))return{unaryFilter:{field:Bo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(n.field),op:$B(n.op),value:n.value}}}(t):t instanceof we?function(n){const r=n.getFilters().map(i=>yb(i));return r.length===1?r[0]:{compositeFilter:{op:UB(n.op),filters:r}}}(t):H()}function BB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,i,s=J.min(),o=J.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e){this.ut=e}}function jB(t,e){let n;if(e.document)n=fb(t.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=j.fromSegments(e.noDocument.path),i=io(e.noDocument.readTime);n=Ce.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{const r=j.fromSegments(e.unknownDocument.path),i=io(e.unknownDocument.version);n=Ce.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new De(i[0],i[1]);return J.fromTimestamp(s)}(e.readTime)),n}function k0(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:pf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:dc(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Va(s,o.version.toTimestamp()),createTime:Va(s,o.createTime.toTimestamp())}}(t.ut,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ro(e.version)};else{if(!e.isUnknownDocument())return H();r.unknownDocument={path:n.path.toArray(),version:ro(e.version)}}return r}function pf(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ro(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function io(t){const e=new De(t.seconds,t.nanoseconds);return J.fromTimestamp(e)}function As(t,e){const n=(e.baseMutations||[]).map(s=>D_(t.ut,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>D_(t.ut,s)),i=De.fromMillis(e.localWriteTimeMs);return new lw(e.batchId,i,n,r)}function ru(t){const e=io(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?io(t.lastLimboFreeSnapshotVersion):J.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return Y(s.documents.length===1),Wt(al(hb(s.documents[0])))}(t.query):function(s){return Wt(gb(s))}(t.query),new Or(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,at.fromBase64String(t.resumeToken))}function Eb(t,e){const n=ro(e.snapshotVersion),r=ro(e.lastLimboFreeSnapshotVersion);let i;i=hf(e.target)?pb(t.ut,e.target):mb(t.ut,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fw(t){const e=gb({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ff(e,e.limit,"L"):e}function ng(t,e){return new cw(e.largestBatchId,D_(t.ut,e.overlayMutation))}function x0(t,e){const n=e.path.lastSegment();return[t,qt(e.path.popLast()),n]}function N0(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:ro(r.readTime),documentKey:qt(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{getBundleMetadata(e,n){return D0(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:io(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return D0(e).put(function(i){return{bundleId:i.id,createTime:ro(tt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return O0(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:fw(s.bundledQuery),readTime:io(s.readTime)}}(r)})}saveNamedQuery(e,n){return O0(e).put(function(i){return{name:i.name,readTime:ro(tt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function D0(t){return gt(t,"bundles")}function O0(t){return gt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n){this.serializer=e,this.userId=n}static ct(e,n){const r=n.uid||"";return new Tp(e,r)}getOverlay(e,n){return $l(e).get(x0(this.userId,n)).next(r=>r?ng(this.serializer,r):null)}getOverlays(e,n){const r=hr();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new cw(n,o);i.push(this.lt(e,a))}),P.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(qt(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push($l(e).H("collectionPathOverlayIndex",a))}),P.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hr(),s=qt(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return $l(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=ng(this.serializer,l);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return $l(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const d=ng(this.serializer,u);s.size()<i||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):c.done()}).next(()=>s)}lt(e,n){return $l(e).put(function(i,s,o){const[a,l,u]=x0(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:pc(i.ut,o.mutation)}}(this.serializer,this.userId,n))}}function $l(t){return gt(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(qe(e.integerValue));else if("doubleValue"in e){const r=qe(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ac(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Tt(n,20),typeof r=="string"?n.dt(r):(n.dt(`${r.seconds||""}`),n.Et(r.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(Bi(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?DC(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):H()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){const r=e.fields||{};this.Tt(n,55);for(const i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){const r=e.values||[];this.Tt(n,50);for(const i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),j.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}}Rs.St=new Rs;function qB(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function V0(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=qB(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class WB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Dt(r.value),r=n.next();this.Ct()}vt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Dt(r);else if(r<2048)this.Dt(960|r>>>6),this.Dt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Dt(480|r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r);else{const i=n.codePointAt(0);this.Dt(240|i>>>18),this.Dt(128|63&i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i)}}this.Ct()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Nt(e){const n=this.Bt(e),r=V0(n);this.Lt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}kt(e){const n=this.Bt(e),r=V0(n);this.Lt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Dt(e){const n=255&e;n===0?(this.Qt(0),this.Qt(255)):n===255?(this.Qt(255),this.Qt(0)):this.Qt(n)}Ft(e){const n=255&e;n===0?(this.$t(0),this.$t(255)):n===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class HB{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class GB{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class Ul{constructor(){this.Wt=new WB,this.Gt=new HB(this.Wt),this.zt=new GB(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Ht(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ps(this.indexId,this.documentKey,this.arrayValue,r)}}function ai(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=L0(t.arrayValue,e.arrayValue),n!==0?n:(n=L0(t.directionalValue,e.directionalValue),n!==0?n:j.comparator(t.documentKey,e.documentKey)))}function L0(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){this.Jt=new Te((n,r)=>xe.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Jt=this.Jt.add(r):this.Zt.push(r)}}get Xt(){return this.Jt.size>1}en(e){if(Y(e.collectionGroup===this.collectionId),this.Xt)return!1;const n=T_(e);if(n!==void 0&&!this.tn(n))return!1;const r=Ts(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.tn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Jt.size>0){const a=this.Jt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Te(xe.comparator);const n=[];for(const r of this.Zt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new hd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new hd(r.field,0))}for(const r of this.Yt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new hd(r.field,r.dir==="asc"?0:1)));return new cf(cf.UNKNOWN_ID,this.collectionId,n,oc.empty())}tn(e){for(const n of this.Zt)if(this.nn(n,e))return!0;return!1}nn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}rn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){var e,n;if(Y(t instanceof ae||t instanceof we),t instanceof ae){if(t instanceof BC){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>ae.create(t.field,"==",s)))||[];return we.create(i,"or")}return t}const r=t.filters.map(i=>Ib(i));return we.create(r,t.op)}function KB(t){if(t.getFilters().length===0)return[];const e=L_(Ib(t));return Y(Tb(e)),O_(e)||V_(e)?[e]:e.getFilters()}function O_(t){return t instanceof ae}function V_(t){return t instanceof we&&iw(t)}function Tb(t){return O_(t)||V_(t)||function(n){if(n instanceof we&&P_(n)){for(const r of n.getFilters())if(!O_(r)&&!V_(r))return!1;return!0}return!1}(t)}function L_(t){if(Y(t instanceof ae||t instanceof we),t instanceof ae)return t;if(t.filters.length===1)return L_(t.filters[0]);const e=t.filters.map(r=>L_(r));let n=we.create(e,t.op);return n=mf(n),Tb(n)?n:(Y(n instanceof we),Y(Na(n)),Y(n.filters.length>1),n.filters.reduce((r,i)=>pw(r,i)))}function pw(t,e){let n;return Y(t instanceof ae||t instanceof we),Y(e instanceof ae||e instanceof we),n=t instanceof ae?e instanceof ae?function(i,s){return we.create([i,s],"and")}(t,e):F0(t,e):e instanceof ae?F0(e,t):function(i,s){if(Y(i.filters.length>0&&s.filters.length>0),Na(i)&&Na(s))return FC(i,s.getFilters());const o=P_(i)?i:s,a=P_(i)?s:i,l=o.filters.map(u=>pw(u,a));return we.create(l,"or")}(t,e),mf(n)}function F0(t,e){if(Na(e))return FC(e,t.getFilters());{const n=e.filters.map(r=>pw(t,r));return we.create(n,"or")}}function mf(t){if(Y(t instanceof ae||t instanceof we),t instanceof ae)return t;const e=t.getFilters();if(e.length===1)return mf(e[0]);if(LC(t))return t;const n=e.map(i=>mf(i)),r=[];return n.forEach(i=>{i instanceof ae?r.push(i):i instanceof we&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:we.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QB{constructor(){this.on=new mw}addToCollectionParentIndex(e,n){return this.on.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(_n.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(_n.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}}class mw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Te(fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Te(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Uint8Array(0);class YB{constructor(e,n){this.user=e,this.databaseId=n,this._n=new mw,this.an=new rs(r=>eo(r),(r,i)=>zc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this._n.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this._n.add(n)});const s={collectionId:r,parent:qt(i)};return $0(e).put(s)}return P.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[EC(n),""],!1,!0);return $0(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(cr(o.parent))}return r})}addFieldIndex(e,n){const r=Bl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Mo(e);return s.next(a=>{o.put(N0(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Bl(e),i=Mo(e),s=Lo(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Bl(e),r=Lo(e),i=Mo(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return P.forEach(this.un(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new M0(r).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=Lo(e);let i=!0;const s=new Map;return P.forEach(this.un(n),o=>this.cn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=se();const a=[];return P.forEach(s,(l,u)=>{L("IndexedDbIndexManager",`Using index ${function(y){return`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(S=>`${S.fieldPath}:${S.kind}`).join(",")}`}(l)} to execute ${eo(n)}`);const c=function(y,S){const A=T_(S);if(A===void 0)return null;for(const R of df(y,A.fieldPath))switch(R.op){case"array-contains-any":return R.value.arrayValue.values||[];case"array-contains":return[R.value]}return null}(u,l),d=function(y,S){const A=new Map;for(const R of Ts(S))for(const k of df(y,R.fieldPath))switch(k.op){case"==":case"in":A.set(R.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return A.set(R.fieldPath.canonicalString(),k.value),Array.from(A.values())}return null}(u,l),f=function(y,S){const A=[];let R=!0;for(const k of Ts(S)){const $=k.kind===0?_0(y,k.fieldPath,y.startAt):y0(y,k.fieldPath,y.startAt);A.push($.value),R&&(R=$.inclusive)}return new qi(A,R)}(u,l),m=function(y,S){const A=[];let R=!0;for(const k of Ts(S)){const $=k.kind===0?y0(y,k.fieldPath,y.endAt):_0(y,k.fieldPath,y.endAt);A.push($.value),R&&(R=$.inclusive)}return new qi(A,R)}(u,l),w=this.ln(l,u,f),v=this.ln(l,u,m),I=this.hn(l,u,d),_=this.Pn(l.indexId,c,w,f.inclusive,v,m.inclusive,I);return P.forEach(_,g=>r.j(g,n.limit).next(y=>{y.forEach(S=>{const A=j.fromSegments(S.documentKey);o.has(A)||(o=o.add(A),a.push(A))})}))}).next(()=>a)}return P.resolve(null)})}un(e){let n=this.an.get(e);return n||(e.filters.length===0?n=[e]:n=KB(we.create(e.filters,"and")).map(r=>b_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,n),n)}Pn(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),u=l/(n!=null?n.length:1),c=[];for(let d=0;d<l;++d){const f=n?this.In(n[d/u]):qh,m=this.Tn(e,f,r[d%u],i),w=this.En(e,f,s[d%u],o),v=a.map(I=>this.Tn(e,f,I,!0));c.push(...this.createRange(m,w,v))}return c}Tn(e,n,r,i){const s=new Ps(e,j.empty(),n,r);return i?s:s.Ht()}En(e,n,r,i){const s=new Ps(e,j.empty(),n,r);return i?s.Ht():s}cn(e,n){const r=new M0(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.un(n);return P.forEach(i,s=>this.cn(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let u=new Te(xe.comparator),c=!1;for(const d of l.filters)for(const f of d.getFlattenedFilters())f.field.isKeyField()||(f.op==="array-contains"||f.op==="array-contains-any"?c=!0:u=u.add(f.field));for(const d of l.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(c?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}dn(e,n){const r=new Ul;for(const i of Ts(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.jt(i.kind);Rs.St.ht(s,o)}return r.Ut()}In(e){const n=new Ul;return Rs.St.ht(e,n.jt(0)),n.Ut()}An(e,n){const r=new Ul;return Rs.St.ht(Zs(this.databaseId,n),r.jt(function(s){const o=Ts(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ut()}hn(e,n,r){if(r===null)return[];let i=[];i.push(new Ul);let s=0;for(const o of Ts(e)){const a=r[s++];for(const l of i)if(this.Rn(n,o.fieldPath)&&cc(a))i=this.Vn(i,o,a);else{const u=l.jt(o.kind);Rs.St.ht(a,u)}}return this.mn(i)}ln(e,n,r){return this.hn(e,n,r.position)}mn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ut();return n}Vn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ul;l.seed(a.Ut()),Rs.St.ht(o,l.jt(n.kind)),s.push(l)}return s}Rn(e,n){return!!e.filters.find(r=>r instanceof ae&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Bl(e),i=Mo(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(s=>{const o=[];return P.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(c,d){const f=d?new oc(d.sequenceNumber,new _n(io(d.readTime),new j(cr(d.documentKey)),d.largestBatchId)):oc.empty(),m=c.fields.map(([w,v])=>new hd(xe.fromServerFormat(w),v));return new cf(c.indexId,c.collectionGroup,m,f)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Bl(e),s=Mo(e);return this.fn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>P.forEach(a,l=>s.put(N0(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return P.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?P.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),P.forEach(a,l=>this.gn(e,i,l).next(u=>{const c=this.pn(s,l);return u.isEqual(c)?P.resolve():this.yn(e,s,l,u,c)}))))})}wn(e,n,r,i){return Lo(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.An(r,n.key),documentKey:n.key.path.toArray()})}Sn(e,n,r,i){return Lo(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.An(r,n.key),n.key.path.toArray()])}gn(e,n,r){const i=Lo(e);let s=new Te(ai);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.An(r,n)])},(o,a)=>{s=s.add(new Ps(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,n){let r=new Te(ai);const i=this.dn(n,e);if(i==null)return r;const s=T_(n);if(s!=null){const o=e.data.field(s.fieldPath);if(cc(o))for(const a of o.arrayValue.values||[])r=r.add(new Ps(n.indexId,e.key,this.In(a),i))}else r=r.add(new Ps(n.indexId,e.key,qh,i));return r}yn(e,n,r,i,s){L("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,u,c,d,f){const m=l.getIterator(),w=u.getIterator();let v=Vo(m),I=Vo(w);for(;v||I;){let _=!1,g=!1;if(v&&I){const y=c(v,I);y<0?g=!0:y>0&&(_=!0)}else v!=null?g=!0:_=!0;_?(d(I),I=Vo(w)):g?(f(v),v=Vo(m)):(v=Vo(m),I=Vo(w))}}(i,s,ai,a=>{o.push(this.wn(e,n,r,a))},a=>{o.push(this.Sn(e,n,r,a))}),P.waitFor(o)}fn(e){let n=1;return Mo(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ai(o,a)).filter((o,a,l)=>!a||ai(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=ai(o,e),l=ai(o,n);if(a===0)i[0]=e.Ht();else if(a>0&&l<0)i.push(o),i.push(o.Ht());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.bn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,qh,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,qh,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(e,n){return ai(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(U0)}getMinOffset(e,n){return P.mapArray(this.un(n),r=>this.cn(e,r).next(i=>i||H())).next(U0)}}function $0(t){return gt(t,"collectionParents")}function Lo(t){return gt(t,"indexEntries")}function Bl(t){return gt(t,"indexConfiguration")}function Mo(t){return gt(t,"indexState")}function U0(t){Y(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;tw(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new _n(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Xt{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},(c,d,f)=>(a++,f.delete()));s.push(l.next(()=>{Y(a===1)}));const u=[];for(const c of n.mutations){const d=PC(e,c.key.path,n.batchId);s.push(i.delete(d)),u.push(c.key)}return P.waitFor(s).next(()=>u)}function gf(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw H();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(41943040,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);class Sp{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Dn={}}static ct(e,n,r,i){Y(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Sp(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return li(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=zo(e),o=li(e);return o.add({}).next(a=>{Y(typeof a=="number");const l=new lw(a,n,r,i),u=function(m,w,v){const I=v.baseMutations.map(g=>pc(m.ut,g)),_=v.mutations.map(g=>pc(m.ut,g));return{userId:w,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:I,mutations:_}}(this.serializer,this.userId,l),c=[];let d=new Te((f,m)=>re(f.canonicalString(),m.canonicalString()));for(const f of i){const m=PC(this.userId,f.key.path,a);d=d.add(f.key.path.popLast()),c.push(o.put(u)),c.push(s.put(m,F4))}return d.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),P.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return li(e).get(n).next(r=>r?(Y(r.userId===this.userId),As(this.serializer,r)):null)}Cn(e,n){return this.Dn[n]?P.resolve(this.Dn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Dn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return li(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Y(a.batchId>=r),s=As(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return li(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return li(e).W("userMutationsIndex",n).next(r=>r.map(i=>As(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=dd(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return zo(e).Y({range:i},(o,a,l)=>{const[u,c,d]=o,f=cr(c);if(u===this.userId&&n.path.isEqual(f))return li(e).get(d).next(m=>{if(!m)throw H();Y(m.userId===this.userId),s.push(As(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Te(re);const i=[];return n.forEach(s=>{const o=dd(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=zo(e).Y({range:a},(u,c,d)=>{const[f,m,w]=u,v=cr(m);f===this.userId&&s.path.isEqual(v)?r=r.add(w):d.done()});i.push(l)}),P.waitFor(i).next(()=>this.vn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=dd(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Te(re);return zo(e).Y({range:o},(l,u,c)=>{const[d,f,m]=l,w=cr(f);d===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):c.done()}).next(()=>this.vn(e,a))}vn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(li(e).get(s).next(o=>{if(o===null)throw H();Y(o.userId===this.userId),r.push(As(this.serializer,o))}))}),P.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Sb(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Fn(n.batchId)}),P.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return P.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return zo(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=cr(s[1]);i.push(l)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,n){return Ab(e,this.userId,n)}Mn(e){return Rb(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ab(t,e,n){const r=dd(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return zo(t).Y({range:s,J:!0},(a,l,u)=>{const[c,d,f]=a;c===e&&d===i&&(o=!0),u.done()}).next(()=>o)}function li(t){return gt(t,"mutations")}function zo(t){return gt(t,"documentMutations")}function Rb(t){return gt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new so(0)}static Nn(){return new so(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{const r=new so(n.highestTargetId);return n.highestTargetId=r.next(),this.Ln(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>J.fromTimestamp(new De(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Ln(e,i)))}addTargetData(e,n){return this.kn(e,n).next(()=>this.Bn(e).next(r=>(r.targetCount+=1,this.qn(n,r),this.Ln(e,r))))}updateTargetData(e,n){return this.kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Fo(e).delete(n.targetId)).next(()=>this.Bn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Ln(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Fo(e).Y((o,a)=>{const l=ru(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>P.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Fo(e).Y((r,i)=>{const s=ru(i);n(s)})}Bn(e){return j0(e).get("targetGlobalKey").next(n=>(Y(n!==null),n))}Ln(e,n){return j0(e).put("targetGlobalKey",n)}kn(e,n){return Fo(e).put(Eb(this.serializer,n))}qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=eo(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Fo(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const u=ru(a);zc(n,u.target)&&(s=u,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=pi(e);return n.forEach(o=>{const a=qt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),P.waitFor(i)}removeMatchingKeys(e,n,r){const i=pi(e);return P.forEach(n,s=>{const o=qt(s.path);return P.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=pi(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=pi(e);let s=se();return i.Y({range:r,J:!0},(o,a,l)=>{const u=cr(o[1]),c=new j(u);s=s.add(c)}).next(()=>s)}containsKey(e,n){const r=qt(n.path),i=IDBKeyRange.bound([r],[EC(r)],!1,!0);let s=0;return pi(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}_t(e,n){return Fo(e).get(n).next(r=>r?ru(r):null)}}function Fo(t){return gt(t,"targets")}function j0(t){return gt(t,"targetGlobal")}function pi(t){return gt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z0([t,e],[n,r]){const i=re(t,n);return i===0?re(e,r):i}class XB{constructor(e){this.Qn=e,this.buffer=new Te(z0),this.Kn=0}$n(){return++this.Kn}Un(e){const n=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();z0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){L("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ns(n)?L("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await ts(n)}await this.Gn(3e5)})}}class ej{constructor(e,n){this.zn=e,this.params=n}calculateTargetCount(e,n){return this.zn.jn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(nn._e);const r=new XB(n);return this.zn.forEachTarget(e,i=>r.Un(i.sequenceNumber)).next(()=>this.zn.Hn(e,i=>r.Un(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(B0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),B0):this.Jn(e,n))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,n){let r,i,s,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,o=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),$o()<=oe.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function tj(t,e){return new ej(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n){this.db=e,this.garbageCollector=tj(this,n)}jn(e){const n=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Yn(e){let n=0;return this.Hn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Hn(e,n){return this.Zn(e,(r,i)=>n(i))}addReference(e,n,r){return Wh(e,r)}removeReference(e,n,r){return Wh(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Wh(e,n)}Xn(e,n){return function(i,s){let o=!1;return Rb(i).Z(a=>Ab(i,a,s).next(l=>(l&&(o=!0),P.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Zn(e,(o,a)=>{if(a<=n){const l=this.Xn(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,J.min()),pi(e).delete(function(d){return[0,qt(d.path)]}(o))))});i.push(l)}}).next(()=>P.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Wh(e,n)}Zn(e,n){const r=pi(e);let i,s=nn._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(s!==nn._e&&n(new j(cr(i)),s),s=u,i=l):s=nn._e}).next(()=>{s!==nn._e&&n(new j(cr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wh(t,e){return pi(t).put(function(r,i){return{targetId:0,path:qt(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(){this.changes=new rs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ce.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return vs(e).put(r)}removeEntry(e,n,r){return vs(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],pf(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.er(e,r)))}getEntry(e,n){let r=Ce.newInvalidDocument(n);return vs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jl(n))},(i,s)=>{r=this.tr(n,s)}).next(()=>r)}nr(e,n){let r={size:0,document:Ce.newInvalidDocument(n)};return vs(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(jl(n))},(i,s)=>{r={document:this.tr(n,s),size:gf(s)}}).next(()=>r)}getEntries(e,n){let r=sn();return this.rr(e,n,(i,s)=>{const o=this.tr(i,s);r=r.insert(i,o)}).next(()=>r)}ir(e,n){let r=sn(),i=new Ae(j.comparator);return this.rr(e,n,(s,o)=>{const a=this.tr(s,o);r=r.insert(s,a),i=i.insert(s,gf(o))}).next(()=>({documents:r,sr:i}))}rr(e,n,r){if(n.isEmpty())return P.resolve();let i=new Te(H0);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(jl(i.first()),jl(i.last())),o=i.getIterator();let a=o.getNext();return vs(e).Y({index:"documentKeyIndex",range:s},(l,u,c)=>{const d=j.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&H0(a,d)<0;)r(a,null),a=o.getNext();a&&a.isEqual(d)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.U(jl(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),pf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vs(e).W(IDBKeyRange.bound(a,l,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let c=sn();for(const d of u){const f=this.tr(j.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);f.isFoundDocument()&&(Wc(n,f)||i.has(f.key))&&(c=c.insert(f.key,f))}return c})}getAllFromCollectionGroup(e,n,r,i){let s=sn();const o=W0(n,r),a=W0(n,_n.max());return vs(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const d=this.tr(j.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&c.done()}).next(()=>s)}newChangeBuffer(e){return new ij(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return q0(e).get("remoteDocumentGlobalKey").next(n=>(Y(!!n),n))}er(e,n){return q0(e).put("remoteDocumentGlobalKey",n)}tr(e,n){if(n){const r=jB(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(J.min())))return r}return Ce.newInvalidDocument(e)}}function Cb(t){return new rj(t)}class ij extends Pb{constructor(e,n){super(),this._r=e,this.trackRemovals=n,this.ar=new rs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Te((s,o)=>re(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ar.get(s);if(n.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=k0(this._r.serializer,o);i=i.add(s.path.popLast());const u=gf(l);r+=u-a.size,n.push(this._r.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=k0(this._r.serializer,o.convertToNoDocument(J.min()));n.push(this._r.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),n.push(this._r.updateMetadata(e,r)),P.waitFor(n)}getFromCache(e,n){return this._r.nr(e,n).next(r=>(this.ar.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this._r.ir(e,n).next(({documents:r,sr:i})=>(i.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function q0(t){return gt(t,"remoteDocumentGlobal")}function vs(t){return gt(t,"remoteDocumentsV14")}function jl(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function W0(t,e){const n=e.documentKey.path.toArray();return[t,pf(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function H0(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=re(n[s],r[s]),i)return i;return i=re(n.length,r.length),i||(i=re(n[n.length-2],r[r.length-2]),i||re(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&wu(r.mutation,i,rn.empty(),De.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=hr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=tu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=sn();const o=vu(),a=function(){return vu()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof ei)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),wu(c.mutation,u,c.mutation.getFieldMask(),De.now())):o.set(u.key,rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new sj(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=vu();let i=new Ae((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||rn.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=KC();c.forEach(f=>{if(!s.has(f)){const m=nb(n.get(f),r.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return j.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):P.resolve(hr());let a=-1,l=s;return o.next(u=>P.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?P.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,se())).next(c=>({batchId:a,changes:GC(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new j(n)).next(r=>{let i=tu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=tu();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,l=>{const u=function(d,f){return new Zr(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ce.newInvalidDocument(c)))});let a=tu();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&wu(c.mutation,u,rn.empty(),De.now()),Wc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return P.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tt(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:fw(i.bundledQuery),readTime:tt(i.readTime)}}(n)),P.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.overlays=new Ae(j.comparator),this.lr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return P.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),P.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){const i=hr(),s=n.length+1,o=new j(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ae((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=hr(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=hr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return P.resolve(a)}lt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cw(n,r));let s=this.lr.get(n);s===void 0&&(s=se(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.hr=new Te(lt.Pr),this.Ir=new Te(lt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new lt(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new lt(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new j(new fe([])),r=new lt(n,e),i=new lt(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new j(new fe([])),r=new lt(n,e),i=new lt(n,e+1);let s=se();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new lt(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class lt{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return j.comparator(e.key,n.key)||re(e.gr,n.gr)}static Tr(e,n){return re(e.gr,n.gr)||j.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Te(lt.Pr)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lw(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.yr=this.yr.add(new lt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,n){return P.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new lt(n,0),i=new lt(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const a=this.wr(o.gr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Te(re);return n.forEach(i=>{const s=new lt(i,0),o=new lt(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),P.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;j.isDocumentKey(s)||(s=s.child(""));const o=new lt(new j(s),0);let a=new Te(re);return this.yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.gr)),!0)},o),P.resolve(this.br(a))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Y(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return P.forEach(n.mutations,i=>{const s=new lt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new lt(n,0),i=this.yr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.Cr=e,this.docs=function(){return new Ae(j.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():Ce.newInvalidDocument(n))}getEntries(e,n){let r=sn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ce.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=sn();const o=n.path,a=new j(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||tw(TC(c),r)<=0||(i.has(c.key)||Wc(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,n,r,i){H()}vr(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cj(this)}getSize(e){return P.resolve(this.size)}}class cj extends Pb{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.persistence=e,this.Fr=new rs(n=>eo(n),zc),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Mr=0,this.Or=new gw,this.targetCount=0,this.Nr=so.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),P.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new so(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.kn(n),P.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),P.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,n){this.Br={},this.overlays={},this.Lr=new nn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new hj(this),this.indexManager=new QB,this.remoteDocumentCache=function(i){return new uj(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new wb(n),this.Kr=new oj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new lj(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){L("MemoryPersistence","Starting transaction:",e);const i=new dj(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return P.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class dj extends AC{constructor(e){super(),this.currentSequenceNumber=e}}class Ap{constructor(e){this.persistence=e,this.Gr=new gw,this.zr=null}static jr(e){return new Ap(e)}get Hr(){if(this.zr)return this.zr;throw H()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),P.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Hr,r=>{const i=j.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,J.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return P.or([()=>P.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.serializer=e}N(e,n,r,i){const s=new vp("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",a0,{unique:!0}),l.createObjectStore("documentMutations")}(e),G0(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=P.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),G0(e)),o=o.next(()=>function(l){const u=l.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",c)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,u){return u.store("mutations").W().next(c=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",a0,{unique:!0});const d=u.store("mutations"),f=c.map(m=>d.put(m));return P.waitFor(f)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.Zr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),r<7&&i>=7&&(o=o.next(()=>this.ei(s))),r<8&&i>=8&&(o=o.next(()=>this.ti(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ni(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const u=l.createObjectStore("documentOverlays",{keyPath:Y4});u.createIndex("collectionPathOverlayIndex",J4,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",X4,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const u=l.createObjectStore("remoteDocumentsV14",{keyPath:$4});u.createIndex("documentKeyIndex",U4),u.createIndex("collectionGroupIndex",B4)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ii(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:H4}).createIndex("sequenceNumberIndex",G4,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:K4}).createIndex("documentKeyIndex",Q4,{unique:!1})}(e))),o}Xr(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=gf(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Zr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>P.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>P.forEach(a,l=>{Y(l.userId===s.userId);const u=As(this.serializer,l);return Sb(e,s.userId,u).next(()=>{})}))}))}ei(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new fe(o),u=function(d){return[0,qt(d)]}(l);s.push(n.get(u).next(c=>c?P.resolve():(d=>n.put({targetId:0,path:qt(d),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>P.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:W4});const r=n.store("collectionParents"),i=new mw,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:qt(l)})}};return n.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new fe(o);return s(l.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([o,a,l],u)=>{const c=cr(a);return s(c.popLast())}))}ni(e){const n=e.store("targets");return n.Y((r,i)=>{const s=ru(i),o=Eb(this.serializer,s);return n.put(o)})}ri(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new j(fe.fromString(d.document.name).popFirst(5)):d.noDocument?j.fromSegments(d.noDocument.path):d.unknownDocument?j.fromSegments(d.unknownDocument.path):H()}(o).path.toArray(),u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>P.waitFor(i))}ii(e,n){const r=n.store("mutations"),i=Cb(this.serializer),s=new kb(Ap.jr,this.serializer.ut);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:se();As(this.serializer,l).keys().forEach(d=>c=c.add(d)),a.set(l.userId,c)}),P.forEach(a,(l,u)=>{const c=new ct(u),d=Tp.ct(this.serializer,c),f=s.getIndexManager(c),m=Sp.ct(c,this.serializer,f,s.referenceDelegate);return new bb(i,m,d,f).recalculateAndSaveOverlaysForDocumentKeys(new S_(n,nn._e),l).next()})})}}function G0(t){t.createObjectStore("targetDocuments",{keyPath:z4}).createIndex("documentTargetsIndex",q4,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",j4,{unique:!0}),t.createObjectStore("targetGlobal")}const rg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _w{constructor(e,n,r,i,s,o,a,l,u,c,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.si=s,this.window=o,this.document=a,this.oi=u,this._i=c,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=f=>Promise.resolve(),!_w.D())throw new V(b.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nj(this,i),this.Ii=n+"main",this.serializer=new wb(l),this.Ti=new Wn(this.Ii,this.ai,new fj(this.serializer)),this.qr=new JB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Cb(this.serializer),this.Kr=new zB,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,c===!1&&et("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(b.FAILED_PRECONDITION,rg);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new nn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(async()=>{this.started&&await this.di()}))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Hh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(n=>this.isPrimary&&!n?this.pi(e).next(()=>!1):!!n&&this.yi(e).next(()=>!0))).catch(e=>{if(ns(e))return L("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return L("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return zl(e).get("owner").next(n=>P.resolve(this.wi(n)))}Si(e){return Hh(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=gt(n,"clientMetadata");return r.W().next(i=>{const s=this.Ci(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return P.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(const n of e)this.Ei.removeItem(this.vi(n.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?P.resolve(!0):zl(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)){if(this.wi(n)&&this.networkEnabled)return!0;if(!this.wi(n)){if(!n.allowTabSynchronization)throw new V(b.FAILED_PRECONDITION,rg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hh(e).W().next(r=>this.Ci(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&L("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new S_(e,nn._e);return this.pi(n).next(()=>this.Si(n))}),this.Ti.close(),this.Ni()}Ci(e,n){return e.filter(r=>this.Di(r.updateTimeMs,n)&&!this.Fi(r.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Hh(e).W().next(n=>this.Ci(n,18e5).map(r=>r.clientId)))}get started(){return this.kr}getMutationQueue(e,n){return Sp.ct(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YB(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Tp.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,n,r){L("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===15?eB:l===14?kC:l===13?bC:l===12?Z4:l===11?CC:void H()}(this.ai);let o;return this.Ti.runTransaction(e,i,s,a=>(o=new S_(a,this.Lr?this.Lr.next():nn._e),n==="readwrite-primary"?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw et(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new V(b.FAILED_PRECONDITION,SC);return r(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return zl(e).get("owner").next(n=>{if(n!==null&&this.Di(n.leaseTimestampMs,5e3)&&!this.Fi(n.ownerId)&&!this.wi(n)&&!(this._i||this.allowTabSynchronization&&n.allowTabSynchronization))throw new V(b.FAILED_PRECONDITION,rg)})}yi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zl(e).put("owner",n)}static D(){return Wn.D()}pi(e){const n=zl(e);return n.get("owner").next(r=>this.wi(r)?(L("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):P.resolve())}Di(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(et(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();const n=/(?:Version|Mobile)\/1[456]/;kL()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var n;try{const r=((n=this.Ei)===null||n===void 0?void 0:n.getItem(this.vi(e)))!==null;return L("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return et("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){et("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function zl(t){return gt(t,"owner")}function Hh(t){return gt(t,"clientMetadata")}function yw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new vw(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new pj;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?($o()<=oe.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",Uo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),P.resolve()):($o()<=oe.DEBUG&&L("QueryEngine","Query:",Uo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?($o()<=oe.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",Uo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wt(n))):P.resolve())}zi(e,n){if(v0(n))return P.resolve(null);let r=Wt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ff(n,null,"F"),r=Wt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Yi(n,a);return this.Zi(n,u,o,l.readTime)?this.zi(e,ff(n,null,"F")):this.Xi(e,u,n,l)}))})))}ji(e,n,r,i){return v0(n)||i.isEqual(J.min())?P.resolve(null):this.Gi.getDocuments(e,r).next(s=>{const o=this.Yi(n,s);return this.Zi(n,o,r,i)?P.resolve(null):($o()<=oe.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Uo(n)),this.Xi(e,o,n,IC(i,-1)).next(a=>a))})}Yi(e,n){let r=new Te(WC(e));return n.forEach((i,s)=>{Wc(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return $o()<=oe.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",Uo(n)),this.Gi.getDocumentsMatchingQuery(e,n,_n.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new Ae(re),this.ns=new rs(s=>eo(s),zc),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bb(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}}function Nb(t,e,n,r){return new mj(t,e,n,r)}async function Db(t,e){const n=z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})}function gj(t,e){const n=z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let m=P.resolve();return f.forEach(w=>{m=m.next(()=>c.getEntry(l,w)).next(v=>{const I=u.docVersions.get(w);Y(I!==null),v.version.compareTo(I)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),c.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Ob(t){const e=z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function _j(t,e){const n=z(t),r=e.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const a=[];e.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.qr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,c.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):c.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(c.resumeToken,r)),i=i.insert(d,m),function(v,I,_){return v.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,c)&&a.push(n.qr.updateTargetData(s,m))});let l=sn(),u=se();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Vb(s,o,e.documentUpdates).next(c=>{l=c.us,u=c.cs})),!r.isEqual(J.min())){const c=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ts=i,s))}function Vb(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=sn();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):L("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{us:o,cs:i}})}function yj(t,e){const n=z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function La(t,e){const n=z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new Or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}async function Ma(t,e,n){const r=z(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ns(o))throw o;L("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)}function _f(t,e,n){const r=z(t);let i=J.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=z(l),f=d.ns.get(c);return f!==void 0?P.resolve(d.ts.get(f)):d.qr.getTargetData(u,c)}(r,o,Wt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:J.min(),n?s:se())).next(a=>(Fb(r,qC(e),a),{documents:a,ls:s})))}function Lb(t,e){const n=z(t),r=z(n.qr),i=n.ts.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function Mb(t,e){const n=z(t),r=n.rs.get(e)||J.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.ss.getAllFromCollectionGroup(i,e,IC(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Fb(n,e,i),i))}function Fb(t,e,n){let r=t.rs.get(e)||J.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}async function vj(t,e,n,r){const i=z(t);let s=se(),o=sn();for(const u of n){const c=e.hs(u.metadata.name);u.document&&(s=s.add(c));const d=e.Ps(u);d.setReadTime(e.Is(u.metadata.readTime)),o=o.insert(c,d)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await La(i,function(c){return Wt(al(fe.fromString(`__bundle__/docs/${c}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>Vb(u,a,o).next(c=>(a.apply(u),c)).next(c=>i.qr.removeMatchingKeysForTargetId(u,l.targetId).next(()=>i.qr.addMatchingKeys(u,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,c.us,c.cs)).next(()=>c.us)))}async function wj(t,e,n=se()){const r=await La(t,Wt(fw(e.bundledQuery))),i=z(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=tt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Kr.saveNamedQuery(s,e);const a=r.withResumeToken(at.EMPTY_BYTE_STRING,o);return i.ts=i.ts.insert(a.targetId,a),i.qr.updateTargetData(s,a).next(()=>i.qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.qr.addMatchingKeys(s,n,r.targetId)).next(()=>i.Kr.saveNamedQuery(s,e))})}function K0(t,e){return`firestore_clients_${t}_${e}`}function Q0(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ig(t,e){return`firestore_targets_${t}_${e}`}class yf{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ts(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new V(i.error.code,i.error.message))),o?new yf(e,n,i.state,s):(et("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Eu{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ts(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new V(r.error.code,r.error.message))),s?new Eu(e,r.state,i):(et("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vf{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ts(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ow();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=RC(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new vf(e,s):(et("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class ww{constructor(e,n){this.clientId=e,this.onlineState=n}static Ts(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new ww(n.clientId,n.onlineState):(et("SharedClientState",`Failed to parse online state: ${e}`),null)}}class M_{constructor(){this.activeTargetIds=ow()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sg{constructor(e,n,r,i,s){this.window=e,this.si=n,this.persistenceKey=r,this.Rs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ae(re),this.started=!1,this.ps=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=K0(this.persistenceKey,this.Rs),this.ws=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new M_),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const r of e){if(r===this.Rs)continue;const i=this.getItem(K0(this.persistenceKey,r));if(i){const s=vf.Ts(r,i);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();const n=this.storage.getItem(this.Cs);if(n){const r=this.Ms(n);r&&this.xs(r)}for(const r of this.ps)this.fs(r);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let n=!1;return this.gs.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,n,r){this.Ns(e,n,r),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ig(this.persistenceKey,e));if(r){const i=Eu.Ts(e,r);i&&(n=i.state)}}return this.Ls.ds(e),this.Fs(),n}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ig(this.persistenceKey,e))}updateQueryState(e,n,r){this.ks(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Bs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return L("SharedClientState","READ",e,n),n}setItem(e,n){L("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){L("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const n=e;if(n.storageArea===this.storage){if(L("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ys)return void et("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ss.test(n.key)){if(n.newValue==null){const r=this.Ks(n.key);return this.$s(r,null)}{const r=this.Us(n.key,n.newValue);if(r)return this.$s(r.clientId,r)}}else if(this.bs.test(n.key)){if(n.newValue!==null){const r=this.Ws(n.key,n.newValue);if(r)return this.Gs(r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.zs(n.key,n.newValue);if(r)return this.js(r)}}else if(n.key===this.Cs){if(n.newValue!==null){const r=this.Ms(n.newValue);if(r)return this.xs(r)}}else if(n.key===this.ws){const r=function(s){let o=nn._e;if(s!=null)try{const a=JSON.parse(s);Y(typeof a=="number"),o=a}catch(a){et("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==nn._e&&this.sequenceNumberHandler(r)}else if(n.key===this.vs){const r=this.Hs(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Js(i)))}}}else this.ps.push(n)})}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,n,r){const i=new yf(this.currentUser,e,n,r),s=Q0(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Es())}Bs(e){const n=Q0(this.persistenceKey,this.currentUser,e);this.removeItem(n)}qs(e){const n={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(n))}ks(e,n,r){const i=ig(this.persistenceKey,e),s=new Eu(e,n,r);this.setItem(i,s.Es())}Qs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.vs,n)}Ks(e){const n=this.Ss.exec(e);return n?n[1]:null}Us(e,n){const r=this.Ks(e);return vf.Ts(r,n)}Ws(e,n){const r=this.bs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return yf.Ts(new ct(s),i,n)}zs(e,n){const r=this.Ds.exec(e),i=Number(r[1]);return Eu.Ts(i,n)}Ms(e){return ww.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);L("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,n){const r=n?this.gs.insert(e,n):this.gs.remove(e),i=this.Os(this.gs),s=this.Os(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=r})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let n=ow();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class $b{constructor(){this.eo=new M_,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new M_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{ro(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){L("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){L("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh=null;function og(){return Gh===null?Gh=function(){return 268435456+Math.round(2147483648*Math.random())}():Gh++,"0x"+Gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class Sj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=r+"://"+n.host,this.fo=`projects/${i}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get yo(){return!1}wo(n,r,i,s,o){const a=og(),l=this.So(n,r);L("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(u,s,o),this.Do(n,l,u,i).then(c=>(L("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw Xn("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Co(n,r,i,s,o,a){return this.wo(n,r,i,s,o)}bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}So(n,r){const i=Ij[n];return`${this.mo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,n,r,i){const s=og();return new Promise((o,a)=>{const l=new v4;l.setWithCredentials(!0),l.listenOnce(_4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case tg.NO_ERROR:const c=l.getResponseJson();L(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case tg.TIMEOUT:L(bt,`RPC '${e}' ${s} timed out`),a(new V(b.DEADLINE_EXCEEDED,"Request time out"));break;case tg.HTTP_ERROR:const d=l.getStatus();if(L(bt,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const w=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(b).indexOf(_)>=0?_:b.UNKNOWN}(m.status);a(new V(w,m.message))}else a(new V(b.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new V(b.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{L(bt,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);L(bt,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}vo(e,n,r){const i=og(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=m4(),a=g4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");L(bt,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let f=!1,m=!1;const w=new Tj({co:I=>{m?L(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(f||(L(bt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),L(bt,`RPC '${e}' stream ${i} sending:`,I),d.send(I))},lo:()=>d.close()}),v=(I,_,g)=>{I.listen(_,y=>{try{g(y)}catch(S){setTimeout(()=>{throw S},0)}})};return v(d,jh.EventType.OPEN,()=>{m||L(bt,`RPC '${e}' stream ${i} transport opened.`)}),v(d,jh.EventType.CLOSE,()=>{m||(m=!0,L(bt,`RPC '${e}' stream ${i} transport closed`),w.Ro())}),v(d,jh.EventType.ERROR,I=>{m||(m=!0,Xn(bt,`RPC '${e}' stream ${i} transport errored:`,I),w.Ro(new V(b.UNAVAILABLE,"The operation could not be completed")))}),v(d,jh.EventType.MESSAGE,I=>{var _;if(!m){const g=I.data[0];Y(!!g);const y=g,S=y.error||((_=y[0])===null||_===void 0?void 0:_.error);if(S){L(bt,`RPC '${e}' stream ${i} received error:`,S);const A=S.status;let R=function(Q){const W=nt[Q];if(W!==void 0)return sb(W)}(A),k=S.message;R===void 0&&(R=b.INTERNAL,k="Unknown error status: "+A+" with message "+S.message),m=!0,w.Ro(new V(R,k)),d.close()}else L(bt,`RPC '${e}' stream ${i} received:`,g),w.Vo(g)}}),v(a,y4.STAT_EVENT,I=>{I.stat===r0.PROXY?L(bt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===r0.NOPROXY&&L(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.Ao()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return typeof window<"u"?window:null}function _d(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t){return new NB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=r,this.Mo=i,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r,i,s,o,a,l){this.si=e,this.Ko=r,this.$o=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new Ew(e,n)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,n){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():n&&n.code===b.RESOURCE_EXHAUSTED?(et(n.toString()),et("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):n&&n.code===b.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(n)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),n=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Uo===n&&this.s_(r,i)},r=>{e(()=>{const i=new V(b.UNKNOWN,"Fetching auth token failed: "+r.message);return this.o_(i)})})}s_(e,n){const r=this.i_(this.Uo);this.stream=this.__(e,n),this.stream.ho(()=>{r(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(i=>{r(()=>this.o_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Jo(){this.state=5,this.zo.ko(async()=>{this.state=0,this.start()})}o_(e){return L("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return n=>{this.si.enqueueAndForget(()=>this.Uo===e?n():(L("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Aj extends Bb{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}__(e,n){return this.connection.vo("Listen",e,n)}onMessage(e){this.zo.reset();const n=VB(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?tt(o.readTime):J.min()}(e);return this.listener.a_(n,r)}u_(e){const n={};n.database=fc(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=hf(l)?{documents:pb(s,l)}:{query:mb(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ub(s,o.resumeToken);const u=x_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Va(s,o.snapshotVersion.toTimestamp());const u=x_(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=MB(this.serializer,e);r&&(n.labels=r),this.e_(n)}c_(e){const n={};n.database=fc(this.serializer),n.removeTarget=e,this.e_(n)}}class Rj extends Bb{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,n){return this.connection.vo("Write",e,n)}onMessage(e){if(Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const n=LB(e.writeResults,e.commitTime),r=tt(e.commitTime);return this.listener.I_(r,n)}return Y(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=fc(this.serializer),this.e_(e)}P_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pc(this.serializer,r))};this.e_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.d_=!1}A_(){if(this.d_)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.wo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new V(b.UNKNOWN,i.toString())})}Co(e,n,r,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===b.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(b.UNKNOWN,s.toString())})}terminate(){this.d_=!0}}class Cj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(et(n),this.f_=!1):L("OnlineStateTracker",n)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{r.enqueueAndForget(async()=>{is(this)&&(L("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=z(l);u.C_.add(4),await cl(u),u.M_.set("Unknown"),u.C_.delete(4),await Yc(u)}(this))})}),this.M_=new Cj(r,i)}}async function Yc(t){if(is(t))for(const e of t.v_)await e(!0)}async function cl(t){for(const e of t.v_)await e(!1)}function Rp(t,e){const n=z(t);n.D_.has(e.targetId)||(n.D_.set(e.targetId,e),Sw(n)?Tw(n):dl(n).Ho()&&Iw(n,e))}function mc(t,e){const n=z(t),r=dl(n);n.D_.delete(e),r.Ho()&&jb(n,e),n.D_.size===0&&(r.Ho()?r.Zo():is(n)&&n.M_.set("Unknown"))}function Iw(t,e){if(t.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).u_(e)}function jb(t,e){t.x_.Oe(e),dl(t).c_(e)}function Tw(t){t.x_=new CB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.D_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.M_.g_()}function Sw(t){return is(t)&&!dl(t).jo()&&t.D_.size>0}function is(t){return z(t).C_.size===0}function zb(t){t.x_=void 0}async function kj(t){t.D_.forEach((e,n)=>{Iw(t,e)})}async function xj(t,e){zb(t),Sw(t)?(t.M_.w_(e),Tw(t)):t.M_.set("Unknown")}async function Nj(t,e,n){if(t.M_.set("Online"),e instanceof lb&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.D_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.D_.delete(a),i.x_.removeTarget(a))}(t,e)}catch(r){L("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await wf(t,r)}else if(e instanceof gd?t.x_.$e(e):e instanceof ab?t.x_.Je(e):t.x_.Ge(e),!n.isEqual(J.min()))try{const r=await Ob(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.x_.it(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.D_.get(u);c&&s.D_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.D_.get(l);if(!c)return;s.D_.set(l,c.withResumeToken(at.EMPTY_BYTE_STRING,c.snapshotVersion)),jb(s,l);const d=new Or(c.target,l,u,c.sequenceNumber);Iw(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){L("RemoteStore","Failed to raise snapshot:",r),await wf(t,r)}}async function wf(t,e,n){if(!ns(e))throw e;t.C_.add(1),await cl(t),t.M_.set("Offline"),n||(n=()=>Ob(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{L("RemoteStore","Retrying IndexedDB access"),await n(),t.C_.delete(1),await Yc(t)})}function qb(t,e){return e().catch(n=>wf(t,n,e))}async function hl(t){const e=z(t),n=Wi(e);let r=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;Dj(e);)try{const i=await yj(e.localStore,r);if(i===null){e.b_.length===0&&n.Zo();break}r=i.batchId,Oj(e,i)}catch(i){await wf(e,i)}Wb(e)&&Hb(e)}function Dj(t){return is(t)&&t.b_.length<10}function Oj(t,e){t.b_.push(e);const n=Wi(t);n.Ho()&&n.h_&&n.P_(e.mutations)}function Wb(t){return is(t)&&!Wi(t).jo()&&t.b_.length>0}function Hb(t){Wi(t).start()}async function Vj(t){Wi(t).E_()}async function Lj(t){const e=Wi(t);for(const n of t.b_)e.P_(n.mutations)}async function Mj(t,e,n){const r=t.b_.shift(),i=uw.from(r,e,n);await qb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hl(t)}async function Fj(t,e){e&&Wi(t).h_&&await async function(r,i){if(function(o){return ib(o)&&o!==b.ABORTED}(i.code)){const s=r.b_.shift();Wi(r).Yo(),await qb(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await hl(r)}}(t,e),Wb(t)&&Hb(t)}async function J0(t,e){const n=z(t);n.asyncQueue.verifyOperationInProgress(),L("RemoteStore","RemoteStore received new credentials");const r=is(n);n.C_.add(3),await cl(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.C_.delete(3),await Yc(n)}async function F_(t,e){const n=z(t);e?(n.C_.delete(2),await Yc(n)):e||(n.C_.add(2),await cl(n),n.M_.set("Unknown"))}function dl(t){return t.O_||(t.O_=function(n,r,i){const s=z(n);return s.A_(),new Aj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:kj.bind(null,t),Io:xj.bind(null,t),a_:Nj.bind(null,t)}),t.v_.push(async e=>{e?(t.O_.Yo(),Sw(t)?Tw(t):t.M_.set("Unknown")):(await t.O_.stop(),zb(t))})),t.O_}function Wi(t){return t.N_||(t.N_=function(n,r,i){const s=z(n);return s.A_(),new Rj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:Vj.bind(null,t),Io:Fj.bind(null,t),T_:Lj.bind(null,t),I_:Mj.bind(null,t)}),t.v_.push(async e=>{e?(t.N_.Yo(),await hl(t)):(await t.N_.stop(),t.b_.length>0&&(L("RemoteStore",`Stopping write stream with ${t.b_.length} pending writes`),t.b_=[]))})),t.N_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Aw(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(b.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fl(t,e){if(et("AsyncQueue",`${e}: ${t}`),ns(t))return new V(b.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.comparator=e?(n,r)=>e(n,r)||j.comparator(n.key,r.key):(n,r)=>j.comparator(n.key,r.key),this.keyedMap=tu(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new ya(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ya)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.B_=new Ae(j.comparator)}track(e){const n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):H():this.B_=this.B_.insert(n,e)}L_(){const e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Fa(e,n,ya.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.k_=void 0,this.listeners=[]}}class Uj{constructor(){this.queries=new rs(e=>zC(e),qc),this.onlineState="Unknown",this.q_=new Set}}async function Rw(t,e){const n=z(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new $j),i)try{s.k_=await n.onListen(r)}catch(o){const a=fl(o,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.Q_(n.onlineState),s.k_&&e.K_(s.k_)&&Cw(n)}async function Pw(t,e){const n=z(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Bj(t,e){const n=z(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.listeners)a.K_(i)&&(r=!0);o.k_=i}}r&&Cw(n)}function jj(t,e,n){const r=z(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function Cw(t){t.q_.forEach(e=>{e.next()})}class bw{constructor(e,n,r){this.query=e,this.U_=n,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=r||{}}K_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.W_?this.z_(e)&&(this.U_.next(e),n=!0):this.j_(e,this.onlineState)&&(this.H_(e),n=!0),this.G_=e,n}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let n=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),n=!0),n}j_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.J_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}z_(e){if(e.docChanges.length>0)return!0;const n=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}H_(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n){this.Y_=e,this.byteLength=n}Z_(){return"metadata"in this.Y_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.serializer=e}hs(e){return mr(this.serializer,e)}Ps(e){return e.metadata.exists?fb(this.serializer,e.document,!1):Ce.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return tt(e)}}class qj{constructor(e,n,r){this.X_=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gb(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++n;const r=fe.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ta(e){const n=new Map,r=new Z0(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.hs(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||se()).add(s);n.set(o,a)}}return n}async complete(){const e=await vj(this.localStore,new Z0(this.serializer),this.documents,this.X_.id),n=this.ta(this.documents);for(const r of this.queries)await wj(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function Gb(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.key=e}}class Qb{constructor(e){this.key=e}}class Yb{constructor(e,n){this.query=e,this.ia=n,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=se(),this.mutatedKeys=se(),this._a=WC(e),this.aa=new ya(this._a)}get ua(){return this.ia}ca(e,n){const r=n?n.la:new X0,i=n?n.aa:this.aa;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const f=i.get(c),m=Wc(this.query,d)?d:null,w=!!f&&this.mutatedKeys.has(f.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;f&&m?f.data.isEqual(m.data)?w!==v&&(r.track({type:3,doc:m}),I=!0):this.ha(f,m)||(r.track({type:2,doc:m}),I=!0,(l&&this._a(m,l)>0||u&&this._a(m,u)<0)&&(a=!0)):!f&&m?(r.track({type:0,doc:m}),I=!0):f&&!m&&(r.track({type:1,doc:f}),I=!0,(l||u)&&(a=!0)),I&&(m?(o=o.add(m),s=v?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{aa:o,la:r,Zi:a,mutatedKeys:s}}ha(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort((c,d)=>function(m,w){const v=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return v(m)-v(w)}(c.type,d.type)||this._a(c.doc,d.doc)),this.Pa(r),i=i!=null&&i;const a=n&&!i?this.Ia():[],l=this.oa.size===0&&this.current&&!i?1:0,u=l!==this.sa;return this.sa=l,o.length!==0||u?{snapshot:new Fa(this.query,e.aa,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new X0,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(n=>this.ia=this.ia.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ia=this.ia.delete(n)),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=se(),this.aa.forEach(r=>{this.Ea(r.key)&&(this.oa=this.oa.add(r.key))});const n=[];return e.forEach(r=>{this.oa.has(r)||n.push(new Qb(r))}),this.oa.forEach(r=>{e.has(r)||n.push(new Kb(r))}),n}da(e){this.ia=e.ls,this.oa=se();const n=this.ca(e.documents);return this.applyChanges(n,!0)}Aa(){return Fa.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}}class Wj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Hj{constructor(e){this.key=e,this.Ra=!1}}class Gj{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new rs(a=>zC(a),qc),this.fa=new Map,this.ga=new Set,this.pa=new Ae(j.comparator),this.ya=new Map,this.wa=new gw,this.Sa={},this.ba=new Map,this.Da=so.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}}async function Kj(t,e){const n=Ow(t);let r,i;const s=n.ma.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const o=await La(n.localStore,Wt(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await kw(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&Rp(n.remoteStore,o)}return i}async function kw(t,e,n,r,i){t.va=(d,f,m)=>async function(v,I,_,g){let y=I.view.ca(_);y.Zi&&(y=await _f(v.localStore,I.query,!1).then(({documents:k})=>I.view.ca(k,y)));const S=g&&g.targetChanges.get(I.targetId),A=g&&g.targetMismatches.get(I.targetId)!=null,R=I.view.applyChanges(y,v.isPrimaryClient,S,A);return $_(v,I.targetId,R.Ta),R.snapshot}(t,d,f,m);const s=await _f(t.localStore,e,!0),o=new Yb(e,s.ls),a=o.ca(s.documents),l=Kc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);$_(t,n,u.Ta);const c=new Wj(e,n,o);return t.ma.set(e,c),t.fa.has(n)?t.fa.get(n).push(e):t.fa.set(n,[e]),u.snapshot}async function Qj(t,e){const n=z(t),r=n.ma.get(e),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter(s=>!qc(s,e))),void n.ma.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ma(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),mc(n.remoteStore,r.targetId),$a(n,r.targetId)}).catch(ts)):($a(n,r.targetId),await Ma(n.localStore,r.targetId,!0))}async function Yj(t,e,n){const r=Vw(t);try{const i=await function(o,a){const l=z(o),u=De.now(),c=a.reduce((m,w)=>m.add(w.key),se());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=sn(),v=se();return l.ss.getEntries(m,c).next(I=>{w=I,w.forEach((_,g)=>{g.isValidDocument()||(v=v.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,w)).next(I=>{d=I;const _=[];for(const g of a){const y=AB(g,d.get(g.key).overlayedDocument);y!=null&&_.push(new ei(g.key,y,OC(y.value.mapValue),Ne.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,_,a)}).next(I=>{f=I;const _=I.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(m,I.batchId,_)})}).then(()=>({batchId:f.batchId,changes:GC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Sa[o.currentUser.toKey()];u||(u=new Ae(re)),u=u.insert(a,l),o.Sa[o.currentUser.toKey()]=u}(r,i.batchId,n),await ti(r,i.changes),await hl(r.remoteStore)}catch(i){const s=fl(i,"Failed to persist write");n.reject(s)}}async function Jb(t,e){const n=z(t);try{const r=await _j(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ya.get(s);o&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ra=!0:i.modifiedDocuments.size>0?Y(o.Ra):i.removedDocuments.size>0&&(Y(o.Ra),o.Ra=!1))}),await ti(n,r,e)}catch(r){await ts(r)}}function eS(t,e,n){const r=z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ma.forEach((s,o)=>{const a=o.view.Q_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=z(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.listeners)f.Q_(a)&&(u=!0)}),u&&Cw(l)}(r.eventManager,e),i.length&&r.Va.a_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jj(t,e,n){const r=z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ya.get(e),s=i&&i.key;if(s){let o=new Ae(j.comparator);o=o.insert(s,Ce.newNoDocument(s,J.min()));const a=se().add(s),l=new Gc(J.min(),new Map,new Ae(re),o,a);await Jb(r,l),r.pa=r.pa.remove(s),r.ya.delete(e),Dw(r)}else await Ma(r.localStore,e,!1).then(()=>$a(r,e,n)).catch(ts)}async function Xj(t,e){const n=z(t),r=e.batch.batchId;try{const i=await gj(n.localStore,e);Nw(n,r,null),xw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ti(n,i)}catch(i){await ts(i)}}async function Zj(t,e,n){const r=z(t);try{const i=await function(o,a){const l=z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Y(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);Nw(r,e,n),xw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ti(r,i)}catch(i){await ts(i)}}async function e3(t,e){const n=z(t);is(n.remoteStore)||L("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.ba.get(r)||[];i.push(e),n.ba.set(r,i)}catch(r){const i=fl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function xw(t,e){(t.ba.get(e)||[]).forEach(n=>{n.resolve()}),t.ba.delete(e)}function Nw(t,e,n){const r=z(t);let i=r.Sa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Sa[r.currentUser.toKey()]=i}}function $a(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.fa.get(e))t.ma.delete(r),n&&t.Va.Fa(r,n);t.fa.delete(e),t.isPrimaryClient&&t.wa.Rr(e).forEach(r=>{t.wa.containsKey(r)||Xb(t,r)})}function Xb(t,e){t.ga.delete(e.path.canonicalString());const n=t.pa.get(e);n!==null&&(mc(t.remoteStore,n),t.pa=t.pa.remove(e),t.ya.delete(n),Dw(t))}function $_(t,e,n){for(const r of n)r instanceof Kb?(t.wa.addReference(r.key,e),t3(t,r)):r instanceof Qb?(L("SyncEngine","Document no longer in limbo: "+r.key),t.wa.removeReference(r.key,e),t.wa.containsKey(r.key)||Xb(t,r.key)):H()}function t3(t,e){const n=e.key,r=n.path.canonicalString();t.pa.get(n)||t.ga.has(r)||(L("SyncEngine","New document in limbo: "+n),t.ga.add(r),Dw(t))}function Dw(t){for(;t.ga.size>0&&t.pa.size<t.maxConcurrentLimboResolutions;){const e=t.ga.values().next().value;t.ga.delete(e);const n=new j(fe.fromString(e)),r=t.Da.next();t.ya.set(r,new Hj(n)),t.pa=t.pa.insert(n,r),Rp(t.remoteStore,new Or(Wt(al(n.path)),r,"TargetPurposeLimboResolution",nn._e))}}async function ti(t,e,n){const r=z(t),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach((a,l)=>{o.push(r.va(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){i.push(u);const c=vw.Qi(l.targetId,u);s.push(c)}}))}),await Promise.all(o),r.Va.a_(i),await async function(l,u){const c=z(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>P.forEach(u,f=>P.forEach(f.ki,m=>c.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>P.forEach(f.qi,m=>c.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!ns(d))throw d;L("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=c.ts.get(f),w=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(w);c.ts=c.ts.insert(f,v)}}}(r.localStore,s))}async function n3(t,e){const n=z(t);if(!n.currentUser.isEqual(e)){L("SyncEngine","User change. New user:",e.toKey());const r=await Db(n.localStore,e);n.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new V(b.CANCELLED,o))})}),s.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ti(n,r._s)}}function r3(t,e){const n=z(t),r=n.ya.get(e);if(r&&r.Ra)return se().add(r.key);{let i=se();const s=n.fa.get(e);if(!s)return i;for(const o of s){const a=n.ma.get(o);i=i.unionWith(a.view.ua)}return i}}async function i3(t,e){const n=z(t),r=await _f(n.localStore,e.query,!0),i=e.view.da(r);return n.isPrimaryClient&&$_(n,e.targetId,i.Ta),i}async function s3(t,e){const n=z(t);return Mb(n.localStore,e).then(r=>ti(n,r))}async function o3(t,e,n,r){const i=z(t),s=await function(a,l){const u=z(a),c=z(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.Cn(d,l).next(f=>f?u.localDocuments.getDocuments(d,f):P.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await hl(i.remoteStore):n==="acknowledged"||n==="rejected"?(Nw(i,e,r||null),xw(i,e),function(a,l){z(z(a).mutationQueue).Fn(l)}(i.localStore,e)):H(),await ti(i,s)):L("SyncEngine","Cannot apply mutation batch with id: "+e)}async function a3(t,e){const n=z(t);if(Ow(n),Vw(n),e===!0&&n.Ca!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await tS(n,r.toArray());n.Ca=!0,await F_(n.remoteStore,!0);for(const s of i)Rp(n.remoteStore,s)}else if(e===!1&&n.Ca!==!1){const r=[];let i=Promise.resolve();n.fa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>($a(n,o),Ma(n.localStore,o,!0))),mc(n.remoteStore,o)}),await i,await tS(n,r),function(o){const a=z(o);a.ya.forEach((l,u)=>{mc(a.remoteStore,u)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ae(j.comparator)}(n),n.Ca=!1,await F_(n.remoteStore,!1)}}async function tS(t,e,n){const r=z(t),i=[],s=[];for(const o of e){let a;const l=r.fa.get(o);if(l&&l.length!==0){a=await La(r.localStore,Wt(l[0]));for(const u of l){const c=r.ma.get(u),d=await i3(r,c);d.snapshot&&s.push(d.snapshot)}}else{const u=await Lb(r.localStore,o);a=await La(r.localStore,u),await kw(r,Zb(u),o,!1,a.resumeToken)}i.push(a)}return r.Va.a_(s),i}function Zb(t){return jC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function l3(t){return function(n){return z(z(n).persistence).Bi()}(z(t).localStore)}async function u3(t,e,n,r){const i=z(t);if(i.Ca)return void L("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await Mb(i.localStore,qC(s[0])),a=Gc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",at.EMPTY_BYTE_STRING);await ti(i,o,a);break}case"rejected":await Ma(i.localStore,e,!0),$a(i,e,r);break;default:H()}}async function c3(t,e,n){const r=Ow(t);if(r.Ca){for(const i of e){if(r.fa.has(i)){L("SyncEngine","Adding an already active target "+i);continue}const s=await Lb(r.localStore,i),o=await La(r.localStore,s);await kw(r,Zb(s),o.targetId,!1,o.resumeToken),Rp(r.remoteStore,o)}for(const i of n)r.fa.has(i)&&await Ma(r.localStore,i,!1).then(()=>{mc(r.remoteStore,i),$a(r,i)}).catch(ts)}}function Ow(t){const e=z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jj.bind(null,e),e.Va.a_=Bj.bind(null,e.eventManager),e.Va.Fa=jj.bind(null,e.eventManager),e}function Vw(t){const e=z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zj.bind(null,e),e}function h3(t,e,n){const r=z(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,w){const v=z(m),I=tt(w.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",_=>v.Kr.getBundleMetadata(_,w.id)).then(_=>!!_&&_.createTime.compareTo(I)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(Gb(l));const u=new qj(l,s.localStore,o.serializer);let c=await o.Ma();for(;c;){const f=await u.ea(c);f&&a._updateProgress(f),c=await o.Ma()}const d=await u.complete();return await ti(s,d.ra,void 0),await function(m,w){const v=z(m);return v.persistence.runTransaction("Save bundle","readwrite",I=>v.Kr.saveBundleMetadata(I,w))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.na)}catch(l){return Xn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class U_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Qc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Nb(this.persistence,new xb,e.initialUser,this.serializer)}createPersistence(e){return new kb(Ap.jr,this.serializer)}createSharedClientState(e){return new $b}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ek extends U_{constructor(e,n,r){super(),this.xa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await Vw(this.xa.syncEngine),await hl(this.xa.remoteStore),await this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return Nb(this.persistence,new xb,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new ZB(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new L4(n,this.persistence);return new V4(e.asyncQueue,r)}createPersistence(e){const n=yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new _w(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Ub(),_d(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $b}}class d3 extends ek{constructor(e,n){super(e,n,!1),this.xa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xa.syncEngine;this.sharedClientState instanceof sg&&(this.sharedClientState.syncEngine={Ys:o3.bind(null,n),Zs:u3.bind(null,n),Xs:c3.bind(null,n),Bi:l3.bind(null,n),Js:s3.bind(null,n)},await this.sharedClientState.start()),await this.persistence.mi(async r=>{await a3(this.xa.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=Ub();if(!sg.D(n))throw new V(b.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=yw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sg(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Lw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>eS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=n3.bind(null,this.syncEngine),await F_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Uj}()}createDatastore(e){const n=Qc(e.databaseInfo.databaseId),r=function(s){return new Sj(s)}(e.databaseInfo);return function(s,o,a,l){return new Pj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new bj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>eS(this.syncEngine,n,0),function(){return Y0.D()?new Y0:new Ej}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new Gj(i,s,o,a,l,u);return c&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=z(n);L("RemoteStore","RemoteStore shutting down."),r.C_.add(5),await cl(r),r.F_.shutdown(),r.M_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):et("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n){this.Ba=e,this.serializer=n,this.metadata=new dt,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(r=>{r&&r.Z_()?this.metadata.resolve(r.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.Y_)}`))},r=>this.metadata.reject(r))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(e===null)return null;const n=this.La.decode(e),r=Number(n);isNaN(r)&&this.Qa(`length string (${n}) is not valid number`);const i=await this.Ka(r);return new zj(JSON.parse(i),e.length+r)}$a(){return this.buffer.findIndex(e=>e===123)}async qa(){for(;this.$a()<0&&!await this.Ua(););if(this.buffer.length===0)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const n=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ua(){const e=await this.Ba.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new V(b.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(i,s){const o=z(i),a=fc(o.serializer)+"/documents",l={documents:s.map(f=>dc(o.serializer,f))},u=await o.Co("BatchGetDocuments",a,l,s.length),c=new Map;u.forEach(f=>{const m=OB(o.serializer,f);c.set(m.key.toString(),m)});const d=[];return s.forEach(f=>{const m=c.get(f.toString());Y(!!m),d.push(m)}),d}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ul(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=j.fromPath(r);this.mutations.push(new aw(i,this.precondition(i)))}),await async function(r,i){const s=z(r),o=fc(s.serializer)+"/documents",a={writes:i.map(l=>pc(s.serializer,l))};await s.wo("Commit",o,a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw H();n=J.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new V(b.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(J.min())?Ne.exists(!1):Ne.updateTime(n):Ne.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(J.min()))throw new V(b.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ne.updateTime(n)}return Ne.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Wa=r.maxAttempts,this.zo=new Ew(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(async()=>{const e=new p3(this.datastore),n=this.za(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.ja(i)}))}).catch(r=>{this.ja(r)})})}za(e){try{const n=this.updateFunction(e);return!jc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ib(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=wC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{L("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(L("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new V(b.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=fl(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yd(t,e){t.asyncQueue.verifyOperationInProgress(),L("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Db(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function B_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Mw(t);L("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>J0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>J0(e.remoteStore,s)),t._onlineComponents=e}function tk(t){return t.name==="FirebaseError"?t.code===b.FAILED_PRECONDITION||t.code===b.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Mw(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){L("FirestoreClient","Using user provided OfflineComponentProvider");try{await yd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!tk(n))throw n;Xn("Error using user provided cache. Falling back to memory cache: "+n),await yd(t,new U_)}}else L("FirestoreClient","Using default OfflineComponentProvider"),await yd(t,new U_);return t._offlineComponents}async function Cp(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(L("FirestoreClient","Using user provided OnlineComponentProvider"),await B_(t,t._uninitializedComponentsProvider._online)):(L("FirestoreClient","Using default OnlineComponentProvider"),await B_(t,new Lw))),t._onlineComponents}function nk(t){return Mw(t).then(e=>e.persistence)}function Fw(t){return Mw(t).then(e=>e.localStore)}function rk(t){return Cp(t).then(e=>e.remoteStore)}function $w(t){return Cp(t).then(e=>e.syncEngine)}function _3(t){return Cp(t).then(e=>e.datastore)}async function Ua(t){const e=await Cp(t),n=e.eventManager;return n.onListen=Kj.bind(null,e.syncEngine),n.onUnlisten=Qj.bind(null,e.syncEngine),n}function y3(t){return t.asyncQueue.enqueue(async()=>{const e=await nk(t),n=await rk(t);return e.setNetworkEnabled(!0),function(i){const s=z(i);return s.C_.delete(0),Yc(s)}(n)})}function v3(t){return t.asyncQueue.enqueue(async()=>{const e=await nk(t),n=await rk(t);return e.setNetworkEnabled(!1),async function(i){const s=z(i);s.C_.add(0),await cl(s),s.M_.set("Offline")}(n)})}function w3(t,e){const n=new dt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(u,c){const d=z(u);return d.persistence.runTransaction("read document","readonly",f=>d.localDocuments.getDocument(f,c))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new V(b.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=fl(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await Fw(t),e,n)),n.promise}function ik(t,e,n={}){const r=new dt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Pp({next:f=>{o.enqueueAndForget(()=>Pw(s,d));const m=f.docs.has(a);!m&&f.fromCache?u.reject(new V(b.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&l&&l.source==="server"?u.reject(new V(b.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new bw(al(a.path),c,{includeMetadataChanges:!0,J_:!0});return Rw(s,d)}(await Ua(t),t.asyncQueue,e,n,r)),r.promise}function E3(t,e){const n=new dt;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await _f(i,s,!0),l=new Yb(s,a.ls),u=l.ca(a.documents),c=l.applyChanges(u,!1);o.resolve(c.snapshot)}catch(a){const l=fl(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await Fw(t),e,n)),n.promise}function sk(t,e,n={}){const r=new dt;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Pp({next:f=>{o.enqueueAndForget(()=>Pw(s,d)),f.fromCache&&l.source==="server"?u.reject(new V(b.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new bw(a,c,{includeMetadataChanges:!0,J_:!0});return Rw(s,d)}(await Ua(t),t.asyncQueue,e,n,r)),r.promise}function I3(t,e){const n=new Pp(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){z(i).q_.add(s),s.next()}(await Ua(t),n)),()=>{n.Na(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){z(i).q_.delete(s)}(await Ua(t),n))}}function T3(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?ob().encode(o):o,function(c,d){return new f3(c,d)}(function(c,d){if(c instanceof Uint8Array)return nS(c,d);if(c instanceof ArrayBuffer)return nS(new Uint8Array(c),d);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,Qc(e));t.asyncQueue.enqueueAndForget(async()=>{h3(await $w(t),i,r)})}function S3(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=z(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,i))}(await Fw(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t,e,n){if(!n)throw new V(b.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ak(t,e,n,r){if(e===!0&&r===!0)throw new V(b.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iS(t){if(!j.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sS(t){if(j.isDocumentKey(t))throw new V(b.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":H()}function me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new V(b.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bp(t);throw new V(b.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function lk(t,e){if(e<=0)throw new V(b.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(b.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(b.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ok((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(b.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new V(b.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new S4;switch(r.type){case"firstParty":return new C4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(b.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=rS.get(n);r&&(L("ComponentProvider","Removing Datastore"),rS.delete(n),r.terminate())}(this),Promise.resolve()}}function uk(t,e,n,r={}){var i;const s=(t=me(t,Jc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ct.MOCK_USER;else{a=PL(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new V(b.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ct(u)}t._authCredentials=new A4(new vC(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kt=class ck{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ck(this.firestore,e,this._query)}},$e=class hk{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hk(this.firestore,e,this._key)}},ki=class dk extends Kt{constructor(e,n,r){super(e,n,al(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new j(e))}withConverter(e){return new dk(this.firestore,e,this._path)}};function Ba(t,e,...n){if(t=ee(t),Uw("collection","path",e),t instanceof Jc){const r=fe.fromString(e,...n);return sS(r),new ki(t,null,r)}{if(!(t instanceof $e||t instanceof ki))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return sS(r),new ki(t.firestore,null,r)}}function A3(t,e){if(t=me(t,Jc),Uw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(b.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Kt(t,null,function(r){return new Zr(fe.emptyPath(),r)}(e))}function ja(t,e,...n){if(t=ee(t),arguments.length===1&&(e=wC.newId()),Uw("doc","path",e),t instanceof Jc){const r=fe.fromString(e,...n);return iS(r),new $e(t,null,new j(r))}{if(!(t instanceof $e||t instanceof ki))throw new V(b.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return iS(r),new $e(t.firestore,t instanceof ki?t.converter:null,new j(r))}}function fk(t,e){return t=ee(t),e=ee(e),(t instanceof $e||t instanceof ki)&&(e instanceof $e||e instanceof ki)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function pk(t,e){return t=ee(t),e=ee(e),t instanceof Kt&&e instanceof Kt&&t.firestore===e.firestore&&qc(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new Ew(this,"async_queue_retry"),this.iu=()=>{const n=_d();n&&L("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=_d();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=_d();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new dt;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!ns(e))throw e;L("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(r=>{this.eu=r,this.tu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw et("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.tu=!1,r))));return this.Ja=n,n}enqueueAfterDelay(e,n,r){this.su(),this.ru.indexOf(e)>-1&&(n=0);const i=Aw.createAndSchedule(this,e,n,r,s=>this.au(s));return this.Xa.push(i),i}su(){this.eu&&H()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}function j_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class P3{constructor(){this._progressObserver={},this._taskCompletionResolver=new dt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=-1;let Ke=class extends Jc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new R3}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mk(this),this._firestoreClient.terminate()}};function b3(t,e){const n=typeof t=="object"?t:fv(),r=typeof t=="string"?t:e||"(default)",i=Cc(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=AL("firestore");s&&uk(i,...s)}return i}function _t(t){return t._firestoreClient||mk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mk(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new rB(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,ok(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new g3(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function k3(t,e){_k(t=me(t,Ke));const n=_t(t);if(n._uninitializedComponentsProvider)throw new V(b.FAILED_PRECONDITION,"SDK cache is already specified.");Xn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Lw;return gk(n,i,new ek(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function x3(t){_k(t=me(t,Ke));const e=_t(t);if(e._uninitializedComponentsProvider)throw new V(b.FAILED_PRECONDITION,"SDK cache is already specified.");Xn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Lw;return gk(e,r,new d3(r,n.cacheSizeBytes))}function gk(t,e,n){const r=new dt;return t.asyncQueue.enqueue(async()=>{try{await yd(t,n),await B_(t,e),r.resolve()}catch(i){const s=i;if(!tk(s))throw s;Xn("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}}).then(()=>r.promise)}function N3(t){if(t._initialized&&!t._terminated)throw new V(b.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new dt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Wn.D())return Promise.resolve();const i=r+"main";await Wn.delete(i)}(yw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function D3(t){return function(n){const r=new dt;return n.asyncQueue.enqueueAndForget(async()=>e3(await $w(n),r)),r.promise}(_t(t=me(t,Ke)))}function O3(t){return y3(_t(t=me(t,Ke)))}function V3(t){return v3(_t(t=me(t,Ke)))}function L3(t,e){const n=_t(t=me(t,Ke)),r=new P3;return T3(n,t._databaseId,e,r),r}function M3(t,e){return S3(_t(t=me(t,Ke)),e).then(n=>n?new Kt(t,null,n.query):null)}function _k(t){if(t._initialized||t._terminated)throw new V(b.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wr(at.fromBase64String(e))}catch(n){throw new V(b.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wr(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new V(b.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _o=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new V(b.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new V(b.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=/^__.*__$/;class $3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,n,this.fieldTransforms):new ll(e,this.data,n,this.fieldTransforms)}}class yk{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ei(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class xp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new xp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Au(e),i}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tu({path:r,du:!1});return i.Pu(),i}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ef(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(vk(this.Iu)&&F3.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class U3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qc(e)}pu(e,n,r,i=!1){return new xp({Iu:e,methodName:n,gu:r,path:xe.emptyPath(),du:!1,fu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yo(t){const e=t._freezeSettings(),n=Qc(t._databaseId);return new U3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Np(t,e,n,r,i,s={}){const o=t.pu(s.merge||s.mergeFields?2:0,e,n,i);qw("Data must be an object, but it was:",o,r);const a=Ik(r,o);let l,u;if(s.merge)l=new rn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=z_(e,d,n);if(!o.contains(f))throw new V(b.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Sk(c,f)||c.push(f)}l=new rn(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new $3(new It(a),l,u)}class Xc extends _o{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xc}}function wk(t,e,n){return new xp({Iu:3,gu:e.settings.gu,methodName:t._methodName,du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Bw extends _o{_toFieldTransform(e){return new Hc(e.path,new Da)}isEqual(e){return e instanceof Bw}}class B3 extends _o{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=wk(this,e,!0),r=this.yu.map(s=>vo(s,n)),i=new to(r);return new Hc(e.path,i)}isEqual(e){return this===e}}class j3 extends _o{constructor(e,n){super(e),this.yu=n}_toFieldTransform(e){const n=wk(this,e,!0),r=this.yu.map(s=>vo(s,n)),i=new no(r);return new Hc(e.path,i)}isEqual(e){return this===e}}class z3 extends _o{constructor(e,n){super(e),this.wu=n}_toFieldTransform(e){const n=new Oa(e.serializer,JC(e.serializer,this.wu));return new Hc(e.path,n)}isEqual(e){return this===e}}function jw(t,e,n,r){const i=t.pu(1,e,n);qw("Data must be an object, but it was:",i,r);const s=[],o=It.empty();go(r,(l,u)=>{const c=Ww(e,l,n);u=ee(u);const d=i.Ru(c);if(u instanceof Xc)s.push(c);else{const f=vo(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new rn(s);return new yk(o,a,i.fieldTransforms)}function zw(t,e,n,r,i,s){const o=t.pu(1,e,n),a=[z_(e,r,n)],l=[i];if(s.length%2!=0)throw new V(b.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(z_(e,s[f])),l.push(s[f+1]);const u=[],c=It.empty();for(let f=a.length-1;f>=0;--f)if(!Sk(u,a[f])){const m=a[f];let w=l[f];w=ee(w);const v=o.Ru(m);if(w instanceof Xc)u.push(m);else{const I=vo(w,v);I!=null&&(u.push(m),c.set(m,I))}}const d=new rn(u);return new yk(c,d,o.fieldTransforms)}function Ek(t,e,n,r=!1){return vo(n,t.pu(r?4:3,e))}function vo(t,e){if(Tk(t=ee(t)))return qw("Unsupported field value:",e,t),Ik(t,e);if(t instanceof _o)return function(r,i){if(!vk(i.Iu))throw i.mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=vo(a,i.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JC(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=De.fromDate(r);return{timestampValue:Va(i.serializer,s)}}if(r instanceof De){const s=new De(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Va(i.serializer,s)}}if(r instanceof kp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wr)return{bytesValue:ub(i.serializer,r._byteString)};if(r instanceof $e){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dw(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.mu(`Unsupported field value: ${bp(r)}`)}(t,e)}function Ik(t,e){const n={};return xC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):go(t,(r,i)=>{const s=vo(i,e.Eu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Tk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof De||t instanceof kp||t instanceof wr||t instanceof $e||t instanceof _o)}function qw(t,e,n){if(!Tk(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=bp(n);throw r==="an object"?e.mu(t+" a custom object"):e.mu(t+" "+r)}}function z_(t,e,n){if((e=ee(e))instanceof Hi)return e._internalPath;if(typeof e=="string")return Ww(t,e);throw Ef("Field path arguments must be of type string or ",t,!1,void 0,n)}const q3=new RegExp("[~\\*/\\[\\]]");function Ww(t,e,n){if(e.search(q3)>=0)throw Ef(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hi(...e.split("."))._internalPath}catch{throw Ef(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ef(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new V(b.INVALID_ARGUMENT,a+t+l)}function Sk(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new W3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Dp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class W3 extends gc{data(){return super.data()}}function Dp(t,e){return typeof e=="string"?Ww(t,e):e instanceof Hi?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new V(b.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hw{}class Zc extends Hw{}function tr(t,e,...n){let r=[];e instanceof Hw&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Gw).length,a=s.filter(l=>l instanceof Op).length;if(o>1||o>0&&a>0)throw new V(b.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Op extends Zc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Op(e,n,r)}_apply(e){const n=this._parse(e);return Pk(e._query,n),new Kt(e.firestore,e.converter,k_(e._query,n))}_parse(e){const n=yo(e.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new V(b.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){lS(d,c);const m=[];for(const w of d)m.push(aS(l,s,w));f={arrayValue:{values:m}}}else f=aS(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||lS(d,c),f=Ek(a,o,d,c==="in"||c==="not-in");return ae.create(u,c,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function q_(t,e,n){const r=e,i=Dp("where",t);return Op._create(i,r,n)}class Gw extends Hw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:we.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)Pk(o,l),o=k_(o,l)}(e._query,n),new Kt(e.firestore,e.converter,k_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Kw extends Zc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Kw(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new V(b.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(b.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hc(s,o)}(e._query,this._field,this._direction);return new Kt(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Zr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function H3(t,e="asc"){const n=e,r=Dp("orderBy",t);return Kw._create(r,n)}class Vp extends Zc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Vp(e,n,r)}_apply(e){return new Kt(e.firestore,e.converter,ff(e._query,this._limit,this._limitType))}}function G3(t){return lk("limit",t),Vp._create("limit",t,"F")}function K3(t){return lk("limitToLast",t),Vp._create("limitToLast",t,"L")}class Lp extends Zc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Lp(e,n,r)}_apply(e){const n=Rk(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,function(i,s){return new Zr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Q3(...t){return Lp._create("startAt",t,!0)}function Y3(...t){return Lp._create("startAfter",t,!1)}class Mp extends Zc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Mp(e,n,r)}_apply(e){const n=Rk(e,this.type,this._docOrFields,this._inclusive);return new Kt(e.firestore,e.converter,function(i,s){return new Zr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function J3(...t){return Mp._create("endBefore",t,!1)}function X3(...t){return Mp._create("endAt",t,!0)}function Rk(t,e,n,r){if(n[0]=ee(n[0]),n[0]instanceof gc)return function(s,o,a,l,u){if(!l)throw new V(b.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const c=[];for(const d of _a(s))if(d.field.isKeyField())c.push(Zs(o,l.key));else{const f=l.data.field(d.field);if(wp(f))throw new V(b.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(f===null){const m=d.field.canonicalString();throw new V(b.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}c.push(f)}return new qi(c,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=yo(t.firestore);return function(o,a,l,u,c,d){const f=o.explicitOrderBy;if(c.length>f.length)throw new V(b.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let w=0;w<c.length;w++){const v=c[w];if(f[w].field.isKeyField()){if(typeof v!="string")throw new V(b.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!sw(o)&&v.indexOf("/")!==-1)throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const I=o.path.child(fe.fromString(v));if(!j.isDocumentKey(I))throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const _=new j(I);m.push(Zs(a,_))}else{const I=Ek(l,u,v);m.push(I)}}return new qi(m,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function aS(t,e,n){if(typeof(n=ee(n))=="string"){if(n==="")throw new V(b.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(e)&&n.indexOf("/")!==-1)throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!j.isDocumentKey(r))throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zs(t,new j(r))}if(n instanceof $e)return Zs(t,n._key);throw new V(b.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bp(n)}.`)}function lS(t,e){if(!Array.isArray(t)||t.length===0)throw new V(b.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Pk(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new V(b.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(b.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Qw{convertValue(e,n="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw H()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return go(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new kp(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rw(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const n=Ui(e);return new De(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);Y(vb(r));const i=new ji(r.get(1),r.get(3)),s=new j(r.popFirst(5));return i.isEqual(n)||et(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Z3 extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Gr=class extends gc{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Dp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Iu=class extends Gr{data(e={}){return super.data(e)}},Gi=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Iu(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new V(b.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:ez(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function ez(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function Ck(t,e){return t instanceof Gr&&e instanceof Gr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Gi&&e instanceof Gi&&t._firestore===e._firestore&&pk(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t){t=me(t,$e);const e=me(t.firestore,Ke);return ik(_t(e),t._key).then(n=>Yw(e,t,n))}class wo extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new wr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,n)}}function nz(t){t=me(t,$e);const e=me(t.firestore,Ke),n=_t(e),r=new wo(e);return w3(n,t._key).then(i=>new Gr(e,r,t._key,i,new Vs(i!==null&&i.hasLocalMutations,!0),t.converter))}function rz(t){t=me(t,$e);const e=me(t.firestore,Ke);return ik(_t(e),t._key,{source:"server"}).then(n=>Yw(e,t,n))}function Ls(t){t=me(t,Kt);const e=me(t.firestore,Ke),n=_t(e),r=new wo(e);return Ak(t._query),sk(n,t._query).then(i=>new Gi(e,r,t,i))}function iz(t){t=me(t,Kt);const e=me(t.firestore,Ke),n=_t(e),r=new wo(e);return E3(n,t._query).then(i=>new Gi(e,r,t,i))}function sz(t){t=me(t,Kt);const e=me(t.firestore,Ke),n=_t(e),r=new wo(e);return sk(n,t._query,{source:"server"}).then(i=>new Gi(e,r,t,i))}function uS(t,e,n){t=me(t,$e);const r=me(t.firestore,Ke),i=Fp(t.converter,e,n);return eh(r,[Np(yo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ne.none())])}function cS(t,e,n,...r){t=me(t,$e);const i=me(t.firestore,Ke),s=yo(i);let o;return o=typeof(e=ee(e))=="string"||e instanceof Hi?zw(s,"updateDoc",t._key,e,n,r):jw(s,"updateDoc",t._key,e),eh(i,[o.toMutation(t._key,Ne.exists(!0))])}function W_(t){return eh(me(t.firestore,Ke),[new ul(t._key,Ne.none())])}function H_(t,e){const n=me(t.firestore,Ke),r=ja(t),i=Fp(t.converter,e);return eh(n,[Np(yo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ne.exists(!1))]).then(()=>r)}function bk(t,...e){var n,r,i;t=ee(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||j_(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(j_(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof $e)u=me(t.firestore,Ke),c=al(t._key.path),l={next:d=>{e[o]&&e[o](Yw(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=me(t,Kt);u=me(d.firestore,Ke),c=d._query;const f=new wo(u);l={next:m=>{e[o]&&e[o](new Gi(u,f,d,m))},error:e[o+1],complete:e[o+2]},Ak(t._query)}return function(f,m,w,v){const I=new Pp(v),_=new bw(m,I,w);return f.asyncQueue.enqueueAndForget(async()=>Rw(await Ua(f),_)),()=>{I.Na(),f.asyncQueue.enqueueAndForget(async()=>Pw(await Ua(f),_))}}(_t(u),c,a,l)}function oz(t,e){return I3(_t(t=me(t,Ke)),j_(e)?e:{next:e})}function eh(t,e){return function(r,i){const s=new dt;return r.asyncQueue.enqueueAndForget(async()=>Yj(await $w(r),i,s)),s.promise}(_t(t),e)}function Yw(t,e,n){const r=n.docs.get(e._key),i=new wo(t);return new Gr(t,i,e._key,r,new Vs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const az={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lz=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yo(e)}set(e,n,r){this._verifyNotCommitted();const i=mi(e,this._firestore),s=Fp(i.converter,n,r),o=Np(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ne.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=mi(e,this._firestore);let o;return o=typeof(n=ee(n))=="string"||n instanceof Hi?zw(this._dataReader,"WriteBatch.update",s._key,n,r,i):jw(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ne.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=mi(e,this._firestore);return this._mutations=this._mutations.concat(new ul(n._key,Ne.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(b.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function mi(t,e){if((t=ee(t)).firestore!==e)throw new V(b.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uz=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=yo(n)}get(n){const r=mi(n,this._firestore),i=new Z3(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return H();const o=s[0];if(o.isFoundDocument())return new gc(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new gc(this._firestore,i,r._key,null,r.converter);throw H()})}set(n,r,i){const s=mi(n,this._firestore),o=Fp(s.converter,r,i),a=Np(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=mi(n,this._firestore);let a;return a=typeof(r=ee(r))=="string"||r instanceof Hi?zw(this._dataReader,"Transaction.update",o._key,r,i,s):jw(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=mi(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=mi(e,this._firestore),r=new wo(this._firestore);return super.get(e).then(i=>new Gr(this._firestore,r,n._key,i._document,new Vs(!1,!1),n.converter))}};function cz(t,e,n){t=me(t,Ke);const r=Object.assign(Object.assign({},az),n);return function(s){if(s.maxAttempts<1)throw new V(b.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new dt;return s.asyncQueue.enqueueAndForget(async()=>{const u=await _3(s);new m3(s.asyncQueue,u,a,o,l).run()}),l.promise}(_t(t),i=>e(new uz(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(){return new Xc("deleteField")}function dz(){return new Bw("serverTimestamp")}function fz(...t){return new B3("arrayUnion",t)}function pz(...t){return new j3("arrayRemove",t)}function mz(t){return new z3("increment",t)}(function(e,n=!0){(function(i){ol=i})(Ji),Mi(new _r("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ke(new R4(r.getProvider("auth-internal")),new k4(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new V(b.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ji(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Kn(i0,"4.4.0",e),Kn(i0,"4.4.0","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,n){this._delegate=e,this.firebase=n,Jd(e,new _r("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),yR(this._delegate)))}_getService(e,n=Vi){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Vi){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Jd(this._delegate,e)}_addOrOverwriteComponent(e){_R(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},hS=new fo("app-compat","Firebase",_z);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yz(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Kn,setLogLevel:wR,onLog:vR,apps:null,SDK_VERSION:Ji,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:HM}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Vi,!yT(e,u))throw hS.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,c={}){const d=Wf(u,c);if(yT(e,d.name))return e[d.name];const f=new t(d,n);return e[d.name]=f,f}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,d=c.replace("-compat","");if(Mi(u)&&u.type==="PUBLIC"){const f=(m=i())=>{if(typeof m[d]!="function")throw hS.create("invalid-app-argument",{appName:c});return m[d]()};u.serviceProps!==void 0&&Qd(f,u.serviceProps),n[d]=f,t.prototype[d]=function(...m){return this._getService.bind(this,c).apply(this,u.multipleInstances?m:[])}}return u.type==="PUBLIC"?n[d]:null}function l(u,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(){const t=yz(gz);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:kk,extendNamespace:e,createSubscribe:fR,ErrorFactory:fo,deepExtend:Qd});function e(n){Qd(t,n)}return t}const vz=kk();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=new qf("@firebase/app-compat"),wz="@firebase/app-compat",Ez="0.2.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(t){Kn(wz,Ez,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(bL()&&self.firebase!==void 0){dS.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&dS.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const pl=vz;Iz();var Tz="firebase",Sz="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pl.registerVersion(Tz,Sz,"app-compat");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=2e3;async function Rz(t,e,n){var r;const{BuildInfo:i}=oo();Yn(e.sessionId,"AuthEvent did not contain a session ID");const s=await xz(e.sessionId),o={};return tl()?o.ibi=i.packageName:kc()?o.apn=i.packageName:ft(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,c_(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function Pz(t){const{BuildInfo:e}=oo(),n={};tl()?n.iosBundleId=e.packageName:kc()?n.androidPackageName=e.packageName:ft(t,"operation-not-supported-in-this-environment"),await dP(t,n)}function Cz(t){const{cordova:e}=oo();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,yF()?"_blank":"_system","location=yes"),n(i)})})}async function bz(t,e,n){const{cordova:r}=oo();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var d;s();const f=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(St(t,"redirect-cancelled-by-user"))},Az))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),kc()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function kz(t){var e,n,r,i,s,o,a,l,u,c;const d=oo();F(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),F(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),F(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),F(typeof((l=(a=(o=d==null?void 0:d.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),F(typeof((c=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function xz(t){const e=Nz(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function Nz(t){if(Yn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=20;class Oz extends cP{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function Vz(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:Fz(),postBody:null,tenantId:t.tenantId,error:St(t,"no-auth-event")}}function Lz(t,e){return G_()._set(K_(t),e)}async function fS(t){const e=await G_()._get(K_(t));return e&&await G_()._remove(K_(t)),e}function Mz(t,e){var n,r;const i=Uz(e);if(i.includes("/__/auth/callback")){const s=vd(i),o=s.firebaseError?$z(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?St(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function Fz(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Dz;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function G_(){return fn(Xf)}function K_(t){return Bs("authEvent",t.config.apiKey,t.name)}function $z(t){try{return JSON.parse(t)}catch{return null}}function Uz(t){const e=vd(t),n=e.link?decodeURIComponent(e.link):void 0,r=vd(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return vd(i).link||i||r||n||t}function vd(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return ra(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bz=500;class jz{constructor(){this._redirectPersistence=Fi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=np,this._overrideRedirectResult=kv}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new Oz(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){ft(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){kz(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),S$(),await this._originValidation(e);const o=Vz(e,r,i);await Lz(e,o);const a=await Rz(e,o,n),l=await Cz(a);return bz(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pz(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=oo(),o=setTimeout(async()=>{await fS(e),n.onEvent(pS())},Bz),a=async c=>{clearTimeout(o);const d=await fS(e);let f=null;d&&(c!=null&&c.url)&&(f=Mz(d,c.url)),n.onEvent(f||pS())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,u=`${s.packageName.toLowerCase()}://`;oo().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(d){console.error(d)}}}}const zz=jz;function pS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:St("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qz(t,e){He(t)._logFramework(e)}var Wz="@firebase/auth-compat",Hz="0.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=1e3;function Tu(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function Kz(){return Tu()==="http:"||Tu()==="https:"}function xk(t=Be()){return!!((Tu()==="file:"||Tu()==="ionic:"||Tu()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qz(){return cv()||uv()}function Yz(){return dR()&&(document==null?void 0:document.documentMode)===11}function Jz(t=Be()){return/Edge\/\d+/.test(t)}function Xz(t=Be()){return Yz()||Jz(t)}function Nk(){try{const t=self.localStorage,e=Nc();if(t)return t.setItem(e,"1"),t.removeItem(e),Xz()?zu():!0}catch{return Jw()&&zu()}return!1}function Jw(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ag(){return(Kz()||hR()||xk())&&!Qz()&&Nk()&&!Jw()}function Dk(){return xk()&&typeof document<"u"}async function Zz(){return Dk()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},Gz);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function e6(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn={LOCAL:"local",NONE:"none",SESSION:"session"},ql=F,Ok="persistence";function t6(t,e){if(ql(Object.values(hn).includes(e),t,"invalid-persistence-type"),cv()){ql(e!==hn.SESSION,t,"unsupported-persistence-type");return}if(uv()){ql(e===hn.NONE,t,"unsupported-persistence-type");return}if(Jw()){ql(e===hn.NONE||e===hn.LOCAL&&zu(),t,"unsupported-persistence-type");return}ql(e===hn.NONE||Nk(),t,"unsupported-persistence-type")}async function Q_(t){await t._initializationPromise;const e=Vk(),n=Bs(Ok,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function n6(t,e){const n=Vk();if(!n)return[];const r=Bs(Ok,t,e);switch(n.getItem(r)){case hn.NONE:return[Ra];case hn.LOCAL:return[Ca,Fi];case hn.SESSION:return[Fi];default:return[]}}function Vk(){var t;try{return((t=e6())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=F;class vi{constructor(){this.browserResolver=fn(fP),this.cordovaResolver=fn(zz),this.underlyingResolver=null,this._redirectPersistence=Fi,this._completeRedirectFn=np,this._overrideRedirectResult=kv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Dk()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return r6(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Zz();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){return t.unwrap()}function i6(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return Mk(t)}function o6(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new a6(t,x2(t,e))}else if(r){const i=Mk(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function Mk(t){const{_tokenResponse:e}=t instanceof zt?t.customData:t;if(!e)return null;if(!(t instanceof zt)&&"temporaryProof"in e&&"phoneNumber"in e)return Js.credentialFromResult(t);const n=e.providerId;if(!n||n===Ll.PASSWORD)return null;let r;switch(n){case Ll.GOOGLE:r=qn;break;case Ll.FACEBOOK:r=rr;break;case Ll.GITHUB:r=ir;break;case Ll.TWITTER:r=sr;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Pa._create(n,a):yr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new fa(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof zt?r.credentialFromError(t):r.credentialFromResult(t)}function Zt(t,e){return e.catch(n=>{throw n instanceof zt&&o6(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:s6(n),additionalUserInfo:C2(n),user:Vr.getOrCreate(i)}})}async function Y_(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Zt(t,n.confirm(r))}}class a6{constructor(e,n){this.resolver=n,this.auth=i6(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Zt(Lk(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._delegate=e,this.multiFactor=V2(e)}static getOrCreate(e){return Vr.USER_MAP.has(e)||Vr.USER_MAP.set(e,new Vr(e)),Vr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Zt(this.auth,GR(this._delegate,e))}async linkWithPhoneNumber(e,n){return Y_(this.auth,d$(this._delegate,e,n))}async linkWithPopup(e){return Zt(this.auth,w$(this._delegate,e,vi))}async linkWithRedirect(e){return await Q_(He(this.auth)),b$(this._delegate,e,vi)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Zt(this.auth,KR(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Y_(this.auth,f$(this._delegate,e,n))}reauthenticateWithPopup(e){return Zt(this.auth,v$(this._delegate,e,vi))}async reauthenticateWithRedirect(e){return await Q_(He(this.auth)),P$(this._delegate,e,vi)}sendEmailVerification(e){return _2(this._delegate,e)}async unlink(e){return await r2(this._delegate,e),this}updateEmail(e){return E2(this._delegate,e)}updatePassword(e){return I2(this._delegate,e)}updatePhoneNumber(e){return p$(this._delegate,e)}updateProfile(e){return w2(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return y2(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vr.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=F;class J_{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Wl(r,"invalid-api-key",{appName:e.name}),Wl(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?vi:void 0;this._delegate=n.initialize({options:{persistence:l6(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(KM),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){$R(this._delegate,e,n)}applyActionCode(e){return l2(this._delegate,e)}checkActionCode(e){return QR(this._delegate,e)}confirmPasswordReset(e,n){return a2(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Zt(this._delegate,c2(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return g2(this._delegate,e)}isSignInWithEmailLink(e){return f2(this._delegate,e)}async getRedirectResult(){Wl(ag(),this._delegate,"operation-not-supported-in-this-environment");const e=await x$(this._delegate,vi);return e?Zt(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){qz(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=mS(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=mS(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return d2(this._delegate,e,n)}sendPasswordResetEmail(e,n){return o2(this._delegate,e,n||void 0)}async setPersistence(e){t6(this._delegate,e);let n;switch(e){case hn.SESSION:n=Fi;break;case hn.LOCAL:n=await fn(Ca)._isAvailable()?Ca:Xf;break;case hn.NONE:n=Ra;break;default:return ft("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Zt(this._delegate,n2(this._delegate))}signInWithCredential(e){return Zt(this._delegate,Yf(this._delegate,e))}signInWithCustomToken(e){return Zt(this._delegate,s2(this._delegate,e))}signInWithEmailAndPassword(e,n){return Zt(this._delegate,h2(this._delegate,e,n))}signInWithEmailLink(e,n){return Zt(this._delegate,p2(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Y_(this._delegate,h$(this._delegate,e,n))}async signInWithPopup(e){return Wl(ag(),this._delegate,"operation-not-supported-in-this-environment"),Zt(this._delegate,oP(this._delegate,e,vi))}async signInWithRedirect(e){return Wl(ag(),this._delegate,"operation-not-supported-in-this-environment"),await Q_(this._delegate),A$(this._delegate,e,vi)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return u2(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}J_.Persistence=hn;function mS(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Vr.getOrCreate(o)),error:e,complete:n}}function l6(t,e){const n=n6(t,e);if(typeof self<"u"&&!n.includes(Ca)&&n.push(Ca),typeof window<"u")for(const r of[Xf,Fi])n.includes(r)||n.push(r);return n.includes(Ra)||n.push(Ra),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.providerId="phone",this._delegate=new Js(Lk(pl.auth()))}static credential(e,n){return Js.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}Xw.PHONE_SIGN_IN_METHOD=Js.PHONE_SIGN_IN_METHOD;Xw.PROVIDER_ID=Js.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6=F;class c6{constructor(e,n,r=pl.app()){var i;u6((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new u$(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="auth-compat";function d6(t){t.INTERNAL.registerComponent(new _r(h6,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new J_(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Do.EMAIL_SIGNIN,PASSWORD_RESET:Do.PASSWORD_RESET,RECOVER_EMAIL:Do.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Do.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Do.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Do.VERIFY_EMAIL}},EmailAuthProvider:Xi,FacebookAuthProvider:rr,GithubAuthProvider:ir,GoogleAuthProvider:qn,OAuthProvider:fa,SAMLAuthProvider:Zd,PhoneAuthProvider:Xw,PhoneMultiFactorGenerator:pP,RecaptchaVerifier:c6,TwitterAuthProvider:sr,Auth:J_,AuthCredential:nl,Error:zt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(Wz,Hz)}d6(pl);const f6="@firebase/firestore-compat",p6="0.3.23";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function _S(){if(!tB())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Fk=class X_{constructor(e){this._delegate=e}static fromBase64String(e){return _S(),new X_(wr.fromBase64String(e))}static fromUint8Array(e){return gS(),new X_(wr.fromUint8Array(e))}toBase64(){return _S(),this._delegate.toBase64()}toUint8Array(){return gS(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){return m6(t,["next","error","complete"])}function m6(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{enableIndexedDbPersistence(e,n){return k3(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return x3(e._delegate)}clearIndexedDbPersistence(e){return N3(e._delegate)}}class $k{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ji||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Xn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){uk(this._delegate,e,n,r)}enableNetwork(){return O3(this._delegate)}disableNetwork(){return V3(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ak("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return D3(this._delegate)}onSnapshotsInSync(e){return oz(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new za(this,Ba(this._delegate,e))}catch(n){throw Ut(n,"collection()","Firestore.collection()")}}doc(e){try{return new bn(this,ja(this._delegate,e))}catch(n){throw Ut(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $t(this,A3(this._delegate,e))}catch(n){throw Ut(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return cz(this._delegate,n=>e(new Uk(this,n)))}batch(){return _t(this._delegate),new Bk(new lz(this._delegate,e=>eh(this._delegate,e)))}loadBundle(e){return L3(this._delegate,e)}namedQuery(e){return M3(this._delegate,e).then(n=>n?new $t(this,n):null)}}class $p extends Qw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fk(new wr(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return bn.forKey(n,this.firestore,null)}}function _6(t){I4(t)}class Uk{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new $p(e)}get(e){const n=Ms(e);return this._delegate.get(n).then(r=>new _c(this._firestore,new Gr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Ms(e);return r?(Zw("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ms(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ms(e);return this._delegate.delete(n),this}}class Bk{constructor(e){this._delegate=e}set(e,n,r){const i=Ms(e);return r?(Zw("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Ms(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Ms(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ao{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Iu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ao.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new ao(e,new $p(e),n),i.set(n,s)),s}}ao.INSTANCES=new WeakMap;class bn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $p(e)}static forPath(e,n,r){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bn(n,new $e(n._delegate,r,new j(e)))}static forKey(e,n,r){return new bn(n,new $e(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new za(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new za(this.firestore,Ba(this._delegate,e))}catch(n){throw Ut(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ee(e),e instanceof $e?fk(this._delegate,e):!1}set(e,n){n=Zw("DocumentReference.set",n);try{return n?uS(this._delegate,e,n):uS(this._delegate,e)}catch(r){throw Ut(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?cS(this._delegate,e):cS(this._delegate,e,n,...r)}catch(i){throw Ut(i,"updateDoc()","DocumentReference.update()")}}delete(){return W_(this._delegate)}onSnapshot(...e){const n=jk(e),r=zk(e,i=>new _c(this.firestore,new Gr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bk(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=nz(this._delegate):(e==null?void 0:e.source)==="server"?n=rz(this._delegate):n=tz(this._delegate),n.then(r=>new _c(this.firestore,new Gr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new bn(this.firestore,e?this._delegate.withConverter(ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ut(t,e,n){return t.message=t.message.replace(e,n),t}function jk(t){for(const e of t)if(typeof e=="object"&&!Z_(e))return e;return{}}function zk(t,e){var n,r;let i;return Z_(t[0])?i=t[0]:Z_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class _c{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return Ck(this._delegate,e._delegate)}}class yc extends _c{data(e){const n=this._delegate.data(e);return this._delegate._converter||T4(n!==void 0),n}}class $t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new $p(e)}where(e,n,r){try{return new $t(this.firestore,tr(this._delegate,q_(e,n,r)))}catch(i){throw Ut(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new $t(this.firestore,tr(this._delegate,H3(e,n)))}catch(r){throw Ut(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $t(this.firestore,tr(this._delegate,G3(e)))}catch(n){throw Ut(n,"limit()","Query.limit()")}}limitToLast(e){try{return new $t(this.firestore,tr(this._delegate,K3(e)))}catch(n){throw Ut(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $t(this.firestore,tr(this._delegate,Q3(...e)))}catch(n){throw Ut(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $t(this.firestore,tr(this._delegate,Y3(...e)))}catch(n){throw Ut(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $t(this.firestore,tr(this._delegate,J3(...e)))}catch(n){throw Ut(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $t(this.firestore,tr(this._delegate,X3(...e)))}catch(n){throw Ut(n,"endAt()","Query.endAt()")}}isEqual(e){return pk(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=iz(this._delegate):(e==null?void 0:e.source)==="server"?n=sz(this._delegate):n=Ls(this._delegate),n.then(r=>new ey(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=jk(e),r=zk(e,i=>new ey(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bk(this._delegate,n,r)}withConverter(e){return new $t(this.firestore,e?this._delegate.withConverter(ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class y6{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new yc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ey{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new $t(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new y6(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new yc(this._firestore,r))})}isEqual(e){return Ck(this._delegate,e._delegate)}}class za extends $t{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bn(this.firestore,e):null}doc(e){try{return e===void 0?new bn(this.firestore,ja(this._delegate)):new bn(this.firestore,ja(this._delegate,e))}catch(n){throw Ut(n,"doc()","CollectionReference.doc()")}}add(e){return H_(this._delegate,e).then(n=>new bn(this.firestore,n))}isEqual(e){return fk(this._delegate,e._delegate)}withConverter(e){return new za(this.firestore,e?this._delegate.withConverter(ao.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ms(t){return me(t,$e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(...e){this._delegate=new Hi(...e)}static documentId(){return new eE(xe.keyField().canonicalString())}isEqual(e){return e=ee(e),e instanceof Hi?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this._delegate=e}static serverTimestamp(){const e=dz();return e._methodName="FieldValue.serverTimestamp",new Cs(e)}static delete(){const e=hz();return e._methodName="FieldValue.delete",new Cs(e)}static arrayUnion(...e){const n=fz(...e);return n._methodName="FieldValue.arrayUnion",new Cs(n)}static arrayRemove(...e){const n=pz(...e);return n._methodName="FieldValue.arrayRemove",new Cs(n)}static increment(e){const n=mz(e);return n._methodName="FieldValue.increment",new Cs(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v6={Firestore:$k,GeoPoint:kp,Timestamp:De,Blob:Fk,Transaction:Uk,WriteBatch:Bk,DocumentReference:bn,DocumentSnapshot:_c,Query:$t,QueryDocumentSnapshot:yc,QuerySnapshot:ey,CollectionReference:za,FieldPath:eE,FieldValue:Cs,setLogLevel:_6,CACHE_SIZE_UNLIMITED:C3};function w6(t,e){t.INTERNAL.registerComponent(new _r("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},v6)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E6(t){w6(t,(e,n)=>new $k(e,n,new g6)),t.registerVersion(f6,p6)}E6(pl);const I6={apiKey:"AIzaSyDPyK9WtC8KXMTHNhw8yJ5Tti-16TO-eXo",authDomain:"movies-c7af5.firebaseapp.com",projectId:"movies-c7af5",storageBucket:"movies-c7af5.appspot.com",messagingSenderId:"792382206679",appId:"1:792382206679:web:a07772fe1e098a0ba33692",measurementId:"G-JGFBNZMT6Z"},tE=Wf(I6);mP(tE).setPersistence(pl.auth.Auth.Persistence.LOCAL);const T6=mP(tE),sa=b3(tE),ty=Ba(sa,"favorites"),ny=Ba(sa,"watchlists"),S6=new qn;var qk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},yS=Lr.createContext&&Lr.createContext(qk),xi=function(){return xi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xi.apply(this,arguments)},A6=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Wk(t){return t&&t.map(function(e,n){return Lr.createElement(e.tag,xi({key:n},e.attr),Wk(e.child))})}function Eo(t){return function(e){return Lr.createElement(R6,xi({attr:xi({},t.attr)},e),Wk(t.child))}}function R6(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=A6(t,["attr","size","title"]),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Lr.createElement("svg",xi({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:xi(xi({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Lr.createElement("title",null,s),t.children)};return yS!==void 0?Lr.createElement(yS.Consumer,null,function(n){return e(n)}):e(qk)}function P6(t){return Eo({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function C6(t){return Eo({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"}}]})(t)}function b6(t){return Eo({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(t)}const k6="/movies/assets/logo-DaOwiTrY.png";function x6(t){return Eo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 192 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l210.7 0-73.4 73.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l128-128zM160 96c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 32C43 32 0 75 0 128L0 384c0 53 43 96 96 96l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l64 0z"}}]})(t)}/**
 * @remix-run/router v1.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vc.apply(this,arguments)}var wi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wi||(wi={}));const vS="popstate";function N6(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return ry("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:If(i)}return O6(e,n,null,t)}function We(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function D6(){return Math.random().toString(36).substr(2,8)}function wS(t,e){return{usr:t.state,key:t.key,idx:e}}function ry(t,e,n,r){return n===void 0&&(n=null),vc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ml(e):e,{state:n,key:e&&e.key||r||D6()})}function If(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ml(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function O6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=wi.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(vc({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=wi.Pop;let I=c(),_=I==null?null:I-u;u=I,l&&l({action:a,location:v.location,delta:_})}function f(I,_){a=wi.Push;let g=ry(v.location,I,_);n&&n(g,I),u=c()+1;let y=wS(g,u),S=v.createHref(g);try{o.pushState(y,"",S)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(S)}s&&l&&l({action:a,location:v.location,delta:1})}function m(I,_){a=wi.Replace;let g=ry(v.location,I,_);n&&n(g,I),u=c();let y=wS(g,u),S=v.createHref(g);o.replaceState(y,"",S),s&&l&&l({action:a,location:v.location,delta:0})}function w(I){let _=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof I=="string"?I:If(I);return We(_,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,_)}let v={get action(){return a},get location(){return t(i,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(vS,d),l=I,()=>{i.removeEventListener(vS,d),l=null}},createHref(I){return e(i,I)},createURL:w,encodeLocation(I){let _=w(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(I){return o.go(I)}};return v}var ES;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ES||(ES={}));function V6(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ml(e):e,i=wc(r.pathname||"/",n);if(i==null)return null;let s=Hk(t);L6(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=W6(s[a],G6(i));return o}function Hk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(We(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ni([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(We(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Hk(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:z6(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Gk(s.path))i(s,o,l)}),e}function Gk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Gk(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function L6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:q6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const M6=/^:\w+$/,F6=3,$6=2,U6=1,B6=10,j6=-2,IS=t=>t==="*";function z6(t,e){let n=t.split("/"),r=n.length;return n.some(IS)&&(r+=j6),e&&(r+=$6),n.filter(i=>!IS(i)).reduce((i,s)=>i+(M6.test(s)?F6:s===""?U6:B6),r)}function q6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function W6(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",c=iy({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let d=a.route;s.push({params:r,pathname:Ni([i,c.pathname]),pathnameBase:X6(Ni([i,c.pathnameBase])),route:d}),c.pathnameBase!=="/"&&(i=Ni([i,c.pathnameBase]))}return s}function iy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=H6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:m}=c;if(f==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const w=a[d];return m&&!w?u[f]=void 0:u[f]=K6(w||"",f),u},{}),pathname:s,pathnameBase:o,pattern:t}}function H6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function G6(t){try{return decodeURI(t)}catch(e){return nE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function K6(t,e){try{return decodeURIComponent(t)}catch(n){return nE(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function wc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Q6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ml(t):t;return{pathname:n?n.startsWith("/")?n:Y6(n,e):e,search:Z6(r),hash:e5(i)}}function Y6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function lg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function J6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Kk(t,e){let n=J6(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qk(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ml(t):(i=vc({},t),We(!i.pathname||!i.pathname.includes("?"),lg("?","pathname","search",i)),We(!i.pathname||!i.pathname.includes("#"),lg("#","pathname","hash",i)),We(!i.search||!i.search.includes("#"),lg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=Q6(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Ni=t=>t.join("/").replace(/\/\/+/g,"/"),X6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Z6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,e5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function t5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yk=["post","put","patch","delete"];new Set(Yk);const n5=["get",...Yk];new Set(n5);/**
 * React Router v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ec(){return Ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ec.apply(this,arguments)}const Up=O.createContext(null),Jk=O.createContext(null),ss=O.createContext(null),Bp=O.createContext(null),os=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Xk=O.createContext(null);function r5(t,e){let{relative:n}=e===void 0?{}:e;th()||We(!1);let{basename:r,navigator:i}=O.useContext(ss),{hash:s,pathname:o,search:a}=jp(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ni([r,o])),i.createHref({pathname:l,search:a,hash:s})}function th(){return O.useContext(Bp)!=null}function Io(){return th()||We(!1),O.useContext(Bp).location}function Zk(t){O.useContext(ss).static||O.useLayoutEffect(t)}function i5(){let{isDataRoute:t}=O.useContext(os);return t?_5():s5()}function s5(){th()||We(!1);let t=O.useContext(Up),{basename:e,future:n,navigator:r}=O.useContext(ss),{matches:i}=O.useContext(os),{pathname:s}=Io(),o=JSON.stringify(Kk(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return Zk(()=>{a.current=!0}),O.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=Qk(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ni([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,s,t])}function ex(){let{matches:t}=O.useContext(os),e=t[t.length-1];return e?e.params:{}}function jp(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(ss),{matches:i}=O.useContext(os),{pathname:s}=Io(),o=JSON.stringify(Kk(i,r.v7_relativeSplatPath));return O.useMemo(()=>Qk(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function o5(t,e){return a5(t,e)}function a5(t,e,n,r){th()||We(!1);let{navigator:i}=O.useContext(ss),{matches:s}=O.useContext(os),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Io(),c;if(e){var d;let I=typeof e=="string"?ml(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||We(!1),c=I}else c=u;let f=c.pathname||"/",m=l==="/"?f:f.slice(l.length)||"/",w=V6(t,{pathname:m}),v=d5(w&&w.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:Ni([l,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:Ni([l,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),s,n,r);return e&&v?O.createElement(Bp.Provider,{value:{location:Ec({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:wi.Pop}},v):v}function l5(){let t=g5(),e=t5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const u5=O.createElement(l5,null);class c5 extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(os.Provider,{value:this.props.routeContext},O.createElement(Xk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h5(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(Up);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(os.Provider,{value:e},r)}function d5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));c>=0||We(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:m}=n,w=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||w){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let m,w=!1,v=null,I=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||u5,l&&(u<0&&f===0?(y5("route-fallback",!1),w=!0,I=null):u===f&&(w=!0,I=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,f+1)),g=()=>{let y;return m?y=v:w?y=I:d.route.Component?y=O.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,O.createElement(h5,{match:d,routeContext:{outlet:c,matches:_,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(c5,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:g(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):g()},null)}var tx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(tx||{}),Tf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tf||{});function f5(t){let e=O.useContext(Up);return e||We(!1),e}function p5(t){let e=O.useContext(Jk);return e||We(!1),e}function m5(t){let e=O.useContext(os);return e||We(!1),e}function nx(t){let e=m5(),n=e.matches[e.matches.length-1];return n.route.id||We(!1),n.route.id}function g5(){var t;let e=O.useContext(Xk),n=p5(Tf.UseRouteError),r=nx(Tf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function _5(){let{router:t}=f5(tx.UseNavigateStable),e=nx(Tf.UseNavigateStable),n=O.useRef(!1);return Zk(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ec({fromRouteId:e},s)))},[t,e])}const TS={};function y5(t,e,n){!e&&!TS[t]&&(TS[t]=!0)}function iu(t){We(!1)}function v5(t){let{basename:e="/",children:n=null,location:r,navigationType:i=wi.Pop,navigator:s,static:o=!1,future:a}=t;th()&&We(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Ec({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ml(r));let{pathname:c="/",search:d="",hash:f="",state:m=null,key:w="default"}=r,v=O.useMemo(()=>{let I=wc(c,l);return I==null?null:{location:{pathname:I,search:d,hash:f,state:m,key:w},navigationType:i}},[l,c,d,f,m,w,i]);return v==null?null:O.createElement(ss.Provider,{value:u},O.createElement(Bp.Provider,{children:n,value:v}))}function w5(t){let{children:e,location:n}=t;return o5(sy(e),n)}new Promise(()=>{});function sy(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,sy(r.props.children,s));return}r.type!==iu&&We(!1),!r.props.index||!r.props.children||We(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=sy(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sf(){return Sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sf.apply(this,arguments)}function rx(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function E5(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function I5(t,e){return t.button===0&&(!e||e==="_self")&&!E5(t)}const T5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],S5=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],A5=O.createContext({isTransitioning:!1}),R5="startTransition",SS=oO[R5];function P5(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=N6({window:i,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=O.useCallback(d=>{u&&SS?SS(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(c),[o,c]),O.createElement(v5,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const C5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",b5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,k5=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=e,f=rx(e,T5),{basename:m}=O.useContext(ss),w,v=!1;if(typeof u=="string"&&b5.test(u)&&(w=u,C5))try{let y=new URL(window.location.href),S=u.startsWith("//")?new URL(y.protocol+u):new URL(u),A=wc(S.pathname,m);S.origin===y.origin&&A!=null?u=A+S.search+S.hash:v=!0}catch{}let I=r5(u,{relative:i}),_=N5(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function g(y){r&&r(y),y.defaultPrevented||_(y)}return O.createElement("a",Sf({},f,{href:w||I,onClick:v||s?r:g,ref:n,target:l}))}),Kr=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,unstable_viewTransition:u,children:c}=e,d=rx(e,S5),f=jp(l,{relative:d.relative}),m=Io(),w=O.useContext(Jk),{navigator:v}=O.useContext(ss),I=w!=null&&D5(f)&&u===!0,_=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,g=m.pathname,y=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;i||(g=g.toLowerCase(),y=y?y.toLowerCase():null,_=_.toLowerCase());const S=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=g===_||!o&&g.startsWith(_)&&g.charAt(S)==="/",R=y!=null&&(y===_||!o&&y.startsWith(_)&&y.charAt(_.length)==="/"),k={isActive:A,isPending:R,isTransitioning:I},$=A?r:void 0,Q;typeof s=="function"?Q=s(k):Q=[s,A?"active":null,R?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let W=typeof a=="function"?a(k):a;return O.createElement(k5,Sf({},d,{"aria-current":$,className:Q,ref:n,style:W,to:l,unstable_viewTransition:u}),typeof c=="function"?c(k):c)});var oy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(oy||(oy={}));var AS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(AS||(AS={}));function x5(t){let e=O.useContext(Up);return e||We(!1),e}function N5(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=i5(),u=Io(),c=jp(t,{relative:o});return O.useCallback(d=>{if(I5(d,n)){d.preventDefault();let f=r!==void 0?r:If(u)===If(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function D5(t,e){e===void 0&&(e={});let n=O.useContext(A5);n==null&&We(!1);let{basename:r}=x5(oy.useViewTransitionState),i=jp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=wc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=wc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return iy(i.pathname,o)!=null||iy(i.pathname,s)!=null}function O5({handleBarClicked:t,user:e,setUser:n,handleSearch:r}){const[i,s]=O.useState(!0),{pathname:o}=Io(),a=()=>{oP(T6,S6).then(u=>{localStorage.setItem("user",JSON.stringify(u.user.auth.currentUser.providerData[0])),n(u.user.auth.currentUser.providerData[0])}).catch(u=>console.log(u.message)),localStorage.setItem("user",e)},l=()=>{n(null),localStorage.removeItem("user")};return O.useEffect(()=>{s(o==="/")},[o]),O.useEffect(()=>{n(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null)},[]),C.jsx("header",{className:"header",children:C.jsxs("nav",{className:"header-container navbar navbar-expand-lg w-100 d-flex justify-content-between align-items-center px-2 px-sm-4",children:[C.jsx("img",{width:"40px",height:"40px",src:k6,alt:"logo",className:"d-none d-md-block"}),C.jsx(P6,{className:"d-md-none",onClick:t}),C.jsx("form",{className:"d-flex",role:"search",onSubmit:u=>{u.preventDefault(),r(u.target.children[0].value,"search"),u.target.children[0].value=""},children:i&&C.jsx("input",{className:"form-control me-2",type:"search",placeholder:"Search for movie","aria-label":"Search"})}),C.jsxs("div",{className:"action profile d-flex",children:[C.jsxs("button",{className:e?"d-none":"login btn",onClick:a,children:[C.jsx("span",{className:"user-icon",children:C.jsx(b6,{})}),"LOGIN"]}),C.jsxs(Kr,{to:"/profile",className:e?"profile-info d-flex align-items-center gap-2":"d-none",children:[C.jsx("img",{className:"avatar-img",src:e==null?void 0:e.photoURL,alt:"avatar"}),C.jsx("span",{className:"avatar-name",children:e==null?void 0:e.displayName})]}),C.jsxs("button",{className:e?"login btn ms-3":"d-none",onClick:l,children:[C.jsx("span",{className:"user-icon",children:C.jsx(x6,{})}),"Logout"]})]})]})})}function ix(t,e){return function(){return t.apply(e,arguments)}}const{toString:V5}=Object.prototype,{getPrototypeOf:rE}=Object,zp=(t=>e=>{const n=V5.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ir=t=>(t=t.toLowerCase(),e=>zp(e)===t),qp=t=>e=>typeof e===t,{isArray:gl}=Array,Ic=qp("undefined");function L5(t){return t!==null&&!Ic(t)&&t.constructor!==null&&!Ic(t.constructor)&&xn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const sx=Ir("ArrayBuffer");function M5(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&sx(t.buffer),e}const F5=qp("string"),xn=qp("function"),ox=qp("number"),Wp=t=>t!==null&&typeof t=="object",$5=t=>t===!0||t===!1,wd=t=>{if(zp(t)!=="object")return!1;const e=rE(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},U5=Ir("Date"),B5=Ir("File"),j5=Ir("Blob"),z5=Ir("FileList"),q5=t=>Wp(t)&&xn(t.pipe),W5=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||xn(t.append)&&((e=zp(t))==="formdata"||e==="object"&&xn(t.toString)&&t.toString()==="[object FormData]"))},H5=Ir("URLSearchParams"),G5=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),gl(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function ax(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const lx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ux=t=>!Ic(t)&&t!==lx;function ay(){const{caseless:t}=ux(this)&&this||{},e={},n=(r,i)=>{const s=t&&ax(e,i)||i;wd(e[s])&&wd(r)?e[s]=ay(e[s],r):wd(r)?e[s]=ay({},r):gl(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&nh(arguments[r],n);return e}const K5=(t,e,n,{allOwnKeys:r}={})=>(nh(e,(i,s)=>{n&&xn(i)?t[s]=ix(i,n):t[s]=i},{allOwnKeys:r}),t),Q5=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Y5=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},J5=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&rE(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},X5=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Z5=t=>{if(!t)return null;if(gl(t))return t;let e=t.length;if(!ox(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},e9=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&rE(Uint8Array)),t9=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},n9=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},r9=Ir("HTMLFormElement"),i9=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),RS=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),s9=Ir("RegExp"),cx=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};nh(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},o9=t=>{cx(t,(e,n)=>{if(xn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(xn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},a9=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return gl(t)?r(t):r(String(t).split(e)),n},l9=()=>{},u9=(t,e)=>(t=+t,Number.isFinite(t)?t:e),ug="abcdefghijklmnopqrstuvwxyz",PS="0123456789",hx={DIGIT:PS,ALPHA:ug,ALPHA_DIGIT:ug+ug.toUpperCase()+PS},c9=(t=16,e=hx.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function h9(t){return!!(t&&xn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const d9=t=>{const e=new Array(10),n=(r,i)=>{if(Wp(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=gl(r)?[]:{};return nh(r,(o,a)=>{const l=n(o,i+1);!Ic(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},f9=Ir("AsyncFunction"),p9=t=>t&&(Wp(t)||xn(t))&&xn(t.then)&&xn(t.catch),N={isArray:gl,isArrayBuffer:sx,isBuffer:L5,isFormData:W5,isArrayBufferView:M5,isString:F5,isNumber:ox,isBoolean:$5,isObject:Wp,isPlainObject:wd,isUndefined:Ic,isDate:U5,isFile:B5,isBlob:j5,isRegExp:s9,isFunction:xn,isStream:q5,isURLSearchParams:H5,isTypedArray:e9,isFileList:z5,forEach:nh,merge:ay,extend:K5,trim:G5,stripBOM:Q5,inherits:Y5,toFlatObject:J5,kindOf:zp,kindOfTest:Ir,endsWith:X5,toArray:Z5,forEachEntry:t9,matchAll:n9,isHTMLForm:r9,hasOwnProperty:RS,hasOwnProp:RS,reduceDescriptors:cx,freezeMethods:o9,toObjectSet:a9,toCamelCase:i9,noop:l9,toFiniteNumber:u9,findKey:ax,global:lx,isContextDefined:ux,ALPHABET:hx,generateString:c9,isSpecCompliantForm:h9,toJSONObject:d9,isAsyncFn:f9,isThenable:p9};function de(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}N.inherits(de,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const dx=de.prototype,fx={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{fx[t]={value:t}});Object.defineProperties(de,fx);Object.defineProperty(dx,"isAxiosError",{value:!0});de.from=(t,e,n,r,i,s)=>{const o=Object.create(dx);return N.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),de.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const m9=null;function ly(t){return N.isPlainObject(t)||N.isArray(t)}function px(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function CS(t,e,n){return t?t.concat(e).map(function(i,s){return i=px(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function g9(t){return N.isArray(t)&&!t.some(ly)}const _9=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function Hp(t,e,n){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=N.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,I){return!N.isUndefined(I[v])});const r=n.metaTokens,i=n.visitor||c,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(i))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if(N.isDate(w))return w.toISOString();if(!l&&N.isBlob(w))throw new de("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(w)||N.isTypedArray(w)?l&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function c(w,v,I){let _=w;if(w&&!I&&typeof w=="object"){if(N.endsWith(v,"{}"))v=r?v:v.slice(0,-2),w=JSON.stringify(w);else if(N.isArray(w)&&g9(w)||(N.isFileList(w)||N.endsWith(v,"[]"))&&(_=N.toArray(w)))return v=px(v),_.forEach(function(y,S){!(N.isUndefined(y)||y===null)&&e.append(o===!0?CS([v],S,s):o===null?v:v+"[]",u(y))}),!1}return ly(w)?!0:(e.append(CS(I,v,s),u(w)),!1)}const d=[],f=Object.assign(_9,{defaultVisitor:c,convertValue:u,isVisitable:ly});function m(w,v){if(!N.isUndefined(w)){if(d.indexOf(w)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(w),N.forEach(w,function(_,g){(!(N.isUndefined(_)||_===null)&&i.call(e,_,N.isString(g)?g.trim():g,v,f))===!0&&m(_,v?v.concat(g):[g])}),d.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return m(t),e}function bS(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function iE(t,e){this._pairs=[],t&&Hp(t,this,e)}const mx=iE.prototype;mx.append=function(e,n){this._pairs.push([e,n])};mx.toString=function(e){const n=e?function(r){return e.call(this,r,bS)}:bS;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function y9(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function gx(t,e,n){if(!e)return t;const r=n&&n.encode||y9,i=n&&n.serialize;let s;if(i?s=i(e,n):s=N.isURLSearchParams(e)?e.toString():new iE(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class kS{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(r){r!==null&&e(r)})}}const _x={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},v9=typeof URLSearchParams<"u"?URLSearchParams:iE,w9=typeof FormData<"u"?FormData:null,E9=typeof Blob<"u"?Blob:null,I9={isBrowser:!0,classes:{URLSearchParams:v9,FormData:w9,Blob:E9},protocols:["http","https","file","blob","url","data"]},yx=typeof window<"u"&&typeof document<"u",T9=(t=>yx&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),S9=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",A9=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:yx,hasStandardBrowserEnv:T9,hasStandardBrowserWebWorkerEnv:S9},Symbol.toStringTag,{value:"Module"})),dr={...A9,...I9};function R9(t,e){return Hp(t,new dr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return dr.isNode&&N.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function P9(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function C9(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function vx(t){function e(n,r,i,s){let o=n[s++];const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&N.isArray(i)?i.length:o,l?(N.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!N.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&N.isArray(i[o])&&(i[o]=C9(i[o])),!a)}if(N.isFormData(t)&&N.isFunction(t.entries)){const n={};return N.forEachEntry(t,(r,i)=>{e(P9(r),i,n,0)}),n}return null}function b9(t,e,n){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sE={transitional:_x,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=N.isObject(e);if(s&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return i&&i?JSON.stringify(vx(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return R9(e,this.formSerializer).toString();if((a=N.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Hp(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),b9(e)):e}],transformResponse:[function(e){const n=this.transitional||sE.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&N.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?de.from(a,de.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dr.classes.FormData,Blob:dr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],t=>{sE.headers[t]={}});const oE=sE,k9=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x9=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&k9[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},xS=Symbol("internals");function Hl(t){return t&&String(t).trim().toLowerCase()}function Ed(t){return t===!1||t==null?t:N.isArray(t)?t.map(Ed):String(t)}function N9(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const D9=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function cg(t,e,n,r,i){if(N.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!N.isString(e)){if(N.isString(r))return e.indexOf(r)!==-1;if(N.isRegExp(r))return r.test(e)}}function O9(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function V9(t,e){const n=N.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class Gp{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,u){const c=Hl(l);if(!c)throw new Error("header name must be a non-empty string");const d=N.findKey(i,c);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||l]=Ed(a))}const o=(a,l)=>N.forEach(a,(u,c)=>s(u,c,l));return N.isPlainObject(e)||e instanceof this.constructor?o(e,n):N.isString(e)&&(e=e.trim())&&!D9(e)?o(x9(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=Hl(e),e){const r=N.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return N9(i);if(N.isFunction(n))return n.call(this,i,r);if(N.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Hl(e),e){const r=N.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||cg(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Hl(o),o){const a=N.findKey(r,o);a&&(!n||cg(r,r[a],a,n))&&(delete r[a],i=!0)}}return N.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||cg(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return N.forEach(this,(i,s)=>{const o=N.findKey(r,s);if(o){n[o]=Ed(i),delete n[s];return}const a=e?O9(s):String(s).trim();a!==s&&delete n[s],n[a]=Ed(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return N.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&N.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[xS]=this[xS]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Hl(o);r[a]||(V9(i,o),r[a]=!0)}return N.isArray(e)?e.forEach(s):s(e),this}}Gp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(Gp.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});N.freezeMethods(Gp);const Ur=Gp;function hg(t,e){const n=this||oE,r=e||n,i=Ur.from(r.headers);let s=r.data;return N.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function wx(t){return!!(t&&t.__CANCEL__)}function rh(t,e,n){de.call(this,t??"canceled",de.ERR_CANCELED,e,n),this.name="CanceledError"}N.inherits(rh,de,{__CANCEL__:!0});function L9(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new de("Request failed with status code "+n.status,[de.ERR_BAD_REQUEST,de.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const M9=dr.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];N.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),N.isString(r)&&o.push("path="+r),N.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function F9(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function $9(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ex(t,e){return t&&!F9(e)?$9(t,e):e}const U9=dr.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const a=N.isString(o)?i(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function B9(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function j9(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),c=r[s];o||(o=u),n[i]=l,r[i]=u;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),u-o<e)return;const m=c&&u-c;return m?Math.round(f*1e3/m):void 0}}function NS(t,e){let n=0;const r=j9(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,l=r(a),u=s<=o;n=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&u?(o-s)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const z9=typeof XMLHttpRequest<"u",q9=z9&&function(t){return new Promise(function(n,r){let i=t.data;const s=Ur.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function u(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let c;if(N.isFormData(i)){if(dr.hasStandardBrowserEnv||dr.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if((c=s.getContentType())!==!1){const[v,...I]=c?c.split(";").map(_=>_.trim()).filter(Boolean):[];s.setContentType([v||"multipart/form-data",...I].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const v=t.auth.username||"",I=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(v+":"+I))}const f=Ex(t.baseURL,t.url);d.open(t.method.toUpperCase(),gx(f,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function m(){if(!d)return;const v=Ur.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),_={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:v,config:t,request:d};L9(function(y){n(y),u()},function(y){r(y),u()},_),d=null}if("onloadend"in d?d.onloadend=m:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(m)},d.onabort=function(){d&&(r(new de("Request aborted",de.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new de("Network Error",de.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let I=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const _=t.transitional||_x;t.timeoutErrorMessage&&(I=t.timeoutErrorMessage),r(new de(I,_.clarifyTimeoutError?de.ETIMEDOUT:de.ECONNABORTED,t,d)),d=null},dr.hasStandardBrowserEnv&&(a&&N.isFunction(a)&&(a=a(t)),a||a!==!1&&U9(f))){const v=t.xsrfHeaderName&&t.xsrfCookieName&&M9.read(t.xsrfCookieName);v&&s.set(t.xsrfHeaderName,v)}i===void 0&&s.setContentType(null),"setRequestHeader"in d&&N.forEach(s.toJSON(),function(I,_){d.setRequestHeader(_,I)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",NS(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",NS(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=v=>{d&&(r(!v||v.type?new rh(null,t,d):v),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const w=B9(f);if(w&&dr.protocols.indexOf(w)===-1){r(new de("Unsupported protocol "+w+":",de.ERR_BAD_REQUEST,t));return}d.send(i||null)})},uy={http:m9,xhr:q9};N.forEach(uy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const DS=t=>`- ${t}`,W9=t=>N.isFunction(t)||t===null||t===!1,Ix={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!W9(n)&&(r=uy[(o=String(n)).toLowerCase()],r===void 0))throw new de(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(DS).join(`
`):" "+DS(s[0]):"as no adapter specified";throw new de("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:uy};function dg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rh(null,t)}function OS(t){return dg(t),t.headers=Ur.from(t.headers),t.data=hg.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ix.getAdapter(t.adapter||oE.adapter)(t).then(function(r){return dg(t),r.data=hg.call(t,t.transformResponse,r),r.headers=Ur.from(r.headers),r},function(r){return wx(r)||(dg(t),r&&r.response&&(r.response.data=hg.call(t,t.transformResponse,r.response),r.response.headers=Ur.from(r.response.headers))),Promise.reject(r)})}const VS=t=>t instanceof Ur?t.toJSON():t;function qa(t,e){e=e||{};const n={};function r(u,c,d){return N.isPlainObject(u)&&N.isPlainObject(c)?N.merge.call({caseless:d},u,c):N.isPlainObject(c)?N.merge({},c):N.isArray(c)?c.slice():c}function i(u,c,d){if(N.isUndefined(c)){if(!N.isUndefined(u))return r(void 0,u,d)}else return r(u,c,d)}function s(u,c){if(!N.isUndefined(c))return r(void 0,c)}function o(u,c){if(N.isUndefined(c)){if(!N.isUndefined(u))return r(void 0,u)}else return r(void 0,c)}function a(u,c,d){if(d in e)return r(u,c);if(d in t)return r(void 0,u)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,c)=>i(VS(u),VS(c),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(c){const d=l[c]||i,f=d(t[c],e[c],c);N.isUndefined(f)&&d!==a||(n[c]=f)}),n}const Tx="1.6.3",aE={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{aE[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const LS={};aE.transitional=function(e,n,r){function i(s,o){return"[Axios v"+Tx+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new de(i(o," has been removed"+(n?" in "+n:"")),de.ERR_DEPRECATED);return n&&!LS[o]&&(LS[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};function H9(t,e,n){if(typeof t!="object")throw new de("options must be an object",de.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new de("option "+s+" must be "+l,de.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new de("Unknown option "+s,de.ERR_BAD_OPTION)}}const cy={assertOptions:H9,validators:aE},ui=cy.validators;class Af{constructor(e){this.defaults=e,this.interceptors={request:new kS,response:new kS}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=qa(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&cy.assertOptions(r,{silentJSONParsing:ui.transitional(ui.boolean),forcedJSONParsing:ui.transitional(ui.boolean),clarifyTimeoutError:ui.transitional(ui.boolean)},!1),i!=null&&(N.isFunction(i)?n.paramsSerializer={serialize:i}:cy.assertOptions(i,{encode:ui.function,serialize:ui.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&N.merge(s.common,s[n.method]);s&&N.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=Ur.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(l=l&&v.synchronous,a.unshift(v.fulfilled,v.rejected))});const u=[];this.interceptors.response.forEach(function(v){u.push(v.fulfilled,v.rejected)});let c,d=0,f;if(!l){const w=[OS.bind(this),void 0];for(w.unshift.apply(w,a),w.push.apply(w,u),f=w.length,c=Promise.resolve(n);d<f;)c=c.then(w[d++],w[d++]);return c}f=a.length;let m=n;for(d=0;d<f;){const w=a[d++],v=a[d++];try{m=w(m)}catch(I){v.call(this,I);break}}try{c=OS.call(this,m)}catch(w){return Promise.reject(w)}for(d=0,f=u.length;d<f;)c=c.then(u[d++],u[d++]);return c}getUri(e){e=qa(this.defaults,e);const n=Ex(e.baseURL,e.url);return gx(n,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){Af.prototype[e]=function(n,r){return this.request(qa(r||{},{method:e,url:n,data:(r||{}).data}))}});N.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(qa(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Af.prototype[e]=n(),Af.prototype[e+"Form"]=n(!0)});const Id=Af;class lE{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new rh(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new lE(function(i){e=i}),cancel:e}}}const G9=lE;function K9(t){return function(n){return t.apply(null,n)}}function Q9(t){return N.isObject(t)&&t.isAxiosError===!0}const hy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hy).forEach(([t,e])=>{hy[e]=t});const Y9=hy;function Sx(t){const e=new Id(t),n=ix(Id.prototype.request,e);return N.extend(n,Id.prototype,e,{allOwnKeys:!0}),N.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return Sx(qa(t,i))},n}const je=Sx(oE);je.Axios=Id;je.CanceledError=rh;je.CancelToken=G9;je.isCancel=wx;je.VERSION=Tx;je.toFormData=Hp;je.AxiosError=de;je.Cancel=je.CanceledError;je.all=function(e){return Promise.all(e)};je.spread=K9;je.isAxiosError=Q9;je.mergeConfig=qa;je.AxiosHeaders=Ur;je.formToJSON=t=>vx(N.isHTMLForm(t)?new FormData(t):t);je.getAdapter=Ix.getAdapter;je.HttpStatusCode=Y9;je.default=je;function J9({barClicked:t,setBarClicked:e,handleChangeGenre:n,handleClickNavItems:r,setTitle:i}){const s=["All","Top Rated","Popular","UpComing"],[o,a]=O.useState([]),l=async()=>{const u=await je.get("https://api.themoviedb.org/3/genre/movie/list?api_key=56b4c65fbfa0edfe0748a22f207e0133");a(u.data.genres)};return O.useEffect(()=>{l()}),C.jsxs("div",{className:t?"sidebar show-side-bar":"sidebar d-none d-md-block",children:[C.jsx("h1",{className:"logo d-none d-md-block",children:"MoviesLand"}),C.jsxs("ul",{className:"sidebar-lists",children:[C.jsxs("div",{className:"sidebar-section",children:[C.jsx("h5",{className:"sidebar-filter",children:"Categories"}),s==null?void 0:s.map((u,c)=>C.jsx(Kr,{to:"/",className:"item",onClick:()=>{i(u+" movies"),r(u)},children:u},c))]}),C.jsxs("div",{className:"sidebar-section",children:[C.jsx("h5",{className:"sidebar-filter",children:"Genres"}),o==null?void 0:o.map(u=>C.jsx(Kr,{to:"/",onClick:c=>{i(u.name+" movies"),n(c.target.id,"genre")},className:"item",id:u.id,children:u.name},u.id))]})]})]})}function X9(t){return C.jsx("div",{className:"main",ref:t.mainRef,children:C.jsx("div",{className:"main-container",children:t.children})})}function Z9({nPages:t,cPage:e,setCPage:n}){const[r,i]=O.useState(!0),{pathname:s}=Io();let o;return e<=t&&(t===2?o=[1,2]:e===500||e===t?o=[e-2,e-1,e]:e%3===1||e%3===3?o=[e,e+1,e+2]:e%3===2?o=[e-1,e,e+1]:e%3===0&&(o=[e-2,e-1,e])),O.useEffect(()=>{i(s==="/")},[s]),C.jsx("nav",{"aria-label":"...",className:t===1||!r?"d-none":"d-flex justify-content-center pb-5",children:C.jsxs("ul",{className:"pagination",children:[C.jsx("li",{onClick:()=>n(1),className:`page-item ${e===1&&"d-none"}`,children:C.jsx("span",{className:"page-link","aria-label":"Previous",children:C.jsx("span",{"aria-hidden":"true",children:""})})}),C.jsx("li",{onClick:()=>e>1&&n(e-1),className:`page-item ${e===1&&"d-none"}`,children:C.jsx("span",{className:"page-link",children:"Prev"})}),o==null?void 0:o.map(a=>C.jsx("li",{onClick:()=>n(a),className:`page-item ${e===a?"active":""}`,children:C.jsx("span",{className:"page-link",children:a})},a)),C.jsx("li",{onClick:()=>n(e+1),className:`page-item ${e===t&&"d-none"}`,children:C.jsx("span",{className:"page-link",children:"Next"})}),C.jsx("li",{onClick:()=>n(t),className:`page-item ${e===t&&"d-none"}`,children:C.jsx("span",{className:"page-link","aria-label":"Next",children:C.jsx("span",{"aria-hidden":"true",children:""})})})]})})}var eq={exports:{}},Ht="top",yn="bottom",vn="right",Gt="left",Kp="auto",_l=[Ht,yn,vn,Gt],lo="start",Wa="end",Ax="clippingParents",uE="viewport",qo="popper",Rx="reference",dy=_l.reduce(function(t,e){return t.concat([e+"-"+lo,e+"-"+Wa])},[]),cE=[].concat(_l,[Kp]).reduce(function(t,e){return t.concat([e,e+"-"+lo,e+"-"+Wa])},[]),Px="beforeRead",Cx="read",bx="afterRead",kx="beforeMain",xx="main",Nx="afterMain",Dx="beforeWrite",Ox="write",Vx="afterWrite",Lx=[Px,Cx,bx,kx,xx,Nx,Dx,Ox,Vx];function Er(t){return t?(t.nodeName||"").toLowerCase():null}function wn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function uo(t){var e=wn(t).Element;return t instanceof e||t instanceof Element}function Nn(t){var e=wn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function hE(t){if(typeof ShadowRoot>"u")return!1;var e=wn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function tq(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Nn(s)||!Er(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function nq(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!Nn(i)||!Er(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const dE={name:"applyStyles",enabled:!0,phase:"write",fn:tq,effect:nq,requires:["computeStyles"]};function gr(t){return t.split("-")[0]}var qs=Math.max,Rf=Math.min,Ha=Math.round;function fy(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Mx(){return!/^((?!chrome|android).)*safari/i.test(fy())}function Ga(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Nn(t)&&(i=t.offsetWidth>0&&Ha(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Ha(r.height)/t.offsetHeight||1);var o=uo(t)?wn(t):window,a=o.visualViewport,l=!Mx()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:c,right:u+d,bottom:c+f,left:u,x:u,y:c}}function fE(t){var e=Ga(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Fx(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&hE(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qr(t){return wn(t).getComputedStyle(t)}function rq(t){return["table","td","th"].indexOf(Er(t))>=0}function as(t){return((uo(t)?t.ownerDocument:t.document)||window.document).documentElement}function Qp(t){return Er(t)==="html"?t:t.assignedSlot||t.parentNode||(hE(t)?t.host:null)||as(t)}function MS(t){return!Nn(t)||Qr(t).position==="fixed"?null:t.offsetParent}function iq(t){var e=/firefox/i.test(fy()),n=/Trident/i.test(fy());if(n&&Nn(t)){var r=Qr(t);if(r.position==="fixed")return null}var i=Qp(t);for(hE(i)&&(i=i.host);Nn(i)&&["html","body"].indexOf(Er(i))<0;){var s=Qr(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function ih(t){for(var e=wn(t),n=MS(t);n&&rq(n)&&Qr(n).position==="static";)n=MS(n);return n&&(Er(n)==="html"||Er(n)==="body"&&Qr(n).position==="static")?e:n||iq(t)||e}function pE(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Su(t,e,n){return qs(t,Rf(e,n))}function sq(t,e,n){var r=Su(t,e,n);return r>n?n:r}function $x(){return{top:0,right:0,bottom:0,left:0}}function Ux(t){return Object.assign({},$x(),t)}function Bx(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var oq=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Ux(typeof e!="number"?e:Bx(e,_l))};function aq(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=gr(n.placement),l=pE(a),u=[Gt,vn].indexOf(a)>=0,c=u?"height":"width";if(!(!s||!o)){var d=oq(i.padding,n),f=fE(s),m=l==="y"?Ht:Gt,w=l==="y"?yn:vn,v=n.rects.reference[c]+n.rects.reference[l]-o[l]-n.rects.popper[c],I=o[l]-n.rects.reference[l],_=ih(s),g=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,y=v/2-I/2,S=d[m],A=g-f[c]-d[w],R=g/2-f[c]/2+y,k=Su(S,R,A),$=l;n.modifiersData[r]=(e={},e[$]=k,e.centerOffset=k-R,e)}}function lq(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Fx(e.elements.popper,i)&&(e.elements.arrow=i))}const jx={name:"arrow",enabled:!0,phase:"main",fn:aq,effect:lq,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ka(t){return t.split("-")[1]}var uq={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cq(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Ha(n*i)/i||0,y:Ha(r*i)/i||0}}function FS(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,c=t.roundOffsets,d=t.isFixed,f=o.x,m=f===void 0?0:f,w=o.y,v=w===void 0?0:w,I=typeof c=="function"?c({x:m,y:v}):{x:m,y:v};m=I.x,v=I.y;var _=o.hasOwnProperty("x"),g=o.hasOwnProperty("y"),y=Gt,S=Ht,A=window;if(u){var R=ih(n),k="clientHeight",$="clientWidth";if(R===wn(n)&&(R=as(n),Qr(R).position!=="static"&&a==="absolute"&&(k="scrollHeight",$="scrollWidth")),R=R,i===Ht||(i===Gt||i===vn)&&s===Wa){S=yn;var Q=d&&R===A&&A.visualViewport?A.visualViewport.height:R[k];v-=Q-r.height,v*=l?1:-1}if(i===Gt||(i===Ht||i===yn)&&s===Wa){y=vn;var W=d&&R===A&&A.visualViewport?A.visualViewport.width:R[$];m-=W-r.width,m*=l?1:-1}}var ie=Object.assign({position:a},u&&uq),Oe=c===!0?cq({x:m,y:v},wn(n)):{x:m,y:v};if(m=Oe.x,v=Oe.y,l){var ge;return Object.assign({},ie,(ge={},ge[S]=g?"0":"",ge[y]=_?"0":"",ge.transform=(A.devicePixelRatio||1)<=1?"translate("+m+"px, "+v+"px)":"translate3d("+m+"px, "+v+"px, 0)",ge))}return Object.assign({},ie,(e={},e[S]=g?v+"px":"",e[y]=_?m+"px":"",e.transform="",e))}function hq(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:gr(e.placement),variation:Ka(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,FS(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,FS(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const mE={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hq,data:{}};var Kh={passive:!0};function dq(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=wn(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",n.update,Kh)}),a&&l.addEventListener("resize",n.update,Kh),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",n.update,Kh)}),a&&l.removeEventListener("resize",n.update,Kh)}}const gE={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dq,data:{}};var fq={left:"right",right:"left",bottom:"top",top:"bottom"};function Td(t){return t.replace(/left|right|bottom|top/g,function(e){return fq[e]})}var pq={start:"end",end:"start"};function $S(t){return t.replace(/start|end/g,function(e){return pq[e]})}function _E(t){var e=wn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function yE(t){return Ga(as(t)).left+_E(t).scrollLeft}function mq(t,e){var n=wn(t),r=as(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=Mx();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+yE(t),y:l}}function gq(t){var e,n=as(t),r=_E(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=qs(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=qs(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+yE(t),l=-r.scrollTop;return Qr(i||n).direction==="rtl"&&(a+=qs(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function vE(t){var e=Qr(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function zx(t){return["html","body","#document"].indexOf(Er(t))>=0?t.ownerDocument.body:Nn(t)&&vE(t)?t:zx(Qp(t))}function Au(t,e){var n;e===void 0&&(e=[]);var r=zx(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=wn(r),o=i?[s].concat(s.visualViewport||[],vE(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Au(Qp(o)))}function py(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function _q(t,e){var n=Ga(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function US(t,e,n){return e===uE?py(mq(t,n)):uo(e)?_q(e,n):py(gq(as(t)))}function yq(t){var e=Au(Qp(t)),n=["absolute","fixed"].indexOf(Qr(t).position)>=0,r=n&&Nn(t)?ih(t):t;return uo(r)?e.filter(function(i){return uo(i)&&Fx(i,r)&&Er(i)!=="body"}):[]}function vq(t,e,n,r){var i=e==="clippingParents"?yq(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,u){var c=US(t,u,r);return l.top=qs(c.top,l.top),l.right=Rf(c.right,l.right),l.bottom=Rf(c.bottom,l.bottom),l.left=qs(c.left,l.left),l},US(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function qx(t){var e=t.reference,n=t.element,r=t.placement,i=r?gr(r):null,s=r?Ka(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Ht:l={x:o,y:e.y-n.height};break;case yn:l={x:o,y:e.y+e.height};break;case vn:l={x:e.x+e.width,y:a};break;case Gt:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?pE(i):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case lo:l[u]=l[u]-(e[c]/2-n[c]/2);break;case Wa:l[u]=l[u]+(e[c]/2-n[c]/2);break}}return l}function Qa(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Ax:a,u=n.rootBoundary,c=u===void 0?uE:u,d=n.elementContext,f=d===void 0?qo:d,m=n.altBoundary,w=m===void 0?!1:m,v=n.padding,I=v===void 0?0:v,_=Ux(typeof I!="number"?I:Bx(I,_l)),g=f===qo?Rx:qo,y=t.rects.popper,S=t.elements[w?g:f],A=vq(uo(S)?S:S.contextElement||as(t.elements.popper),l,c,o),R=Ga(t.elements.reference),k=qx({reference:R,element:y,strategy:"absolute",placement:i}),$=py(Object.assign({},y,k)),Q=f===qo?$:R,W={top:A.top-Q.top+_.top,bottom:Q.bottom-A.bottom+_.bottom,left:A.left-Q.left+_.left,right:Q.right-A.right+_.right},ie=t.modifiersData.offset;if(f===qo&&ie){var Oe=ie[i];Object.keys(W).forEach(function(ge){var Ot=[vn,yn].indexOf(ge)>=0?1:-1,Vt=[Ht,yn].indexOf(ge)>=0?"y":"x";W[ge]+=Oe[Vt]*Ot})}return W}function wq(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?cE:l,c=Ka(r),d=c?a?dy:dy.filter(function(w){return Ka(w)===c}):_l,f=d.filter(function(w){return u.indexOf(w)>=0});f.length===0&&(f=d);var m=f.reduce(function(w,v){return w[v]=Qa(t,{placement:v,boundary:i,rootBoundary:s,padding:o})[gr(v)],w},{});return Object.keys(m).sort(function(w,v){return m[w]-m[v]})}function Eq(t){if(gr(t)===Kp)return[];var e=Td(t);return[$S(t),e,$S(e)]}function Iq(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,c=n.boundary,d=n.rootBoundary,f=n.altBoundary,m=n.flipVariations,w=m===void 0?!0:m,v=n.allowedAutoPlacements,I=e.options.placement,_=gr(I),g=_===I,y=l||(g||!w?[Td(I)]:Eq(I)),S=[I].concat(y).reduce(function(Xe,yt){return Xe.concat(gr(yt)===Kp?wq(e,{placement:yt,boundary:c,rootBoundary:d,padding:u,flipVariations:w,allowedAutoPlacements:v}):yt)},[]),A=e.rects.reference,R=e.rects.popper,k=new Map,$=!0,Q=S[0],W=0;W<S.length;W++){var ie=S[W],Oe=gr(ie),ge=Ka(ie)===lo,Ot=[Ht,yn].indexOf(Oe)>=0,Vt=Ot?"width":"height",Ve=Qa(e,{placement:ie,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),Je=Ot?ge?vn:Gt:ge?yn:Ht;A[Vt]>R[Vt]&&(Je=Td(Je));var U=Td(Je),Z=[];if(s&&Z.push(Ve[Oe]<=0),a&&Z.push(Ve[Je]<=0,Ve[U]<=0),Z.every(function(Xe){return Xe})){Q=ie,$=!1;break}k.set(ie,Z)}if($)for(var te=w?3:1,ye=function(yt){var ce=S.find(function(_e){var Lt=k.get(_e);if(Lt)return Lt.slice(0,yt).every(function(Mt){return Mt})});if(ce)return Q=ce,"break"},ve=te;ve>0;ve--){var D=ye(ve);if(D==="break")break}e.placement!==Q&&(e.modifiersData[r]._skip=!0,e.placement=Q,e.reset=!0)}}const Wx={name:"flip",enabled:!0,phase:"main",fn:Iq,requiresIfExists:["offset"],data:{_skip:!1}};function BS(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function jS(t){return[Ht,vn,yn,Gt].some(function(e){return t[e]>=0})}function Tq(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Qa(e,{elementContext:"reference"}),a=Qa(e,{altBoundary:!0}),l=BS(o,r),u=BS(a,i,s),c=jS(l),d=jS(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}const Hx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Tq};function Sq(t,e,n){var r=gr(t),i=[Gt,Ht].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Gt,vn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Aq(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=cE.reduce(function(c,d){return c[d]=Sq(d,e.rects,s),c},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const Gx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Aq};function Rq(t){var e=t.state,n=t.name;e.modifiersData[n]=qx({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const wE={name:"popperOffsets",enabled:!0,phase:"read",fn:Rq,data:{}};function Pq(t){return t==="x"?"y":"x"}function Cq(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,c=n.altBoundary,d=n.padding,f=n.tether,m=f===void 0?!0:f,w=n.tetherOffset,v=w===void 0?0:w,I=Qa(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),_=gr(e.placement),g=Ka(e.placement),y=!g,S=pE(_),A=Pq(S),R=e.modifiersData.popperOffsets,k=e.rects.reference,$=e.rects.popper,Q=typeof v=="function"?v(Object.assign({},e.rects,{placement:e.placement})):v,W=typeof Q=="number"?{mainAxis:Q,altAxis:Q}:Object.assign({mainAxis:0,altAxis:0},Q),ie=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Oe={x:0,y:0};if(R){if(s){var ge,Ot=S==="y"?Ht:Gt,Vt=S==="y"?yn:vn,Ve=S==="y"?"height":"width",Je=R[S],U=Je+I[Ot],Z=Je-I[Vt],te=m?-$[Ve]/2:0,ye=g===lo?k[Ve]:$[Ve],ve=g===lo?-$[Ve]:-k[Ve],D=e.elements.arrow,Xe=m&&D?fE(D):{width:0,height:0},yt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$x(),ce=yt[Ot],_e=yt[Vt],Lt=Su(0,k[Ve],Xe[Ve]),Mt=y?k[Ve]/2-te-Lt-ce-W.mainAxis:ye-Lt-ce-W.mainAxis,yl=y?-k[Ve]/2+te+Lt+_e+W.mainAxis:ve+Lt+_e+W.mainAxis,X=e.elements.arrow&&ih(e.elements.arrow),To=X?S==="y"?X.clientTop||0:X.clientLeft||0:0,vl=(ge=ie==null?void 0:ie[S])!=null?ge:0,Jp=Je+Mt-vl-To,Xp=Je+yl-vl,ni=Su(m?Rf(U,Jp):U,Je,m?qs(Z,Xp):Z);R[S]=ni,Oe[S]=ni-Je}if(a){var wl,ls=S==="x"?Ht:Gt,ri=S==="x"?yn:vn,Tr=R[A],So=A==="y"?"height":"width",sh=Tr+I[ls],oh=Tr-I[ri],El=[Ht,Gt].indexOf(_)!==-1,ah=(wl=ie==null?void 0:ie[A])!=null?wl:0,lh=El?sh:Tr-k[So]-$[So]-ah+W.altAxis,us=El?Tr+k[So]+$[So]-ah-W.altAxis:oh,Ln=m&&El?sq(lh,Tr,us):Su(m?lh:sh,Tr,m?us:oh);R[A]=Ln,Oe[A]=Ln-Tr}e.modifiersData[r]=Oe}}const Kx={name:"preventOverflow",enabled:!0,phase:"main",fn:Cq,requiresIfExists:["offset"]};function bq(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function kq(t){return t===wn(t)||!Nn(t)?_E(t):bq(t)}function xq(t){var e=t.getBoundingClientRect(),n=Ha(e.width)/t.offsetWidth||1,r=Ha(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Nq(t,e,n){n===void 0&&(n=!1);var r=Nn(e),i=Nn(e)&&xq(e),s=as(e),o=Ga(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Er(e)!=="body"||vE(s))&&(a=kq(e)),Nn(e)?(l=Ga(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=yE(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Dq(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Oq(t){var e=Dq(t);return Lx.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Vq(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Lq(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var zS={placement:"bottom",modifiers:[],strategy:"absolute"};function qS(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Yp(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?zS:i;return function(a,l,u){u===void 0&&(u=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},zS,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:c,setOptions:function(_){var g=typeof _=="function"?_(c.options):_;v(),c.options=Object.assign({},s,c.options,g),c.scrollParents={reference:uo(a)?Au(a):a.contextElement?Au(a.contextElement):[],popper:Au(l)};var y=Oq(Lq([].concat(r,c.options.modifiers)));return c.orderedModifiers=y.filter(function(S){return S.enabled}),w(),m.update()},forceUpdate:function(){if(!f){var _=c.elements,g=_.reference,y=_.popper;if(qS(g,y)){c.rects={reference:Nq(g,ih(y),c.options.strategy==="fixed"),popper:fE(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(W){return c.modifiersData[W.name]=Object.assign({},W.data)});for(var S=0;S<c.orderedModifiers.length;S++){if(c.reset===!0){c.reset=!1,S=-1;continue}var A=c.orderedModifiers[S],R=A.fn,k=A.options,$=k===void 0?{}:k,Q=A.name;typeof R=="function"&&(c=R({state:c,options:$,name:Q,instance:m})||c)}}}},update:Vq(function(){return new Promise(function(I){m.forceUpdate(),I(c)})}),destroy:function(){v(),f=!0}};if(!qS(a,l))return m;m.setOptions(u).then(function(I){!f&&u.onFirstUpdate&&u.onFirstUpdate(I)});function w(){c.orderedModifiers.forEach(function(I){var _=I.name,g=I.options,y=g===void 0?{}:g,S=I.effect;if(typeof S=="function"){var A=S({state:c,name:_,instance:m,options:y}),R=function(){};d.push(A||R)}})}function v(){d.forEach(function(I){return I()}),d=[]}return m}}var Mq=Yp(),Fq=[gE,wE,mE,dE],$q=Yp({defaultModifiers:Fq}),Uq=[gE,wE,mE,dE,Gx,Wx,Kx,jx,Hx],Bq=Yp({defaultModifiers:Uq});const jq=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Nx,afterRead:bx,afterWrite:Vx,applyStyles:dE,arrow:jx,auto:Kp,basePlacements:_l,beforeMain:kx,beforeRead:Px,beforeWrite:Dx,bottom:yn,clippingParents:Ax,computeStyles:mE,createPopper:Bq,createPopperBase:Mq,createPopperLite:$q,detectOverflow:Qa,end:Wa,eventListeners:gE,flip:Wx,hide:Hx,left:Gt,main:xx,modifierPhases:Lx,offset:Gx,placements:cE,popper:qo,popperGenerator:Yp,popperOffsets:wE,preventOverflow:Kx,read:Cx,reference:Rx,right:vn,start:lo,top:Ht,variationPlacements:dy,viewport:uE,write:Ox},Symbol.toStringTag,{value:"Module"})),zq=qD(jq);/*!
  * Bootstrap v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(zq)})(jD,function(n){function r(T){const h=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(T){for(const p in T)if(p!=="default"){const E=Object.getOwnPropertyDescriptor(T,p);Object.defineProperty(h,p,E.get?E:{enumerable:!0,get:()=>T[p]})}}return h.default=T,Object.freeze(h)}const i=r(n),s=new Map,o={set(T,h,p){s.has(T)||s.set(T,new Map);const E=s.get(T);E.has(h)||E.size===0?E.set(h,p):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(E.keys())[0]}.`)},get:(T,h)=>s.has(T)&&s.get(T).get(h)||null,remove(T,h){if(!s.has(T))return;const p=s.get(T);p.delete(h),p.size===0&&s.delete(T)}},a="transitionend",l=T=>(T&&window.CSS&&window.CSS.escape&&(T=T.replace(/#([^\s"#']+)/g,(h,p)=>`#${CSS.escape(p)}`)),T),u=T=>{T.dispatchEvent(new Event(a))},c=T=>!(!T||typeof T!="object")&&(T.jquery!==void 0&&(T=T[0]),T.nodeType!==void 0),d=T=>c(T)?T.jquery?T[0]:T:typeof T=="string"&&T.length>0?document.querySelector(l(T)):null,f=T=>{if(!c(T)||T.getClientRects().length===0)return!1;const h=getComputedStyle(T).getPropertyValue("visibility")==="visible",p=T.closest("details:not([open])");if(!p)return h;if(p!==T){const E=T.closest("summary");if(E&&E.parentNode!==p||E===null)return!1}return h},m=T=>!T||T.nodeType!==Node.ELEMENT_NODE||!!T.classList.contains("disabled")||(T.disabled!==void 0?T.disabled:T.hasAttribute("disabled")&&T.getAttribute("disabled")!=="false"),w=T=>{if(!document.documentElement.attachShadow)return null;if(typeof T.getRootNode=="function"){const h=T.getRootNode();return h instanceof ShadowRoot?h:null}return T instanceof ShadowRoot?T:T.parentNode?w(T.parentNode):null},v=()=>{},I=T=>{T.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,g=[],y=()=>document.documentElement.dir==="rtl",S=T=>{var h;h=()=>{const p=_();if(p){const E=T.NAME,x=p.fn[E];p.fn[E]=T.jQueryInterface,p.fn[E].Constructor=T,p.fn[E].noConflict=()=>(p.fn[E]=x,T.jQueryInterface)}},document.readyState==="loading"?(g.length||document.addEventListener("DOMContentLoaded",()=>{for(const p of g)p()}),g.push(h)):h()},A=(T,h=[],p=T)=>typeof T=="function"?T(...h):p,R=(T,h,p=!0)=>{if(!p)return void A(T);const E=(K=>{if(!K)return 0;let{transitionDuration:ue,transitionDelay:Le}=window.getComputedStyle(K);const Jt=Number.parseFloat(ue),un=Number.parseFloat(Le);return Jt||un?(ue=ue.split(",")[0],Le=Le.split(",")[0],1e3*(Number.parseFloat(ue)+Number.parseFloat(Le))):0})(h)+5;let x=!1;const B=({target:K})=>{K===h&&(x=!0,h.removeEventListener(a,B),A(T))};h.addEventListener(a,B),setTimeout(()=>{x||u(h)},E)},k=(T,h,p,E)=>{const x=T.length;let B=T.indexOf(h);return B===-1?!p&&E?T[x-1]:T[0]:(B+=p?1:-1,E&&(B=(B+x)%x),T[Math.max(0,Math.min(B,x-1))])},$=/[^.]*(?=\..*)\.|.*/,Q=/\..*/,W=/::\d+$/,ie={};let Oe=1;const ge={mouseenter:"mouseover",mouseleave:"mouseout"},Ot=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Vt(T,h){return h&&`${h}::${Oe++}`||T.uidEvent||Oe++}function Ve(T){const h=Vt(T);return T.uidEvent=h,ie[h]=ie[h]||{},ie[h]}function Je(T,h,p=null){return Object.values(T).find(E=>E.callable===h&&E.delegationSelector===p)}function U(T,h,p){const E=typeof h=="string",x=E?p:h||p;let B=ve(T);return Ot.has(B)||(B=T),[E,x,B]}function Z(T,h,p,E,x){if(typeof h!="string"||!T)return;let[B,K,ue]=U(h,p,E);h in ge&&(K=(_s=>function($n){if(!$n.relatedTarget||$n.relatedTarget!==$n.delegateTarget&&!$n.delegateTarget.contains($n.relatedTarget))return _s.call(this,$n)})(K));const Le=Ve(T),Jt=Le[ue]||(Le[ue]={}),un=Je(Jt,K,B?p:null);if(un)return void(un.oneOff=un.oneOff&&x);const Fn=Vt(K,h.replace($,"")),Rr=B?function(Pr,_s,$n){return function Pl(vh){const $D=Pr.querySelectorAll(_s);for(let{target:ys}=vh;ys&&ys!==this;ys=ys.parentNode)for(const UD of $D)if(UD===ys)return Xe(vh,{delegateTarget:ys}),Pl.oneOff&&D.off(Pr,vh.type,_s,$n),$n.apply(ys,[vh])}}(T,p,K):function(Pr,_s){return function $n(Pl){return Xe(Pl,{delegateTarget:Pr}),$n.oneOff&&D.off(Pr,Pl.type,_s),_s.apply(Pr,[Pl])}}(T,K);Rr.delegationSelector=B?p:null,Rr.callable=K,Rr.oneOff=x,Rr.uidEvent=Fn,Jt[Fn]=Rr,T.addEventListener(ue,Rr,B)}function te(T,h,p,E,x){const B=Je(h[p],E,x);B&&(T.removeEventListener(p,B,!!x),delete h[p][B.uidEvent])}function ye(T,h,p,E){const x=h[p]||{};for(const[B,K]of Object.entries(x))B.includes(E)&&te(T,h,p,K.callable,K.delegationSelector)}function ve(T){return T=T.replace(Q,""),ge[T]||T}const D={on(T,h,p,E){Z(T,h,p,E,!1)},one(T,h,p,E){Z(T,h,p,E,!0)},off(T,h,p,E){if(typeof h!="string"||!T)return;const[x,B,K]=U(h,p,E),ue=K!==h,Le=Ve(T),Jt=Le[K]||{},un=h.startsWith(".");if(B===void 0){if(un)for(const Fn of Object.keys(Le))ye(T,Le,Fn,h.slice(1));for(const[Fn,Rr]of Object.entries(Jt)){const Pr=Fn.replace(W,"");ue&&!h.includes(Pr)||te(T,Le,K,Rr.callable,Rr.delegationSelector)}}else{if(!Object.keys(Jt).length)return;te(T,Le,K,B,x?p:null)}},trigger(T,h,p){if(typeof h!="string"||!T)return null;const E=_();let x=null,B=!0,K=!0,ue=!1;h!==ve(h)&&E&&(x=E.Event(h,p),E(T).trigger(x),B=!x.isPropagationStopped(),K=!x.isImmediatePropagationStopped(),ue=x.isDefaultPrevented());const Le=Xe(new Event(h,{bubbles:B,cancelable:!0}),p);return ue&&Le.preventDefault(),K&&T.dispatchEvent(Le),Le.defaultPrevented&&x&&x.preventDefault(),Le}};function Xe(T,h={}){for(const[p,E]of Object.entries(h))try{T[p]=E}catch{Object.defineProperty(T,p,{configurable:!0,get:()=>E})}return T}function yt(T){if(T==="true")return!0;if(T==="false")return!1;if(T===Number(T).toString())return Number(T);if(T===""||T==="null")return null;if(typeof T!="string")return T;try{return JSON.parse(decodeURIComponent(T))}catch{return T}}function ce(T){return T.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const _e={setDataAttribute(T,h,p){T.setAttribute(`data-bs-${ce(h)}`,p)},removeDataAttribute(T,h){T.removeAttribute(`data-bs-${ce(h)}`)},getDataAttributes(T){if(!T)return{};const h={},p=Object.keys(T.dataset).filter(E=>E.startsWith("bs")&&!E.startsWith("bsConfig"));for(const E of p){let x=E.replace(/^bs/,"");x=x.charAt(0).toLowerCase()+x.slice(1,x.length),h[x]=yt(T.dataset[E])}return h},getDataAttribute:(T,h)=>yt(T.getAttribute(`data-bs-${ce(h)}`))};class Lt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,p){const E=c(p)?_e.getDataAttribute(p,"config"):{};return{...this.constructor.Default,...typeof E=="object"?E:{},...c(p)?_e.getDataAttributes(p):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,p=this.constructor.DefaultType){for(const[x,B]of Object.entries(p)){const K=h[x],ue=c(K)?"element":(E=K)==null?`${E}`:Object.prototype.toString.call(E).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(B).test(ue))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${x}" provided type "${ue}" but expected type "${B}".`)}var E}}class Mt extends Lt{constructor(h,p){super(),(h=d(h))&&(this._element=h,this._config=this._getConfig(p),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),D.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,p,E=!0){R(h,p,E)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return o.get(d(h),this.DATA_KEY)}static getOrCreateInstance(h,p={}){return this.getInstance(h)||new this(h,typeof p=="object"?p:null)}static get VERSION(){return"5.3.2"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const yl=T=>{let h=T.getAttribute("data-bs-target");if(!h||h==="#"){let p=T.getAttribute("href");if(!p||!p.includes("#")&&!p.startsWith("."))return null;p.includes("#")&&!p.startsWith("#")&&(p=`#${p.split("#")[1]}`),h=p&&p!=="#"?l(p.trim()):null}return h},X={find:(T,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,T)),findOne:(T,h=document.documentElement)=>Element.prototype.querySelector.call(h,T),children:(T,h)=>[].concat(...T.children).filter(p=>p.matches(h)),parents(T,h){const p=[];let E=T.parentNode.closest(h);for(;E;)p.push(E),E=E.parentNode.closest(h);return p},prev(T,h){let p=T.previousElementSibling;for(;p;){if(p.matches(h))return[p];p=p.previousElementSibling}return[]},next(T,h){let p=T.nextElementSibling;for(;p;){if(p.matches(h))return[p];p=p.nextElementSibling}return[]},focusableChildren(T){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(p=>`${p}:not([tabindex^="-"])`).join(",");return this.find(h,T).filter(p=>!m(p)&&f(p))},getSelectorFromElement(T){const h=yl(T);return h&&X.findOne(h)?h:null},getElementFromSelector(T){const h=yl(T);return h?X.findOne(h):null},getMultipleElementsFromSelector(T){const h=yl(T);return h?X.find(h):[]}},To=(T,h="hide")=>{const p=`click.dismiss${T.EVENT_KEY}`,E=T.NAME;D.on(document,p,`[data-bs-dismiss="${E}"]`,function(x){if(["A","AREA"].includes(this.tagName)&&x.preventDefault(),m(this))return;const B=X.getElementFromSelector(this)||this.closest(`.${E}`);T.getOrCreateInstance(B)[h]()})},vl=".bs.alert",Jp=`close${vl}`,Xp=`closed${vl}`;class ni extends Mt{static get NAME(){return"alert"}close(){if(D.trigger(this._element,Jp).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),D.trigger(this._element,Xp),this.dispose()}static jQueryInterface(h){return this.each(function(){const p=ni.getOrCreateInstance(this);if(typeof h=="string"){if(p[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);p[h](this)}})}}To(ni,"close"),S(ni);const wl='[data-bs-toggle="button"]';class ls extends Mt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const p=ls.getOrCreateInstance(this);h==="toggle"&&p[h]()})}}D.on(document,"click.bs.button.data-api",wl,T=>{T.preventDefault();const h=T.target.closest(wl);ls.getOrCreateInstance(h).toggle()}),S(ls);const ri=".bs.swipe",Tr=`touchstart${ri}`,So=`touchmove${ri}`,sh=`touchend${ri}`,oh=`pointerdown${ri}`,El=`pointerup${ri}`,ah={endCallback:null,leftCallback:null,rightCallback:null},lh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class us extends Lt{constructor(h,p){super(),this._element=h,h&&us.isSupported()&&(this._config=this._getConfig(p),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return ah}static get DefaultType(){return lh}static get NAME(){return"swipe"}dispose(){D.off(this._element,ri)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),A(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const p=h/this._deltaX;this._deltaX=0,p&&A(p>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(D.on(this._element,oh,h=>this._start(h)),D.on(this._element,El,h=>this._end(h)),this._element.classList.add("pointer-event")):(D.on(this._element,Tr,h=>this._start(h)),D.on(this._element,So,h=>this._move(h)),D.on(this._element,sh,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Ln=".bs.carousel",IE=".data-api",Il="next",Ao="prev",Ro="left",uh="right",Yx=`slide${Ln}`,Zp=`slid${Ln}`,Jx=`keydown${Ln}`,Xx=`mouseenter${Ln}`,Zx=`mouseleave${Ln}`,eN=`dragstart${Ln}`,tN=`load${Ln}${IE}`,nN=`click${Ln}${IE}`,TE="carousel",ch="active",SE=".active",AE=".carousel-item",rN=SE+AE,iN={ArrowLeft:uh,ArrowRight:Ro},sN={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},oN={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Po extends Mt{constructor(h,p){super(h,p),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=X.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===TE&&this.cycle()}static get Default(){return sN}static get DefaultType(){return oN}static get NAME(){return"carousel"}next(){this._slide(Il)}nextWhenVisible(){!document.hidden&&f(this._element)&&this.next()}prev(){this._slide(Ao)}pause(){this._isSliding&&u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?D.one(this._element,Zp,()=>this.cycle()):this.cycle())}to(h){const p=this._getItems();if(h>p.length-1||h<0)return;if(this._isSliding)return void D.one(this._element,Zp,()=>this.to(h));const E=this._getItemIndex(this._getActive());if(E===h)return;const x=h>E?Il:Ao;this._slide(x,p[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&D.on(this._element,Jx,h=>this._keydown(h)),this._config.pause==="hover"&&(D.on(this._element,Xx,()=>this.pause()),D.on(this._element,Zx,()=>this._maybeEnableCycle())),this._config.touch&&us.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const p of X.find(".carousel-item img",this._element))D.on(p,eN,E=>E.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(Ro)),rightCallback:()=>this._slide(this._directionToOrder(uh)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new us(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const p=iN[h.key];p&&(h.preventDefault(),this._slide(this._directionToOrder(p)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const p=X.findOne(SE,this._indicatorsElement);p.classList.remove(ch),p.removeAttribute("aria-current");const E=X.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);E&&(E.classList.add(ch),E.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const p=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=p||this._config.defaultInterval}_slide(h,p=null){if(this._isSliding)return;const E=this._getActive(),x=h===Il,B=p||k(this._getItems(),E,x,this._config.wrap);if(B===E)return;const K=this._getItemIndex(B),ue=Fn=>D.trigger(this._element,Fn,{relatedTarget:B,direction:this._orderToDirection(h),from:this._getItemIndex(E),to:K});if(ue(Yx).defaultPrevented||!E||!B)return;const Le=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(K),this._activeElement=B;const Jt=x?"carousel-item-start":"carousel-item-end",un=x?"carousel-item-next":"carousel-item-prev";B.classList.add(un),I(B),E.classList.add(Jt),B.classList.add(Jt),this._queueCallback(()=>{B.classList.remove(Jt,un),B.classList.add(ch),E.classList.remove(ch,un,Jt),this._isSliding=!1,ue(Zp)},E,this._isAnimated()),Le&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return X.findOne(rN,this._element)}_getItems(){return X.find(AE,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return y()?h===Ro?Ao:Il:h===Ro?Il:Ao}_orderToDirection(h){return y()?h===Ao?Ro:uh:h===Ao?uh:Ro}static jQueryInterface(h){return this.each(function(){const p=Po.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(p[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);p[h]()}}else p.to(h)})}}D.on(document,nN,"[data-bs-slide], [data-bs-slide-to]",function(T){const h=X.getElementFromSelector(this);if(!h||!h.classList.contains(TE))return;T.preventDefault();const p=Po.getOrCreateInstance(h),E=this.getAttribute("data-bs-slide-to");return E?(p.to(E),void p._maybeEnableCycle()):_e.getDataAttribute(this,"slide")==="next"?(p.next(),void p._maybeEnableCycle()):(p.prev(),void p._maybeEnableCycle())}),D.on(window,tN,()=>{const T=X.find('[data-bs-ride="carousel"]');for(const h of T)Po.getOrCreateInstance(h)}),S(Po);const Tl=".bs.collapse",aN=`show${Tl}`,lN=`shown${Tl}`,uN=`hide${Tl}`,cN=`hidden${Tl}`,hN=`click${Tl}.data-api`,em="show",Co="collapse",hh="collapsing",dN=`:scope .${Co} .${Co}`,tm='[data-bs-toggle="collapse"]',fN={parent:null,toggle:!0},pN={parent:"(null|element)",toggle:"boolean"};class bo extends Mt{constructor(h,p){super(h,p),this._isTransitioning=!1,this._triggerArray=[];const E=X.find(tm);for(const x of E){const B=X.getSelectorFromElement(x),K=X.find(B).filter(ue=>ue===this._element);B!==null&&K.length&&this._triggerArray.push(x)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return fN}static get DefaultType(){return pN}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(x=>x!==this._element).map(x=>bo.getOrCreateInstance(x,{toggle:!1}))),h.length&&h[0]._isTransitioning||D.trigger(this._element,aN).defaultPrevented)return;for(const x of h)x.hide();const p=this._getDimension();this._element.classList.remove(Co),this._element.classList.add(hh),this._element.style[p]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const E=`scroll${p[0].toUpperCase()+p.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hh),this._element.classList.add(Co,em),this._element.style[p]="",D.trigger(this._element,lN)},this._element,!0),this._element.style[p]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||D.trigger(this._element,uN).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,I(this._element),this._element.classList.add(hh),this._element.classList.remove(Co,em);for(const p of this._triggerArray){const E=X.getElementFromSelector(p);E&&!this._isShown(E)&&this._addAriaAndCollapsedClass([p],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(hh),this._element.classList.add(Co),D.trigger(this._element,cN)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(em)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=d(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(tm);for(const p of h){const E=X.getElementFromSelector(p);E&&this._addAriaAndCollapsedClass([p],this._isShown(E))}}_getFirstLevelChildren(h){const p=X.find(dN,this._config.parent);return X.find(h,this._config.parent).filter(E=>!p.includes(E))}_addAriaAndCollapsedClass(h,p){if(h.length)for(const E of h)E.classList.toggle("collapsed",!p),E.setAttribute("aria-expanded",p)}static jQueryInterface(h){const p={};return typeof h=="string"&&/show|hide/.test(h)&&(p.toggle=!1),this.each(function(){const E=bo.getOrCreateInstance(this,p);if(typeof h=="string"){if(E[h]===void 0)throw new TypeError(`No method named "${h}"`);E[h]()}})}}D.on(document,hN,tm,function(T){(T.target.tagName==="A"||T.delegateTarget&&T.delegateTarget.tagName==="A")&&T.preventDefault();for(const h of X.getMultipleElementsFromSelector(this))bo.getOrCreateInstance(h,{toggle:!1}).toggle()}),S(bo);const RE="dropdown",cs=".bs.dropdown",nm=".data-api",mN="ArrowUp",PE="ArrowDown",gN=`hide${cs}`,_N=`hidden${cs}`,yN=`show${cs}`,vN=`shown${cs}`,CE=`click${cs}${nm}`,bE=`keydown${cs}${nm}`,wN=`keyup${cs}${nm}`,ko="show",hs='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',EN=`${hs}.${ko}`,dh=".dropdown-menu",IN=y()?"top-end":"top-start",TN=y()?"top-start":"top-end",SN=y()?"bottom-end":"bottom-start",AN=y()?"bottom-start":"bottom-end",RN=y()?"left-start":"right-start",PN=y()?"right-start":"left-start",CN={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},bN={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Mn extends Mt{constructor(h,p){super(h,p),this._popper=null,this._parent=this._element.parentNode,this._menu=X.next(this._element,dh)[0]||X.prev(this._element,dh)[0]||X.findOne(dh,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return CN}static get DefaultType(){return bN}static get NAME(){return RE}toggle(){return this._isShown()?this.hide():this.show()}show(){if(m(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!D.trigger(this._element,yN,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const p of[].concat(...document.body.children))D.on(p,"mouseover",v);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(ko),this._element.classList.add(ko),D.trigger(this._element,vN,h)}}hide(){if(m(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!D.trigger(this._element,gN,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const p of[].concat(...document.body.children))D.off(p,"mouseover",v);this._popper&&this._popper.destroy(),this._menu.classList.remove(ko),this._element.classList.remove(ko),this._element.setAttribute("aria-expanded","false"),_e.removeDataAttribute(this._menu,"popper"),D.trigger(this._element,_N,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!c(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${RE.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(i===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:c(this._config.reference)?h=d(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const p=this._getPopperConfig();this._popper=i.createPopper(h,this._menu,p)}_isShown(){return this._menu.classList.contains(ko)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return RN;if(h.classList.contains("dropstart"))return PN;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const p=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?p?TN:IN:p?AN:SN}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(p=>Number.parseInt(p,10)):typeof h=="function"?p=>h(p,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(_e.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...A(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:p}){const E=X.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(x=>f(x));E.length&&k(E,p,h===PE,!E.includes(p)).focus()}static jQueryInterface(h){return this.each(function(){const p=Mn.getOrCreateInstance(this,h);if(typeof h=="string"){if(p[h]===void 0)throw new TypeError(`No method named "${h}"`);p[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const p=X.find(EN);for(const E of p){const x=Mn.getInstance(E);if(!x||x._config.autoClose===!1)continue;const B=h.composedPath(),K=B.includes(x._menu);if(B.includes(x._element)||x._config.autoClose==="inside"&&!K||x._config.autoClose==="outside"&&K||x._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const ue={relatedTarget:x._element};h.type==="click"&&(ue.clickEvent=h),x._completeHide(ue)}}static dataApiKeydownHandler(h){const p=/input|textarea/i.test(h.target.tagName),E=h.key==="Escape",x=[mN,PE].includes(h.key);if(!x&&!E||p&&!E)return;h.preventDefault();const B=this.matches(hs)?this:X.prev(this,hs)[0]||X.next(this,hs)[0]||X.findOne(hs,h.delegateTarget.parentNode),K=Mn.getOrCreateInstance(B);if(x)return h.stopPropagation(),K.show(),void K._selectMenuItem(h);K._isShown()&&(h.stopPropagation(),K.hide(),B.focus())}}D.on(document,bE,hs,Mn.dataApiKeydownHandler),D.on(document,bE,dh,Mn.dataApiKeydownHandler),D.on(document,CE,Mn.clearMenus),D.on(document,wN,Mn.clearMenus),D.on(document,CE,hs,function(T){T.preventDefault(),Mn.getOrCreateInstance(this).toggle()}),S(Mn);const kE="backdrop",xE="show",NE=`mousedown.bs.${kE}`,kN={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},xN={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class DE extends Lt{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return kN}static get DefaultType(){return xN}static get NAME(){return kE}show(h){if(!this._config.isVisible)return void A(h);this._append();const p=this._getElement();this._config.isAnimated&&I(p),p.classList.add(xE),this._emulateAnimation(()=>{A(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(xE),this._emulateAnimation(()=>{this.dispose(),A(h)})):A(h)}dispose(){this._isAppended&&(D.off(this._element,NE),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=d(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),D.on(h,NE,()=>{A(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){R(h,this._getElement(),this._config.isAnimated)}}const fh=".bs.focustrap",NN=`focusin${fh}`,DN=`keydown.tab${fh}`,OE="backward",ON={autofocus:!0,trapElement:null},VN={autofocus:"boolean",trapElement:"element"};class VE extends Lt{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ON}static get DefaultType(){return VN}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),D.off(document,fh),D.on(document,NN,h=>this._handleFocusin(h)),D.on(document,DN,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,D.off(document,fh))}_handleFocusin(h){const{trapElement:p}=this._config;if(h.target===document||h.target===p||p.contains(h.target))return;const E=X.focusableChildren(p);E.length===0?p.focus():this._lastTabNavDirection===OE?E[E.length-1].focus():E[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?OE:"forward")}}const LE=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ME=".sticky-top",ph="padding-right",FE="margin-right";class rm{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ph,p=>p+h),this._setElementAttributes(LE,ph,p=>p+h),this._setElementAttributes(ME,FE,p=>p-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ph),this._resetElementAttributes(LE,ph),this._resetElementAttributes(ME,FE)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,p,E){const x=this.getWidth();this._applyManipulationCallback(h,B=>{if(B!==this._element&&window.innerWidth>B.clientWidth+x)return;this._saveInitialAttribute(B,p);const K=window.getComputedStyle(B).getPropertyValue(p);B.style.setProperty(p,`${E(Number.parseFloat(K))}px`)})}_saveInitialAttribute(h,p){const E=h.style.getPropertyValue(p);E&&_e.setDataAttribute(h,p,E)}_resetElementAttributes(h,p){this._applyManipulationCallback(h,E=>{const x=_e.getDataAttribute(E,p);x!==null?(_e.removeDataAttribute(E,p),E.style.setProperty(p,x)):E.style.removeProperty(p)})}_applyManipulationCallback(h,p){if(c(h))p(h);else for(const E of X.find(h,this._element))p(E)}}const Tn=".bs.modal",LN=`hide${Tn}`,MN=`hidePrevented${Tn}`,$E=`hidden${Tn}`,UE=`show${Tn}`,FN=`shown${Tn}`,$N=`resize${Tn}`,UN=`click.dismiss${Tn}`,BN=`mousedown.dismiss${Tn}`,jN=`keydown.dismiss${Tn}`,zN=`click${Tn}.data-api`,BE="modal-open",jE="show",im="modal-static",qN={backdrop:!0,focus:!0,keyboard:!0},WN={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ds extends Mt{constructor(h,p){super(h,p),this._dialog=X.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new rm,this._addEventListeners()}static get Default(){return qN}static get DefaultType(){return WN}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||D.trigger(this._element,UE,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(BE),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(D.trigger(this._element,LN).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(jE),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){D.off(window,Tn),D.off(this._dialog,Tn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new DE({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new VE({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const p=X.findOne(".modal-body",this._dialog);p&&(p.scrollTop=0),I(this._element),this._element.classList.add(jE),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,D.trigger(this._element,FN,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){D.on(this._element,jN,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),D.on(window,$N,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),D.on(this._element,BN,h=>{D.one(this._element,UN,p=>{this._element===h.target&&this._element===p.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(BE),this._resetAdjustments(),this._scrollBar.reset(),D.trigger(this._element,$E)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(D.trigger(this._element,MN).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,p=this._element.style.overflowY;p==="hidden"||this._element.classList.contains(im)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(im),this._queueCallback(()=>{this._element.classList.remove(im),this._queueCallback(()=>{this._element.style.overflowY=p},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,p=this._scrollBar.getWidth(),E=p>0;if(E&&!h){const x=y()?"paddingLeft":"paddingRight";this._element.style[x]=`${p}px`}if(!E&&h){const x=y()?"paddingRight":"paddingLeft";this._element.style[x]=`${p}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,p){return this.each(function(){const E=ds.getOrCreateInstance(this,h);if(typeof h=="string"){if(E[h]===void 0)throw new TypeError(`No method named "${h}"`);E[h](p)}})}}D.on(document,zN,'[data-bs-toggle="modal"]',function(T){const h=X.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&T.preventDefault(),D.one(h,UE,E=>{E.defaultPrevented||D.one(h,$E,()=>{f(this)&&this.focus()})});const p=X.findOne(".modal.show");p&&ds.getInstance(p).hide(),ds.getOrCreateInstance(h).toggle(this)}),To(ds),S(ds);const Sr=".bs.offcanvas",zE=".data-api",HN=`load${Sr}${zE}`,qE="show",WE="showing",HE="hiding",GE=".offcanvas.show",GN=`show${Sr}`,KN=`shown${Sr}`,QN=`hide${Sr}`,KE=`hidePrevented${Sr}`,QE=`hidden${Sr}`,YN=`resize${Sr}`,JN=`click${Sr}${zE}`,XN=`keydown.dismiss${Sr}`,ZN={backdrop:!0,keyboard:!0,scroll:!1},eD={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ar extends Mt{constructor(h,p){super(h,p),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ZN}static get DefaultType(){return eD}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||D.trigger(this._element,GN,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new rm().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(WE),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(qE),this._element.classList.remove(WE),D.trigger(this._element,KN,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(D.trigger(this._element,QN).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(HE),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(qE,HE),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new rm().reset(),D.trigger(this._element,QE)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new DE({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():D.trigger(this._element,KE)}:null})}_initializeFocusTrap(){return new VE({trapElement:this._element})}_addEventListeners(){D.on(this._element,XN,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():D.trigger(this._element,KE))})}static jQueryInterface(h){return this.each(function(){const p=Ar.getOrCreateInstance(this,h);if(typeof h=="string"){if(p[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);p[h](this)}})}}D.on(document,JN,'[data-bs-toggle="offcanvas"]',function(T){const h=X.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&T.preventDefault(),m(this))return;D.one(h,QE,()=>{f(this)&&this.focus()});const p=X.findOne(GE);p&&p!==h&&Ar.getInstance(p).hide(),Ar.getOrCreateInstance(h).toggle(this)}),D.on(window,HN,()=>{for(const T of X.find(GE))Ar.getOrCreateInstance(T).show()}),D.on(window,YN,()=>{for(const T of X.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(T).position!=="fixed"&&Ar.getOrCreateInstance(T).hide()}),To(Ar),S(Ar);const YE={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},tD=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),nD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,rD=(T,h)=>{const p=T.nodeName.toLowerCase();return h.includes(p)?!tD.has(p)||!!nD.test(T.nodeValue):h.filter(E=>E instanceof RegExp).some(E=>E.test(p))},iD={allowList:YE,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},sD={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},oD={entry:"(string|element|function|null)",selector:"(string|element)"};class aD extends Lt{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return iD}static get DefaultType(){return sD}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[x,B]of Object.entries(this._config.content))this._setContent(h,B,x);const p=h.children[0],E=this._resolvePossibleFunction(this._config.extraClass);return E&&p.classList.add(...E.split(" ")),p}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[p,E]of Object.entries(h))super._typeCheckConfig({selector:p,entry:E},oD)}_setContent(h,p,E){const x=X.findOne(E,h);x&&((p=this._resolvePossibleFunction(p))?c(p)?this._putElementInTemplate(d(p),x):this._config.html?x.innerHTML=this._maybeSanitize(p):x.textContent=p:x.remove())}_maybeSanitize(h){return this._config.sanitize?function(p,E,x){if(!p.length)return p;if(x&&typeof x=="function")return x(p);const B=new window.DOMParser().parseFromString(p,"text/html"),K=[].concat(...B.body.querySelectorAll("*"));for(const ue of K){const Le=ue.nodeName.toLowerCase();if(!Object.keys(E).includes(Le)){ue.remove();continue}const Jt=[].concat(...ue.attributes),un=[].concat(E["*"]||[],E[Le]||[]);for(const Fn of Jt)rD(Fn,un)||ue.removeAttribute(Fn.nodeName)}return B.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return A(h,[this])}_putElementInTemplate(h,p){if(this._config.html)return p.innerHTML="",void p.append(h);p.textContent=h.textContent}}const lD=new Set(["sanitize","allowList","sanitizeFn"]),sm="fade",mh="show",JE=".modal",XE="hide.bs.modal",Sl="hover",om="focus",uD={AUTO:"auto",TOP:"top",RIGHT:y()?"left":"right",BOTTOM:"bottom",LEFT:y()?"right":"left"},cD={allowList:YE,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},hD={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class fs extends Mt{constructor(h,p){if(i===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,p),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return cD}static get DefaultType(){return hD}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),D.off(this._element.closest(JE),XE,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=D.trigger(this._element,this.constructor.eventName("show")),p=(w(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!p)return;this._disposePopper();const E=this._getTipElement();this._element.setAttribute("aria-describedby",E.getAttribute("id"));const{container:x}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(x.append(E),D.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(E),E.classList.add(mh),"ontouchstart"in document.documentElement)for(const B of[].concat(...document.body.children))D.on(B,"mouseover",v);this._queueCallback(()=>{D.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!D.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(mh),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))D.off(h,"mouseover",v);this._activeTrigger.click=!1,this._activeTrigger[om]=!1,this._activeTrigger[Sl]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),D.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const p=this._getTemplateFactory(h).toHtml();if(!p)return null;p.classList.remove(sm,mh),p.classList.add(`bs-${this.constructor.NAME}-auto`);const E=(x=>{do x+=Math.floor(1e6*Math.random());while(document.getElementById(x));return x})(this.constructor.NAME).toString();return p.setAttribute("id",E),this._isAnimated()&&p.classList.add(sm),p}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new aD({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(sm)}_isShown(){return this.tip&&this.tip.classList.contains(mh)}_createPopper(h){const p=A(this._config.placement,[this,h,this._element]),E=uD[p.toUpperCase()];return i.createPopper(this._element,h,this._getPopperConfig(E))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(p=>Number.parseInt(p,10)):typeof h=="function"?p=>h(p,this._element):h}_resolvePossibleFunction(h){return A(h,[this._element])}_getPopperConfig(h){const p={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:E=>{this._getTipElement().setAttribute("data-popper-placement",E.state.placement)}}]};return{...p,...A(this._config.popperConfig,[p])}}_setListeners(){const h=this._config.trigger.split(" ");for(const p of h)if(p==="click")D.on(this._element,this.constructor.eventName("click"),this._config.selector,E=>{this._initializeOnDelegatedTarget(E).toggle()});else if(p!=="manual"){const E=p===Sl?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),x=p===Sl?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");D.on(this._element,E,this._config.selector,B=>{const K=this._initializeOnDelegatedTarget(B);K._activeTrigger[B.type==="focusin"?om:Sl]=!0,K._enter()}),D.on(this._element,x,this._config.selector,B=>{const K=this._initializeOnDelegatedTarget(B);K._activeTrigger[B.type==="focusout"?om:Sl]=K._element.contains(B.relatedTarget),K._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},D.on(this._element.closest(JE),XE,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,p){clearTimeout(this._timeout),this._timeout=setTimeout(h,p)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const p=_e.getDataAttributes(this._element);for(const E of Object.keys(p))lD.has(E)&&delete p[E];return h={...p,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:d(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[p,E]of Object.entries(this._config))this.constructor.Default[p]!==E&&(h[p]=E);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const p=fs.getOrCreateInstance(this,h);if(typeof h=="string"){if(p[h]===void 0)throw new TypeError(`No method named "${h}"`);p[h]()}})}}S(fs);const dD={...fs.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},fD={...fs.DefaultType,content:"(null|string|element|function)"};class gh extends fs{static get Default(){return dD}static get DefaultType(){return fD}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const p=gh.getOrCreateInstance(this,h);if(typeof h=="string"){if(p[h]===void 0)throw new TypeError(`No method named "${h}"`);p[h]()}})}}S(gh);const am=".bs.scrollspy",pD=`activate${am}`,ZE=`click${am}`,mD=`load${am}.data-api`,xo="active",lm="[href]",eI=".nav-link",gD=`${eI}, .nav-item > ${eI}, .list-group-item`,_D={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yD={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Al extends Mt{constructor(h,p){super(h,p),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return _D}static get DefaultType(){return yD}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=d(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(p=>Number.parseFloat(p))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(D.off(this._config.target,ZE),D.on(this._config.target,ZE,lm,h=>{const p=this._observableSections.get(h.target.hash);if(p){h.preventDefault();const E=this._rootElement||window,x=p.offsetTop-this._element.offsetTop;if(E.scrollTo)return void E.scrollTo({top:x,behavior:"smooth"});E.scrollTop=x}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(p=>this._observerCallback(p),h)}_observerCallback(h){const p=K=>this._targetLinks.get(`#${K.target.id}`),E=K=>{this._previousScrollData.visibleEntryTop=K.target.offsetTop,this._process(p(K))},x=(this._rootElement||document.documentElement).scrollTop,B=x>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=x;for(const K of h){if(!K.isIntersecting){this._activeTarget=null,this._clearActiveClass(p(K));continue}const ue=K.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(B&&ue){if(E(K),!x)return}else B||ue||E(K)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=X.find(lm,this._config.target);for(const p of h){if(!p.hash||m(p))continue;const E=X.findOne(decodeURI(p.hash),this._element);f(E)&&(this._targetLinks.set(decodeURI(p.hash),p),this._observableSections.set(p.hash,E))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(xo),this._activateParents(h),D.trigger(this._element,pD,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))X.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(xo);else for(const p of X.parents(h,".nav, .list-group"))for(const E of X.prev(p,gD))E.classList.add(xo)}_clearActiveClass(h){h.classList.remove(xo);const p=X.find(`${lm}.${xo}`,h);for(const E of p)E.classList.remove(xo)}static jQueryInterface(h){return this.each(function(){const p=Al.getOrCreateInstance(this,h);if(typeof h=="string"){if(p[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);p[h]()}})}}D.on(window,mD,()=>{for(const T of X.find('[data-bs-spy="scroll"]'))Al.getOrCreateInstance(T)}),S(Al);const ps=".bs.tab",vD=`hide${ps}`,wD=`hidden${ps}`,ED=`show${ps}`,ID=`shown${ps}`,TD=`click${ps}`,SD=`keydown${ps}`,AD=`load${ps}`,RD="ArrowLeft",tI="ArrowRight",PD="ArrowUp",nI="ArrowDown",um="Home",rI="End",ms="active",iI="fade",cm="show",sI=".dropdown-toggle",hm=`:not(${sI})`,oI='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',dm=`.nav-link${hm}, .list-group-item${hm}, [role="tab"]${hm}, ${oI}`,CD=`.${ms}[data-bs-toggle="tab"], .${ms}[data-bs-toggle="pill"], .${ms}[data-bs-toggle="list"]`;class gs extends Mt{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),D.on(this._element,SD,p=>this._keydown(p)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const p=this._getActiveElem(),E=p?D.trigger(p,vD,{relatedTarget:h}):null;D.trigger(h,ED,{relatedTarget:p}).defaultPrevented||E&&E.defaultPrevented||(this._deactivate(p,h),this._activate(h,p))}_activate(h,p){h&&(h.classList.add(ms),this._activate(X.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),D.trigger(h,ID,{relatedTarget:p})):h.classList.add(cm)},h,h.classList.contains(iI)))}_deactivate(h,p){h&&(h.classList.remove(ms),h.blur(),this._deactivate(X.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),D.trigger(h,wD,{relatedTarget:p})):h.classList.remove(cm)},h,h.classList.contains(iI)))}_keydown(h){if(![RD,tI,PD,nI,um,rI].includes(h.key))return;h.stopPropagation(),h.preventDefault();const p=this._getChildren().filter(x=>!m(x));let E;if([um,rI].includes(h.key))E=p[h.key===um?0:p.length-1];else{const x=[tI,nI].includes(h.key);E=k(p,h.target,x,!0)}E&&(E.focus({preventScroll:!0}),gs.getOrCreateInstance(E).show())}_getChildren(){return X.find(dm,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,p){this._setAttributeIfNotExists(h,"role","tablist");for(const E of p)this._setInitialAttributesOnChild(E)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const p=this._elemIsActive(h),E=this._getOuterElement(h);h.setAttribute("aria-selected",p),E!==h&&this._setAttributeIfNotExists(E,"role","presentation"),p||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const p=X.getElementFromSelector(h);p&&(this._setAttributeIfNotExists(p,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(p,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,p){const E=this._getOuterElement(h);if(!E.classList.contains("dropdown"))return;const x=(B,K)=>{const ue=X.findOne(B,E);ue&&ue.classList.toggle(K,p)};x(sI,ms),x(".dropdown-menu",cm),E.setAttribute("aria-expanded",p)}_setAttributeIfNotExists(h,p,E){h.hasAttribute(p)||h.setAttribute(p,E)}_elemIsActive(h){return h.classList.contains(ms)}_getInnerElement(h){return h.matches(dm)?h:X.findOne(dm,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const p=gs.getOrCreateInstance(this);if(typeof h=="string"){if(p[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);p[h]()}})}}D.on(document,TD,oI,function(T){["A","AREA"].includes(this.tagName)&&T.preventDefault(),m(this)||gs.getOrCreateInstance(this).show()}),D.on(window,AD,()=>{for(const T of X.find(CD))gs.getOrCreateInstance(T)}),S(gs);const ii=".bs.toast",bD=`mouseover${ii}`,kD=`mouseout${ii}`,xD=`focusin${ii}`,ND=`focusout${ii}`,DD=`hide${ii}`,OD=`hidden${ii}`,VD=`show${ii}`,LD=`shown${ii}`,aI="hide",_h="show",yh="showing",MD={animation:"boolean",autohide:"boolean",delay:"number"},FD={animation:!0,autohide:!0,delay:5e3};class Rl extends Mt{constructor(h,p){super(h,p),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return FD}static get DefaultType(){return MD}static get NAME(){return"toast"}show(){D.trigger(this._element,VD).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(aI),I(this._element),this._element.classList.add(_h,yh),this._queueCallback(()=>{this._element.classList.remove(yh),D.trigger(this._element,LD),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(D.trigger(this._element,DD).defaultPrevented||(this._element.classList.add(yh),this._queueCallback(()=>{this._element.classList.add(aI),this._element.classList.remove(yh,_h),D.trigger(this._element,OD)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(_h),super.dispose()}isShown(){return this._element.classList.contains(_h)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,p){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=p;break;case"focusin":case"focusout":this._hasKeyboardInteraction=p}if(p)return void this._clearTimeout();const E=h.relatedTarget;this._element===E||this._element.contains(E)||this._maybeScheduleHide()}_setListeners(){D.on(this._element,bD,h=>this._onInteraction(h,!0)),D.on(this._element,kD,h=>this._onInteraction(h,!1)),D.on(this._element,xD,h=>this._onInteraction(h,!0)),D.on(this._element,ND,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const p=Rl.getOrCreateInstance(this,h);if(typeof h=="string"){if(p[h]===void 0)throw new TypeError(`No method named "${h}"`);p[h](this)}})}}return To(Rl),S(Rl),{Alert:ni,Button:ls,Carousel:Po,Collapse:bo,Dropdown:Mn,Modal:ds,Offcanvas:Ar,Popover:gh,ScrollSpy:Al,Tab:gs,Toast:Rl,Tooltip:fs}})})(eq);const Qh=async(t,e,n)=>{n(!0);try{const r=await je.get(t);console.log(r.data),e(r.data)}catch(r){return r}n(!1)},qq=async(t,e,n)=>{n(!0);try{t.forEach(async(r,i)=>{const s=await je.get(r);i?i===1?e[i](s.data.cast.slice(0,6)):e[i](s.data.results.slice(0,20)):e[i](s.data)})}catch(r){return r}n(!1)};function Wq({movie:t,handleClickDetails:e}){var n;return C.jsx(Kr,{to:`/movie/${t.id}`,className:"movie-col col-sm-4 col-xl-3 mb-4",children:C.jsx("div",{onClick:()=>e(t.id),className:"movie-container",children:C.jsxs("div",{className:"movie",children:[C.jsx("img",{className:"img-fluid",src:t!=null&&t.poster_path?`https://image.tmdb.org/t/p/w500${t==null?void 0:t.poster_path}`:"https://digitalwellnesslab.org/wp-content/uploads/Header-TV-Movies-Streaming-Video-1024x683.jpg",alt:"movie"}),C.jsxs("div",{className:"overlay",children:[C.jsx("span",{className:"year text-light p-3",children:(n=t==null?void 0:t.release_date)==null?void 0:n.split("-")[0]}),C.jsx("div",{className:"movie-info",children:C.jsx("h5",{className:"title text-center",children:t==null?void 0:t.original_title})})]})]})})},t.id)}function Hq({movies:t,handleClickDetails:e,setNPages:n,title:r}){var s;console.log(t.total_pages),n((t==null?void 0:t.total_pages)>500?500:t.total_pages);const i=(s=t==null?void 0:t.results)==null?void 0:s.map(o=>C.jsx(Wq,{movie:o,handleClickDetails:e},o.id));return C.jsxs("div",{className:"movies px-2 px-sm-4 py-5",children:[r&&C.jsx("h2",{className:"movies-title text-center text-capitalize pb-1 mb-4",children:r}),C.jsx("div",{className:"movies-container row",children:i})]})}function Gq(t){return Eo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinejoin:"round",strokeWidth:"32",d:"M480 208H308L256 48l-52 160H32l140 96-54 160 138-100 138 100-54-160z"}}]})(t)}function Kq(t){return Eo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M394 480a16 16 0 01-9.39-3L256 383.76 127.39 477a16 16 0 01-24.55-18.08L153 310.35 23 221.2a16 16 0 019-29.2h160.38l48.4-148.95a16 16 0 0130.44 0l48.4 149H480a16 16 0 019.05 29.2L359 310.35l50.13 148.53A16 16 0 01394 480z"}}]})(t)}function Qq(t){return Eo({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M463 192H315.9L271.2 58.6C269 52.1 262.9 48 256 48s-13 4.1-15.2 10.6L196.1 192H48c-8.8 0-16 7.2-16 16 0 .9.1 1.9.3 2.7.2 3.5 1.8 7.4 6.7 11.3l120.9 85.2-46.4 134.9c-2.3 6.5 0 13.8 5.5 18 2.9 2.1 5.6 3.9 9 3.9 3.3 0 7.2-1.7 10-3.6l118-84.1 118 84.1c2.8 2 6.7 3.6 10 3.6 3.4 0 6.1-1.7 8.9-3.9 5.6-4.2 7.8-11.4 5.5-18L352 307.2l119.9-86 2.9-2.5c2.6-2.8 5.2-6.6 5.2-10.7 0-8.8-8.2-16-17-16zm-47.4 35.2l-79.8 57.3c-10 7.2-14.2 20.2-10.2 31.8l30.1 87.7c1.3 3.7-2.9 6.8-6.1 4.6l-77.4-55.2-.1-.1c-10-7-16.1-18.3-16.1-30.5V113.3c0-2.2 3.1-2.7 3.8-.6l29.6 88.2c3.8 11.4 14.5 19.1 26.5 19.1h97.3c3.9 0 5.5 5 2.4 7.2z"}}]})(t)}const Qx=()=>C.jsx("div",{className:"preloader-container",children:C.jsx("span",{className:"preloader"})}),WS=({handleClickAction:t,movie:e,children:n})=>{const r=()=>{t(e)},i=O.useContext(EE);return C.jsxs("button",{onClick:r,className:i?"button text-uppercase":"d-none",children:[n,C.jsx("span",{}),C.jsx("span",{})]})};function Yq({movie:t,actors:e,recommendations:n,handleClickDetails:r,handleClickActorDetails:i,favorites:s,setFavorites:o,watchlists:a,setWatchlists:l,loading:u}){window.scrollTo(0,0);const c=t,[d,f]=O.useState(!1),[m,w]=O.useState(!1),v=async()=>{if(d){console.log("GGGGGGGGGGGGGGGGGGGGGGGGGGGGGG"),f(R=>!R);const A=tr(Ba(sa,"favorites"),q_("key","==",t.id));Ls(A).then(R=>{if(R.empty)console.log("No document found with the specified field value.");else{const k=R.docs[0];return W_(ja(sa,"favorites",k.id))}}).then(()=>{console.log("Document successfully deleted!")}).catch(R=>{console.error("Error removing document: ",R)})}else{console.log("-*--*--*-"+s);const A={key:t.id,title:t.title,src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://digitalwellnesslab.org/wp-content/uploads/Header-TV-Movies-Streaming-Video-1024x683.jpg"};H_(ty,A).then(R=>console.log(R)).catch(R=>console.error(R.message)),o([...s,A.key]),f(R=>!R)}},I=async()=>{if(m){console.log("GGGGGGGGGGGGGGGGGGGGGGGGGGGGGG"),w(R=>!R);const A=tr(Ba(sa,"watchlists"),q_("key","==",t.id));Ls(A).then(R=>{if(R.empty)console.log("No document found with the specified field value.");else{const k=R.docs[0];return W_(ja(sa,"watchlists",k.id))}}).then(()=>{console.log("Document successfully deleted!")}).catch(R=>{console.error("Error removing document: ",R)})}else{console.log("-*--*--*-"+a);const A={key:t.id,title:t.title,src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://digitalwellnesslab.org/wp-content/uploads/Header-TV-Movies-Streaming-Video-1024x683.jpg"};H_(ny,A).then(R=>console.log(R)).catch(R=>console.error(R.message)),l([...a,A.key]),w(R=>!R)}},_=async()=>{try{const A=await Ls(ty);let R=[];A.forEach(ie=>{R.push(ie.data().key)}),console.log("-_-_-_-_-_-_-_-_-_-_-_-_-"),console.log(R);const k=R.some(ie=>ie===t.id);console.log(c),console.log(k),f(k),o(R);const $=await Ls(ny);let Q=[];$.forEach(ie=>{Q.push(ie.data().key)}),console.log("-_-_-_-_-_-_-_-_-_-_-_-_-"),console.log(Q);const W=Q.some(ie=>ie===t.id);console.log(c),console.log(W),w(W),o(Q)}catch(A){console.error(A)}console.log("blablablablabla")},g=[1,2,3,4,5],y=Math.round(t.vote_average)/2,{id:S}=ex();return console.log(y),O.useEffect(()=>{_()},[t]),O.useEffect(()=>{S&&r(S)},[S]),[1,2,3,4,5].map(A=>{t.vote_average/2>=A?console.log("star filled"):console.log("star outlined")}),console.log("from movie details: <>"),t&&console.log("movie is: "+t),console.log(e),console.log(n),u?C.jsx(Qx,{}):C.jsxs("div",{className:"movie-details px-2 px-sm-4 py-5",children:[C.jsxs("div",{className:"movie-details-container text-light d-flex justify-content-between flex-column flex-lg-row",children:[C.jsx("div",{className:"movie-img",children:C.jsxs("div",{className:"img mb-3 position-relative",children:[C.jsx("img",{className:"rounded-5 w-100",src:t.poster_path?`https://image.tmdb.org/t/p/w500${t.poster_path}`:"https://digitalwellnesslab.org/wp-content/uploads/Header-TV-Movies-Streaming-Video-1024x683.jpg",alt:"movie-img"}),C.jsx("div",{className:"play d-flex justify-content-center align-items-center",children:C.jsx("a",{href:"#",children:C.jsx(C6,{style:{color:"#1C8ADB",fontSize:"24px"}})})})]})}),C.jsxs("div",{className:"movie-info ps-lg-3 ps-xl-4 ps-xxl-5",children:[C.jsxs("h1",{className:"title mb-3",children:[t.original_title,"(",t.release_date&&t.release_date.split("-")[0],")"]}),C.jsx("p",{children:t.tagline}),C.jsxs("div",{className:"rate",children:[C.jsxs("div",{className:"d-sm-flex justify-content-between mb-3",children:[C.jsxs("div",{className:"rating d-flex gap-3 mb-2",children:[g.map((A,R)=>C.jsx("span",{className:"stars d-flex gap-1",children:y>=A?C.jsx(Kq,{style:{color:"#FFA500"}}):y!==Math.floor(y)&&Math.ceil(y)===A?C.jsx(Qq,{style:{color:"#FFA500"}}):C.jsx(Gq,{style:{color:"white"}})},R)),C.jsxs("span",{children:[t.vote_average," / 10"]})]}),C.jsxs("span",{children:[t.runtime,"min / ",t.release_date," / ",t.spoken_languages&&t.spoken_languages[0].english_name]})]}),C.jsx("div",{className:"type d-flex justify-content-around mb-3",children:t.genres&&t.genres.map((A,R)=>C.jsx("span",{children:A.name},R))}),C.jsxs("div",{className:"overview",children:[C.jsx("h4",{children:"Overview"}),C.jsx("p",{children:t.overview})]}),C.jsxs("div",{className:"actors",children:[C.jsx("h4",{className:"mb-3",children:"Actors"}),C.jsx("div",{className:"row",children:e&&e.map((A,R)=>C.jsx("div",{className:"actor-container col-4 col-sm-2 gap-sm-2 col-xl-2 mb-4 gap-3",children:C.jsxs(Kr,{to:`/actors/${A.id}`,onClick:()=>i(A.id),children:[C.jsx("div",{className:"actor-img",children:C.jsx("img",{className:"w-100 rounded-3",src:A.profile_path?`https://image.tmdb.org/t/p/w500${A.profile_path}`:"https://www.shutterstock.com/image-vector/vector-flat-illustration-grayscale-avatar-600nw-2264922221.jpg",alt:"actor"})}),C.jsxs("div",{className:"actor-info",children:[C.jsx("span",{children:A.name})," ",C.jsx("br",{}),C.jsx("span",{className:"text-secondary",children:A.character})]})]})},R))})]}),C.jsxs("div",{className:"actions d-flex gap-3 justify-content-center justify-content-lg-start",children:[C.jsx(WS,{handleClickAction:v,movie:t,setAddedToFavorite:f,addedToFavorite:d,action:"favorite",children:d?"Favorite -":"Favorite +"}),C.jsx(WS,{handleClickAction:I,movie:t,setAddedToWatchlist:w,addedToWatchlist:m,action:"watchlist",children:m?"Watchlist -":"Watchlist +"})]})]})]})]}),C.jsxs("div",{children:[C.jsx("h2",{className:"text-center text-white text-capitalize fs-1 mt-5",children:"you might also like"}),C.jsx("div",{className:"row mt-5",children:n.length>0&&n.map((A,R)=>C.jsxs(Kr,{to:`/movie/${A.id}`,onClick:()=>r(A.id),className:"movies-recommended col-6 col-sm-4 col-lg-3 col-xl-2 mb-3",children:[C.jsx("div",{className:"img",children:C.jsx("img",{className:"w-100 rounded-5",src:A.poster_path?`https://image.tmdb.org/t/p/w500${A.poster_path}`:"https://digitalwellnesslab.org/wp-content/uploads/Header-TV-Movies-Streaming-Video-1024x683.jpg",alt:"movie"})}),C.jsx("div",{className:"content",children:C.jsx("h5",{className:"text-center text-light mt-1",children:A.original_title})})]},R))})]})]})}const Jq=({actor:t,actorMovies:e,handleClickActorDetails:n})=>{const{id:r}=ex();return O.useEffect(()=>{n(r)},[r]),C.jsxs("div",{className:"actor px-2 px-sm-4 py-5",children:[C.jsxs("div",{className:"actor-details d-flex justify-content-between flex-column flex-lg-row",children:[C.jsx("div",{className:"actor-img me-3 mb-3",children:C.jsx("img",{src:t.profile_path?`https://image.tmdb.org/t/p/w500${t.profile_path}`:"https://www.shutterstock.com/image-vector/vector-flat-illustration-grayscale-avatar-600nw-2264922221.jpg",alt:"actor-img"})}),C.jsxs("div",{className:"actor-content",children:[C.jsxs("h2",{className:"name",children:[t.name," (",t.birthday,")"]}),C.jsx("p",{className:"overview",children:t.biography})]})]}),C.jsx("h2",{className:"text-center text-capitalize fs-1 mt-5",children:"Movies"}),C.jsx("div",{className:"actor-movies-container row mt-5",children:e.map((i,s)=>C.jsxs(Kr,{to:`/movie/${i.id}`,className:"actor-movies  movies-recommended col-6 col-sm-4 col-lg-3 col-xl-2 mb-3",children:[C.jsx("div",{className:"img",children:C.jsx("img",{className:"w-100 h-100 rounded-5",src:i.poster_path?`https://image.tmdb.org/t/p/w500${i.poster_path}`:"https://digitalwellnesslab.org/wp-content/uploads/Header-TV-Movies-Streaming-Video-1024x683.jpg",alt:"movie-img"})}),C.jsx("h5",{className:"text-center text-light mt-1",children:i.title})]},s))})]})},Xq=({favorites:t,setFavorites:e,watchlists:n,setWatchlists:r})=>{const i=O.useContext(EE);return O.useEffect(()=>{const s=[];Ls(ty).then(a=>{a.forEach(l=>{console.log(l.data()),s.push(l.data())}),e(s)}).catch(a=>console.error(a));const o=[];Ls(ny).then(a=>{a.forEach(l=>{console.log(l.data()),o.push(l.data())}),r(o)}).catch(a=>console.error(a))},[]),i?C.jsxs("div",{className:"favorites px-2 px-sm-4 py-5",children:[C.jsxs("div",{className:"favorites-movies",children:[C.jsx("h2",{className:"movies-title text-center text-capitalize pb-1 mb-4",children:"Favorite Movies"}),t.length>0&&C.jsx("div",{className:"favorites d-flex gap-3 flex-wrap",children:t.map(s=>C.jsxs(Kr,{to:`/movie/${s.key}`,className:"favorite",children:[C.jsx("img",{src:s.src,alt:"img"}),C.jsx("p",{className:"mt-2",children:s.title})]},s.key))})]}),C.jsxs("div",{className:"watchlist-movies mt-5",children:[C.jsx("h2",{className:"movies-title text-center text-capitalize pb-1 mb-4",children:"Watchlist Movies"}),n.length&&C.jsx("div",{className:"watchlists d-flex gap-3 flex-wrap",children:n.map(s=>C.jsxs(Kr,{to:`/movie/${s.key}`,className:"watchlist",children:[C.jsx("img",{src:s.src}),C.jsx("p",{className:"mt-2",children:s.title})]},s.key))})]})]}):C.jsx("h1",{className:"px-2 px-sm-4 py-5",children:"You need To login first"})},Zq=async(t,e,n,r)=>{r(!0);try{t.forEach(async(i,s)=>{console.log(i);const o=await je.get(i);s===0?(e(o.data),console.log(o.data)):(n(o.data.cast.sort((a,l)=>l.popularity-a.popularity).slice(0,20)),console.log(o.data.cast.sort((a,l)=>l.popularity-a.popularity).slice(0,20)))})}catch(i){return i}r(!1)},Sn="56b4c65fbfa0edfe0748a22f207e0133",EE=O.createContext(),eW=()=>{const[t,e]=O.useState([]),[n,r]=O.useState({}),[i,s]=O.useState([]),[o,a]=O.useState([]),[l,u]=O.useState(null),[c,d]=O.useState(1),[f,m]=O.useState("all"),[w,v]=O.useState(`https://api.themoviedb.org/3/discover/movie?api_key=${Sn}`),[I,_]=O.useState(null),[g,y]=O.useState("all movies"),[S,A]=O.useState(!1),[R,k]=O.useState(!0),[$,Q]=O.useState({}),[W,ie]=O.useState([]),[Oe,ge]=O.useState(!1),[Ot,Vt]=O.useState([]),[Ve,Je]=O.useState([]),U=O.useRef(null),Z={All:`https://api.themoviedb.org/3/discover/movie?api_key=${Sn}`,UpComing:`https://api.themoviedb.org/3/movie/upcoming?api_key=${Sn}`,"Top Rated":`https://api.themoviedb.org/3/movie/top_rated?api_key=${Sn}`,Popular:`https://api.themoviedb.org/3/movie/popular?api_key=${Sn}`,search:`https://api.themoviedb.org/3/search/movie?api_key=${Sn}`,genre:`https://api.themoviedb.org/3/discover/movie?api_key=${Sn}`},te=ce=>{s([]),d(1),m(ce),v(Z[ce]),A(!1),Qh(w+"&page=1",e,k),ge(!1),U.current.scrollTo(0,0)},ye=(ce,_e)=>{s([]),d(1),m(_e),v(Z[_e]+`&with_genres=${ce}`),Qh(w+"&page=1",e),ge(!1),U.current.scrollTo(0,0)},ve=(ce,_e)=>{s([]),d(1),m(_e),v(Z[_e]+`&query=${ce}`),Qh(w+"&page=1",e),ge(!1),U.current.scrollTo(0,0),y("")},D=ce=>{const _e=[`https://api.themoviedb.org/3/movie/${ce}?api_key=${Sn}`,`https://api.themoviedb.org/3/movie/${ce}/credits?api_key=${Sn}`,`https://api.themoviedb.org/3/movie/${ce}/recommendations?api_key=${Sn}`],Lt=[r,s,a];A(!0),qq(_e,Lt,k),ge(!1),U.current.scrollTo(0,0)},Xe=async ce=>{console.log("id is: "+ce);const _e=[`https://api.themoviedb.org/3/person/${ce}?api_key=${Sn}`,`https://api.themoviedb.org/3/person/${ce}/movie_credits?api_key=${Sn}`];A(!1),Zq(_e,Q,ie,k),ge(!1),U.current.scrollTo(0,0)},yt=()=>{ge(!Oe)};return O.useEffect(()=>{Qh(w+`&page=${c}`,e,k)},[c,f,w]),O.useEffect(()=>{window.scrollTo(0,0),console.log("----------sisisisisisis--------------")},[]),R?C.jsx(Qx,{}):C.jsx("div",{className:"app",children:C.jsx(P5,{children:C.jsx(EE.Provider,{value:I,children:C.jsxs("div",{className:"home d-flex",children:[C.jsx(J9,{barClicked:Oe,setBarClicked:ge,handleChangeGenre:ye,handleClickNavItems:te,setTitle:y}),C.jsxs(X9,{mainRef:U,children:[C.jsx(O5,{handleBarClicked:yt,user:I,setUser:_,handleSearch:ve,search:S}),C.jsxs(w5,{children:[["/movies","/",""].map((ce,_e)=>C.jsx(iu,{path:ce,element:C.jsx(Hq,{movies:t,handleClickDetails:D,setNPages:u,title:g},_e)},_e)),C.jsx(iu,{path:"/movie/:id",element:C.jsx(Yq,{movie:n,handleClickDetails:D,handleClickActorDetails:Xe,actors:i,recommendations:o,loading:R,setFavorites:Vt,watchlists:Ve,setWatchlists:Je,favorites:Ot})}),C.jsx(iu,{path:"/actors/:id",element:C.jsx(Jq,{user:I,actor:$,actorMovies:W,handleClickActorDetails:Xe})}),C.jsx(iu,{path:"/profile",element:C.jsx(Xq,{favorites:Ot,setFavorites:Vt,watchlists:Ve,setWatchlists:Je})})]}),C.jsx(Z9,{nPages:l,cPage:c,setCPage:d})]})]})})})})};fg.createRoot(document.getElementById("root")).render(C.jsx(Lr.StrictMode,{children:C.jsx(eW,{})}));
